function $E(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ev={exports:{}},gu={},Tv={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=Symbol.for("react.element"),HE=Symbol.for("react.portal"),qE=Symbol.for("react.fragment"),WE=Symbol.for("react.strict_mode"),GE=Symbol.for("react.profiler"),KE=Symbol.for("react.provider"),QE=Symbol.for("react.context"),YE=Symbol.for("react.forward_ref"),XE=Symbol.for("react.suspense"),JE=Symbol.for("react.memo"),ZE=Symbol.for("react.lazy"),wm=Symbol.iterator;function eT(t){return t===null||typeof t!="object"?null:(t=wm&&t[wm]||t["@@iterator"],typeof t=="function"?t:null)}var xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iv=Object.assign,Sv={};function mi(t,e,n){this.props=t,this.context=e,this.refs=Sv,this.updater=n||xv}mi.prototype.isReactComponent={};mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Av(){}Av.prototype=mi.prototype;function kd(t,e,n){this.props=t,this.context=e,this.refs=Sv,this.updater=n||xv}var Nd=kd.prototype=new Av;Nd.constructor=kd;Iv(Nd,mi.prototype);Nd.isPureReactComponent=!0;var Em=Array.isArray,Cv=Object.prototype.hasOwnProperty,bd={current:null},Rv={key:!0,ref:!0,__self:!0,__source:!0};function Pv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Cv.call(e,r)&&!Rv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Qo,type:t,key:i,ref:o,props:s,_owner:bd.current}}function tT(t,e){return{$$typeof:Qo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qo}function nT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tm=/\/+/g;function wc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nT(""+t.key):e.toString(36)}function el(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qo:case HE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+wc(o,0):r,Em(s)?(n="",t!=null&&(n=t.replace(Tm,"$&/")+"/"),el(s,e,n,"",function(c){return c})):s!=null&&(Dd(s)&&(s=tT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Tm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Em(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+wc(i,l);o+=el(i,e,n,u,s)}else if(u=eT(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+wc(i,l++),o+=el(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ra(t,e,n){if(t==null)return t;var r=[],s=0;return el(t,r,"","",function(i){return e.call(n,i,s++)}),r}function rT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},tl={transition:null},sT={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:tl,ReactCurrentOwner:bd};function kv(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Ra,forEach:function(t,e,n){Ra(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ra(t,function(){e++}),e},toArray:function(t){return Ra(t,function(e){return e})||[]},only:function(t){if(!Dd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=mi;fe.Fragment=qE;fe.Profiler=GE;fe.PureComponent=kd;fe.StrictMode=WE;fe.Suspense=XE;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sT;fe.act=kv;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Iv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Cv.call(e,u)&&!Rv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Qo,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:QE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KE,_context:t},t.Consumer=t};fe.createElement=Pv;fe.createFactory=function(t){var e=Pv.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:YE,render:t}};fe.isValidElement=Dd;fe.lazy=function(t){return{$$typeof:ZE,_payload:{_status:-1,_result:t},_init:rT}};fe.memo=function(t,e){return{$$typeof:JE,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=tl.transition;tl.transition={};try{t()}finally{tl.transition=e}};fe.unstable_act=kv;fe.useCallback=function(t,e){return It.current.useCallback(t,e)};fe.useContext=function(t){return It.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return It.current.useDeferredValue(t)};fe.useEffect=function(t,e){return It.current.useEffect(t,e)};fe.useId=function(){return It.current.useId()};fe.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return It.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};fe.useRef=function(t){return It.current.useRef(t)};fe.useState=function(t){return It.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return It.current.useTransition()};fe.version="18.3.1";Tv.exports=fe;var G=Tv.exports;const Od=wv(G),iT=$E({__proto__:null,default:Od},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT=G,aT=Symbol.for("react.element"),lT=Symbol.for("react.fragment"),uT=Object.prototype.hasOwnProperty,cT=oT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hT={key:!0,ref:!0,__self:!0,__source:!0};function Nv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uT.call(e,r)&&!hT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aT,type:t,key:i,ref:o,props:s,_owner:cT.current}}gu.Fragment=lT;gu.jsx=Nv;gu.jsxs=Nv;Ev.exports=gu;var f=Ev.exports,lh={},bv={exports:{}},Ut={},Dv={exports:{}},Ov={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Z){var te=W.length;W.push(Z);e:for(;0<te;){var ye=te-1>>>1,we=W[ye];if(0<s(we,Z))W[ye]=Z,W[te]=we,te=ye;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Z=W[0],te=W.pop();if(te!==Z){W[0]=te;e:for(var ye=0,we=W.length,ot=we>>>1;ye<ot;){var Qe=2*(ye+1)-1,Pn=W[Qe],et=Qe+1,an=W[et];if(0>s(Pn,te))et<we&&0>s(an,Pn)?(W[ye]=an,W[et]=te,ye=et):(W[ye]=Pn,W[Qe]=te,ye=Qe);else if(et<we&&0>s(an,te))W[ye]=an,W[et]=te,ye=et;else break e}}return Z}function s(W,Z){var te=W.sortIndex-Z.sortIndex;return te!==0?te:W.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,m=null,_=3,R=!1,P=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=W)r(c),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=n(c)}}function O(W){if(k=!1,C(W),!P)if(n(u)!==null)P=!0,ie(D);else{var Z=n(c);Z!==null&&he(O,Z.startTime-W)}}function D(W,Z){P=!1,k&&(k=!1,A(y),y=-1),R=!0;var te=_;try{for(C(Z),m=n(u);m!==null&&(!(m.expirationTime>Z)||W&&!E());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,_=m.priorityLevel;var we=ye(m.expirationTime<=Z);Z=t.unstable_now(),typeof we=="function"?m.callback=we:m===n(u)&&r(u),C(Z)}else r(u);m=n(u)}if(m!==null)var ot=!0;else{var Qe=n(c);Qe!==null&&he(O,Qe.startTime-Z),ot=!1}return ot}finally{m=null,_=te,R=!1}}var V=!1,T=null,y=-1,v=5,I=-1;function E(){return!(t.unstable_now()-I<v)}function g(){if(T!==null){var W=t.unstable_now();I=W;var Z=!0;try{Z=T(!0,W)}finally{Z?w():(V=!1,T=null)}}else V=!1}var w;if(typeof S=="function")w=function(){S(g)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,$=L.port2;L.port1.onmessage=g,w=function(){$.postMessage(null)}}else w=function(){N(g,0)};function ie(W){T=W,V||(V=!0,w())}function he(W,Z){y=N(function(){W(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,ie(D))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var te=_;_=Z;try{return W()}finally{_=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=_;_=W;try{return Z()}finally{_=te}},t.unstable_scheduleCallback=function(W,Z,te){var ye=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ye+te:ye):te=ye,W){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=te+we,W={id:d++,callback:Z,priorityLevel:W,startTime:te,expirationTime:we,sortIndex:-1},te>ye?(W.sortIndex=te,e(c,W),n(u)===null&&W===n(c)&&(k?(A(y),y=-1):k=!0,he(O,te-ye))):(W.sortIndex=we,e(u,W),P||R||(P=!0,ie(D))),W},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(W){var Z=_;return function(){var te=_;_=Z;try{return W.apply(this,arguments)}finally{_=te}}}})(Ov);Dv.exports=Ov;var dT=Dv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT=G,jt=dT;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vv=new Set,Eo={};function ys(t,e){ti(t,e),ti(t+"Capture",e)}function ti(t,e){for(Eo[t]=e,t=0;t<e.length;t++)Vv.add(e[t])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uh=Object.prototype.hasOwnProperty,pT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xm={},Im={};function mT(t){return uh.call(Im,t)?!0:uh.call(xm,t)?!1:pT.test(t)?Im[t]=!0:(xm[t]=!0,!1)}function gT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yT(t,e,n,r){if(e===null||typeof e>"u"||gT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vd=/[\-:]([a-z])/g;function Md(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vd,Md);ht[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vd,Md);ht[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vd,Md);ht[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ld(t,e,n,r){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yT(e,n,s,r)&&(n=null),r||s===null?mT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kn=fT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pa=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Ds=Symbol.for("react.fragment"),jd=Symbol.for("react.strict_mode"),ch=Symbol.for("react.profiler"),Mv=Symbol.for("react.provider"),Lv=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),hh=Symbol.for("react.suspense"),dh=Symbol.for("react.suspense_list"),Fd=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),jv=Symbol.for("react.offscreen"),Sm=Symbol.iterator;function $i(t){return t===null||typeof t!="object"?null:(t=Sm&&t[Sm]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Ec;function Xi(t){if(Ec===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ec=e&&e[1]||""}return`
`+Ec+t}var Tc=!1;function xc(t,e){if(!t||Tc)return"";Tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Tc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xi(t):""}function vT(t){switch(t.tag){case 5:return Xi(t.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 2:case 15:return t=xc(t.type,!1),t;case 11:return t=xc(t.type.render,!1),t;case 1:return t=xc(t.type,!0),t;default:return""}}function fh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ds:return"Fragment";case bs:return"Portal";case ch:return"Profiler";case jd:return"StrictMode";case hh:return"Suspense";case dh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lv:return(t.displayName||"Context")+".Consumer";case Mv:return(t._context.displayName||"Context")+".Provider";case Ud:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fd:return e=t.displayName||null,e!==null?e:fh(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return fh(t(e))}catch{}}return null}function _T(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fh(e);case 8:return e===jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wT(t){var e=Uv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ka(t){t._valueTracker||(t._valueTracker=wT(t))}function Fv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Uv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ph(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Am(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bv(t,e){e=e.checked,e!=null&&Ld(t,"checked",e,!1)}function mh(t,e){Bv(t,e);var n=Rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gh(t,e.type,n):e.hasOwnProperty("defaultValue")&&gh(t,e.type,Rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gh(t,e,n){(e!=="number"||Tl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ji=Array.isArray;function Hs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Ji(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rr(n)}}function zv(t,e){var n=Rr(e.value),r=Rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $v(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$v(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Na,Hv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Na=Na||document.createElement("div"),Na.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Na.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function To(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ET=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(t){ET.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),io[e]=io[t]})});function qv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||io.hasOwnProperty(t)&&io[t]?(""+e).trim():e+"px"}function Wv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var TT=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _h(t,e){if(e){if(TT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function wh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eh=null;function Bd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Th=null,qs=null,Ws=null;function km(t){if(t=Jo(t)){if(typeof Th!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Eu(e),Th(t.stateNode,t.type,e))}}function Gv(t){qs?Ws?Ws.push(t):Ws=[t]:qs=t}function Kv(){if(qs){var t=qs,e=Ws;if(Ws=qs=null,km(t),e)for(t=0;t<e.length;t++)km(e[t])}}function Qv(t,e){return t(e)}function Yv(){}var Ic=!1;function Xv(t,e,n){if(Ic)return t(e,n);Ic=!0;try{return Qv(t,e,n)}finally{Ic=!1,(qs!==null||Ws!==null)&&(Yv(),Kv())}}function xo(t,e){var n=t.stateNode;if(n===null)return null;var r=Eu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var xh=!1;if(Un)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){xh=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{xh=!1}function xT(t,e,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var oo=!1,xl=null,Il=!1,Ih=null,IT={onError:function(t){oo=!0,xl=t}};function ST(t,e,n,r,s,i,o,l,u){oo=!1,xl=null,xT.apply(IT,arguments)}function AT(t,e,n,r,s,i,o,l,u){if(ST.apply(this,arguments),oo){if(oo){var c=xl;oo=!1,xl=null}else throw Error(K(198));Il||(Il=!0,Ih=c)}}function vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nm(t){if(vs(t)!==t)throw Error(K(188))}function CT(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Nm(s),t;if(i===r)return Nm(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Zv(t){return t=CT(t),t!==null?e_(t):null}function e_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=e_(t);if(e!==null)return e;t=t.sibling}return null}var t_=jt.unstable_scheduleCallback,bm=jt.unstable_cancelCallback,RT=jt.unstable_shouldYield,PT=jt.unstable_requestPaint,ze=jt.unstable_now,kT=jt.unstable_getCurrentPriorityLevel,zd=jt.unstable_ImmediatePriority,n_=jt.unstable_UserBlockingPriority,Sl=jt.unstable_NormalPriority,NT=jt.unstable_LowPriority,r_=jt.unstable_IdlePriority,yu=null,mn=null;function bT(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(yu,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:VT,DT=Math.log,OT=Math.LN2;function VT(t){return t>>>=0,t===0?32:31-(DT(t)/OT|0)|0}var ba=64,Da=4194304;function Zi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Zi(l):(i&=o,i!==0&&(r=Zi(i)))}else o=n&~s,o!==0?r=Zi(o):i!==0&&(r=Zi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),s=1<<n,r|=t[n],e&=~s;return r}function MT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=MT(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Sh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function s_(){var t=ba;return ba<<=1,!(ba&4194240)&&(ba=64),t}function Sc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function jT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $d(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function i_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var o_,Hd,a_,l_,u_,Ah=!1,Oa=[],mr=null,gr=null,yr=null,Io=new Map,So=new Map,or=[],UT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dm(t,e){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Io.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(e.pointerId)}}function qi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Jo(e),e!==null&&Hd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FT(t,e,n,r,s){switch(e){case"focusin":return mr=qi(mr,t,e,n,r,s),!0;case"dragenter":return gr=qi(gr,t,e,n,r,s),!0;case"mouseover":return yr=qi(yr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Io.set(i,qi(Io.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,So.set(i,qi(So.get(i)||null,t,e,n,r,s)),!0}return!1}function c_(t){var e=Jr(t.target);if(e!==null){var n=vs(e);if(n!==null){if(e=n.tag,e===13){if(e=Jv(n),e!==null){t.blockedOn=e,u_(t.priority,function(){a_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ch(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eh=r,n.target.dispatchEvent(r),Eh=null}else return e=Jo(n),e!==null&&Hd(e),t.blockedOn=n,!1;e.shift()}return!0}function Om(t,e,n){nl(t)&&n.delete(e)}function BT(){Ah=!1,mr!==null&&nl(mr)&&(mr=null),gr!==null&&nl(gr)&&(gr=null),yr!==null&&nl(yr)&&(yr=null),Io.forEach(Om),So.forEach(Om)}function Wi(t,e){t.blockedOn===e&&(t.blockedOn=null,Ah||(Ah=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,BT)))}function Ao(t){function e(s){return Wi(s,t)}if(0<Oa.length){Wi(Oa[0],t);for(var n=1;n<Oa.length;n++){var r=Oa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mr!==null&&Wi(mr,t),gr!==null&&Wi(gr,t),yr!==null&&Wi(yr,t),Io.forEach(e),So.forEach(e),n=0;n<or.length;n++)r=or[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)c_(n),n.blockedOn===null&&or.shift()}var Gs=Kn.ReactCurrentBatchConfig,Cl=!0;function zT(t,e,n,r){var s=Se,i=Gs.transition;Gs.transition=null;try{Se=1,qd(t,e,n,r)}finally{Se=s,Gs.transition=i}}function $T(t,e,n,r){var s=Se,i=Gs.transition;Gs.transition=null;try{Se=4,qd(t,e,n,r)}finally{Se=s,Gs.transition=i}}function qd(t,e,n,r){if(Cl){var s=Ch(t,e,n,r);if(s===null)Vc(t,e,r,Rl,n),Dm(t,r);else if(FT(s,t,e,n,r))r.stopPropagation();else if(Dm(t,r),e&4&&-1<UT.indexOf(t)){for(;s!==null;){var i=Jo(s);if(i!==null&&o_(i),i=Ch(t,e,n,r),i===null&&Vc(t,e,r,Rl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vc(t,e,r,null,n)}}var Rl=null;function Ch(t,e,n,r){if(Rl=null,t=Bd(r),t=Jr(t),t!==null)if(e=vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rl=t,null}function h_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kT()){case zd:return 1;case n_:return 4;case Sl:case NT:return 16;case r_:return 536870912;default:return 16}default:return 16}}var hr=null,Wd=null,rl=null;function d_(){if(rl)return rl;var t,e=Wd,n=e.length,r,s="value"in hr?hr.value:hr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return rl=s.slice(t,1<r?1-r:void 0)}function sl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Va(){return!0}function Vm(){return!1}function Ft(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Va:Vm,this.isPropagationStopped=Vm,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Va)},persist:function(){},isPersistent:Va}),e}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gd=Ft(gi),Xo=Le({},gi,{view:0,detail:0}),HT=Ft(Xo),Ac,Cc,Gi,vu=Le({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gi&&(Gi&&t.type==="mousemove"?(Ac=t.screenX-Gi.screenX,Cc=t.screenY-Gi.screenY):Cc=Ac=0,Gi=t),Ac)},movementY:function(t){return"movementY"in t?t.movementY:Cc}}),Mm=Ft(vu),qT=Le({},vu,{dataTransfer:0}),WT=Ft(qT),GT=Le({},Xo,{relatedTarget:0}),Rc=Ft(GT),KT=Le({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),QT=Ft(KT),YT=Le({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XT=Ft(YT),JT=Le({},gi,{data:0}),Lm=Ft(JT),ZT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ex={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tx[t])?!!e[t]:!1}function Kd(){return nx}var rx=Le({},Xo,{key:function(t){if(t.key){var e=ZT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ex[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kd,charCode:function(t){return t.type==="keypress"?sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sx=Ft(rx),ix=Le({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jm=Ft(ix),ox=Le({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kd}),ax=Ft(ox),lx=Le({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ux=Ft(lx),cx=Le({},vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hx=Ft(cx),dx=[9,13,27,32],Qd=Un&&"CompositionEvent"in window,ao=null;Un&&"documentMode"in document&&(ao=document.documentMode);var fx=Un&&"TextEvent"in window&&!ao,f_=Un&&(!Qd||ao&&8<ao&&11>=ao),Um=" ",Fm=!1;function p_(t,e){switch(t){case"keyup":return dx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function px(t,e){switch(t){case"compositionend":return m_(e);case"keypress":return e.which!==32?null:(Fm=!0,Um);case"textInput":return t=e.data,t===Um&&Fm?null:t;default:return null}}function mx(t,e){if(Os)return t==="compositionend"||!Qd&&p_(t,e)?(t=d_(),rl=Wd=hr=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f_&&e.locale!=="ko"?null:e.data;default:return null}}var gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gx[t.type]:e==="textarea"}function g_(t,e,n,r){Gv(r),e=Pl(e,"onChange"),0<e.length&&(n=new Gd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lo=null,Co=null;function yx(t){C_(t,0)}function _u(t){var e=Ls(t);if(Fv(e))return t}function vx(t,e){if(t==="change")return e}var y_=!1;if(Un){var Pc;if(Un){var kc="oninput"in document;if(!kc){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),kc=typeof zm.oninput=="function"}Pc=kc}else Pc=!1;y_=Pc&&(!document.documentMode||9<document.documentMode)}function $m(){lo&&(lo.detachEvent("onpropertychange",v_),Co=lo=null)}function v_(t){if(t.propertyName==="value"&&_u(Co)){var e=[];g_(e,Co,t,Bd(t)),Xv(yx,e)}}function _x(t,e,n){t==="focusin"?($m(),lo=e,Co=n,lo.attachEvent("onpropertychange",v_)):t==="focusout"&&$m()}function wx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(Co)}function Ex(t,e){if(t==="click")return _u(e)}function Tx(t,e){if(t==="input"||t==="change")return _u(e)}function xx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:xx;function Ro(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uh.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function Hm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qm(t,e){var n=Hm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hm(n)}}function __(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?__(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function w_(){for(var t=window,e=Tl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tl(t.document)}return e}function Yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ix(t){var e=w_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&__(n.ownerDocument.documentElement,n)){if(r!==null&&Yd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qm(n,i);var o=qm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sx=Un&&"documentMode"in document&&11>=document.documentMode,Vs=null,Rh=null,uo=null,Ph=!1;function Wm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ph||Vs==null||Vs!==Tl(r)||(r=Vs,"selectionStart"in r&&Yd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uo&&Ro(uo,r)||(uo=r,r=Pl(Rh,"onSelect"),0<r.length&&(e=new Gd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vs)))}function Ma(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionend:Ma("Transition","TransitionEnd")},Nc={},E_={};Un&&(E_=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function wu(t){if(Nc[t])return Nc[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in E_)return Nc[t]=e[n];return t}var T_=wu("animationend"),x_=wu("animationiteration"),I_=wu("animationstart"),S_=wu("transitionend"),A_=new Map,Gm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){A_.set(t,e),ys(e,[t])}for(var bc=0;bc<Gm.length;bc++){var Dc=Gm[bc],Ax=Dc.toLowerCase(),Cx=Dc[0].toUpperCase()+Dc.slice(1);Lr(Ax,"on"+Cx)}Lr(T_,"onAnimationEnd");Lr(x_,"onAnimationIteration");Lr(I_,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(S_,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(eo));function Km(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AT(r,e,void 0,t),t.currentTarget=null}function C_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Km(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Km(s,l,c),i=u}}}if(Il)throw t=Ih,Il=!1,Ih=null,t}function Ne(t,e){var n=e[Oh];n===void 0&&(n=e[Oh]=new Set);var r=t+"__bubble";n.has(r)||(R_(e,t,2,!1),n.add(r))}function Oc(t,e,n){var r=0;e&&(r|=4),R_(n,t,r,e)}var La="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[La]){t[La]=!0,Vv.forEach(function(n){n!=="selectionchange"&&(Rx.has(n)||Oc(n,!1,t),Oc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[La]||(e[La]=!0,Oc("selectionchange",!1,e))}}function R_(t,e,n,r){switch(h_(e)){case 1:var s=zT;break;case 4:s=$T;break;default:s=qd}n=s.bind(null,e,n,t),s=void 0,!xh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Jr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Xv(function(){var c=i,d=Bd(n),m=[];e:{var _=A_.get(t);if(_!==void 0){var R=Gd,P=t;switch(t){case"keypress":if(sl(n)===0)break e;case"keydown":case"keyup":R=sx;break;case"focusin":P="focus",R=Rc;break;case"focusout":P="blur",R=Rc;break;case"beforeblur":case"afterblur":R=Rc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=WT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=ax;break;case T_:case x_:case I_:R=QT;break;case S_:R=ux;break;case"scroll":R=HT;break;case"wheel":R=hx;break;case"copy":case"cut":case"paste":R=XT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=jm}var k=(e&4)!==0,N=!k&&t==="scroll",A=k?_!==null?_+"Capture":null:_;k=[];for(var S=c,C;S!==null;){C=S;var O=C.stateNode;if(C.tag===5&&O!==null&&(C=O,A!==null&&(O=xo(S,A),O!=null&&k.push(ko(S,O,C)))),N)break;S=S.return}0<k.length&&(_=new R(_,P,null,n,d),m.push({event:_,listeners:k}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==Eh&&(P=n.relatedTarget||n.fromElement)&&(Jr(P)||P[Fn]))break e;if((R||_)&&(_=d.window===d?d:(_=d.ownerDocument)?_.defaultView||_.parentWindow:window,R?(P=n.relatedTarget||n.toElement,R=c,P=P?Jr(P):null,P!==null&&(N=vs(P),P!==N||P.tag!==5&&P.tag!==6)&&(P=null)):(R=null,P=c),R!==P)){if(k=Mm,O="onMouseLeave",A="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(k=jm,O="onPointerLeave",A="onPointerEnter",S="pointer"),N=R==null?_:Ls(R),C=P==null?_:Ls(P),_=new k(O,S+"leave",R,n,d),_.target=N,_.relatedTarget=C,O=null,Jr(d)===c&&(k=new k(A,S+"enter",P,n,d),k.target=C,k.relatedTarget=N,O=k),N=O,R&&P)t:{for(k=R,A=P,S=0,C=k;C;C=As(C))S++;for(C=0,O=A;O;O=As(O))C++;for(;0<S-C;)k=As(k),S--;for(;0<C-S;)A=As(A),C--;for(;S--;){if(k===A||A!==null&&k===A.alternate)break t;k=As(k),A=As(A)}k=null}else k=null;R!==null&&Qm(m,_,R,k,!1),P!==null&&N!==null&&Qm(m,N,P,k,!0)}}e:{if(_=c?Ls(c):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var D=vx;else if(Bm(_))if(y_)D=Tx;else{D=wx;var V=_x}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(D=Ex);if(D&&(D=D(t,c))){g_(m,D,n,d);break e}V&&V(t,_,c),t==="focusout"&&(V=_._wrapperState)&&V.controlled&&_.type==="number"&&gh(_,"number",_.value)}switch(V=c?Ls(c):window,t){case"focusin":(Bm(V)||V.contentEditable==="true")&&(Vs=V,Rh=c,uo=null);break;case"focusout":uo=Rh=Vs=null;break;case"mousedown":Ph=!0;break;case"contextmenu":case"mouseup":case"dragend":Ph=!1,Wm(m,n,d);break;case"selectionchange":if(Sx)break;case"keydown":case"keyup":Wm(m,n,d)}var T;if(Qd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Os?p_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(f_&&n.locale!=="ko"&&(Os||y!=="onCompositionStart"?y==="onCompositionEnd"&&Os&&(T=d_()):(hr=d,Wd="value"in hr?hr.value:hr.textContent,Os=!0)),V=Pl(c,y),0<V.length&&(y=new Lm(y,t,null,n,d),m.push({event:y,listeners:V}),T?y.data=T:(T=m_(n),T!==null&&(y.data=T)))),(T=fx?px(t,n):mx(t,n))&&(c=Pl(c,"onBeforeInput"),0<c.length&&(d=new Lm("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:c}),d.data=T))}C_(m,e)})}function ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xo(t,n),i!=null&&r.unshift(ko(t,i,s)),i=xo(t,e),i!=null&&r.push(ko(t,i,s))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=xo(n,i),u!=null&&o.unshift(ko(n,u,l))):s||(u=xo(n,i),u!=null&&o.push(ko(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Px=/\r\n?/g,kx=/\u0000|\uFFFD/g;function Ym(t){return(typeof t=="string"?t:""+t).replace(Px,`
`).replace(kx,"")}function ja(t,e,n){if(e=Ym(e),Ym(t)!==e&&n)throw Error(K(425))}function kl(){}var kh=null,Nh=null;function bh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dh=typeof setTimeout=="function"?setTimeout:void 0,Nx=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(t){return Xm.resolve(null).then(t).catch(Dx)}:Dh;function Dx(t){setTimeout(function(){throw t})}function Mc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ao(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ao(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),pn="__reactFiber$"+yi,No="__reactProps$"+yi,Fn="__reactContainer$"+yi,Oh="__reactEvents$"+yi,Ox="__reactListeners$"+yi,Vx="__reactHandles$"+yi;function Jr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fn]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jm(t);t!==null;){if(n=t[pn])return n;t=Jm(t)}return e}t=n,n=t.parentNode}return null}function Jo(t){return t=t[pn]||t[Fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Eu(t){return t[No]||null}var Vh=[],js=-1;function jr(t){return{current:t}}function be(t){0>js||(t.current=Vh[js],Vh[js]=null,js--)}function Pe(t,e){js++,Vh[js]=t.current,t.current=e}var Pr={},_t=jr(Pr),kt=jr(!1),as=Pr;function ni(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(t){return t=t.childContextTypes,t!=null}function Nl(){be(kt),be(_t)}function Zm(t,e,n){if(_t.current!==Pr)throw Error(K(168));Pe(_t,e),Pe(kt,n)}function P_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,_T(t)||"Unknown",s));return Le({},n,r)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,as=_t.current,Pe(_t,t),Pe(kt,kt.current),!0}function eg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=P_(t,e,as),r.__reactInternalMemoizedMergedChildContext=t,be(kt),be(_t),Pe(_t,t)):be(kt),Pe(kt,n)}var Nn=null,Tu=!1,Lc=!1;function k_(t){Nn===null?Nn=[t]:Nn.push(t)}function Mx(t){Tu=!0,k_(t)}function Ur(){if(!Lc&&Nn!==null){Lc=!0;var t=0,e=Se;try{var n=Nn;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nn=null,Tu=!1}catch(s){throw Nn!==null&&(Nn=Nn.slice(t+1)),t_(zd,Ur),s}finally{Se=e,Lc=!1}}return null}var Us=[],Fs=0,Dl=null,Ol=0,Bt=[],zt=0,ls=null,Dn=1,On="";function Qr(t,e){Us[Fs++]=Ol,Us[Fs++]=Dl,Dl=t,Ol=e}function N_(t,e,n){Bt[zt++]=Dn,Bt[zt++]=On,Bt[zt++]=ls,ls=t;var r=Dn;t=On;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var i=32-tn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dn=1<<32-tn(e)+s|n<<s|r,On=i+t}else Dn=1<<i|n<<s|r,On=t}function Xd(t){t.return!==null&&(Qr(t,1),N_(t,1,0))}function Jd(t){for(;t===Dl;)Dl=Us[--Fs],Us[Fs]=null,Ol=Us[--Fs],Us[Fs]=null;for(;t===ls;)ls=Bt[--zt],Bt[zt]=null,On=Bt[--zt],Bt[zt]=null,Dn=Bt[--zt],Bt[zt]=null}var Lt=null,Vt=null,De=!1,Jt=null;function b_(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Vt=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ls!==null?{id:Dn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Vt=null,!0):!1;default:return!1}}function Mh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lh(t){if(De){var e=Vt;if(e){var n=e;if(!tg(t,e)){if(Mh(t))throw Error(K(418));e=vr(n.nextSibling);var r=Lt;e&&tg(t,e)?b_(r,n):(t.flags=t.flags&-4097|2,De=!1,Lt=t)}}else{if(Mh(t))throw Error(K(418));t.flags=t.flags&-4097|2,De=!1,Lt=t}}}function ng(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Ua(t){if(t!==Lt)return!1;if(!De)return ng(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bh(t.type,t.memoizedProps)),e&&(e=Vt)){if(Mh(t))throw D_(),Error(K(418));for(;e;)b_(t,e),e=vr(e.nextSibling)}if(ng(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Lt?vr(t.stateNode.nextSibling):null;return!0}function D_(){for(var t=Vt;t;)t=vr(t.nextSibling)}function ri(){Vt=Lt=null,De=!1}function Zd(t){Jt===null?Jt=[t]:Jt.push(t)}var Lx=Kn.ReactCurrentBatchConfig;function Ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Fa(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rg(t){var e=t._init;return e(t._payload)}function O_(t){function e(A,S){if(t){var C=A.deletions;C===null?(A.deletions=[S],A.flags|=16):C.push(S)}}function n(A,S){if(!t)return null;for(;S!==null;)e(A,S),S=S.sibling;return null}function r(A,S){for(A=new Map;S!==null;)S.key!==null?A.set(S.key,S):A.set(S.index,S),S=S.sibling;return A}function s(A,S){return A=Tr(A,S),A.index=0,A.sibling=null,A}function i(A,S,C){return A.index=C,t?(C=A.alternate,C!==null?(C=C.index,C<S?(A.flags|=2,S):C):(A.flags|=2,S)):(A.flags|=1048576,S)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,S,C,O){return S===null||S.tag!==6?(S=Hc(C,A.mode,O),S.return=A,S):(S=s(S,C),S.return=A,S)}function u(A,S,C,O){var D=C.type;return D===Ds?d(A,S,C.props.children,O,C.key):S!==null&&(S.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===sr&&rg(D)===S.type)?(O=s(S,C.props),O.ref=Ki(A,S,C),O.return=A,O):(O=hl(C.type,C.key,C.props,null,A.mode,O),O.ref=Ki(A,S,C),O.return=A,O)}function c(A,S,C,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=qc(C,A.mode,O),S.return=A,S):(S=s(S,C.children||[]),S.return=A,S)}function d(A,S,C,O,D){return S===null||S.tag!==7?(S=ss(C,A.mode,O,D),S.return=A,S):(S=s(S,C),S.return=A,S)}function m(A,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Hc(""+S,A.mode,C),S.return=A,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pa:return C=hl(S.type,S.key,S.props,null,A.mode,C),C.ref=Ki(A,null,S),C.return=A,C;case bs:return S=qc(S,A.mode,C),S.return=A,S;case sr:var O=S._init;return m(A,O(S._payload),C)}if(Ji(S)||$i(S))return S=ss(S,A.mode,C,null),S.return=A,S;Fa(A,S)}return null}function _(A,S,C,O){var D=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return D!==null?null:l(A,S,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Pa:return C.key===D?u(A,S,C,O):null;case bs:return C.key===D?c(A,S,C,O):null;case sr:return D=C._init,_(A,S,D(C._payload),O)}if(Ji(C)||$i(C))return D!==null?null:d(A,S,C,O,null);Fa(A,C)}return null}function R(A,S,C,O,D){if(typeof O=="string"&&O!==""||typeof O=="number")return A=A.get(C)||null,l(S,A,""+O,D);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Pa:return A=A.get(O.key===null?C:O.key)||null,u(S,A,O,D);case bs:return A=A.get(O.key===null?C:O.key)||null,c(S,A,O,D);case sr:var V=O._init;return R(A,S,C,V(O._payload),D)}if(Ji(O)||$i(O))return A=A.get(C)||null,d(S,A,O,D,null);Fa(S,O)}return null}function P(A,S,C,O){for(var D=null,V=null,T=S,y=S=0,v=null;T!==null&&y<C.length;y++){T.index>y?(v=T,T=null):v=T.sibling;var I=_(A,T,C[y],O);if(I===null){T===null&&(T=v);break}t&&T&&I.alternate===null&&e(A,T),S=i(I,S,y),V===null?D=I:V.sibling=I,V=I,T=v}if(y===C.length)return n(A,T),De&&Qr(A,y),D;if(T===null){for(;y<C.length;y++)T=m(A,C[y],O),T!==null&&(S=i(T,S,y),V===null?D=T:V.sibling=T,V=T);return De&&Qr(A,y),D}for(T=r(A,T);y<C.length;y++)v=R(T,A,y,C[y],O),v!==null&&(t&&v.alternate!==null&&T.delete(v.key===null?y:v.key),S=i(v,S,y),V===null?D=v:V.sibling=v,V=v);return t&&T.forEach(function(E){return e(A,E)}),De&&Qr(A,y),D}function k(A,S,C,O){var D=$i(C);if(typeof D!="function")throw Error(K(150));if(C=D.call(C),C==null)throw Error(K(151));for(var V=D=null,T=S,y=S=0,v=null,I=C.next();T!==null&&!I.done;y++,I=C.next()){T.index>y?(v=T,T=null):v=T.sibling;var E=_(A,T,I.value,O);if(E===null){T===null&&(T=v);break}t&&T&&E.alternate===null&&e(A,T),S=i(E,S,y),V===null?D=E:V.sibling=E,V=E,T=v}if(I.done)return n(A,T),De&&Qr(A,y),D;if(T===null){for(;!I.done;y++,I=C.next())I=m(A,I.value,O),I!==null&&(S=i(I,S,y),V===null?D=I:V.sibling=I,V=I);return De&&Qr(A,y),D}for(T=r(A,T);!I.done;y++,I=C.next())I=R(T,A,y,I.value,O),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?y:I.key),S=i(I,S,y),V===null?D=I:V.sibling=I,V=I);return t&&T.forEach(function(g){return e(A,g)}),De&&Qr(A,y),D}function N(A,S,C,O){if(typeof C=="object"&&C!==null&&C.type===Ds&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Pa:e:{for(var D=C.key,V=S;V!==null;){if(V.key===D){if(D=C.type,D===Ds){if(V.tag===7){n(A,V.sibling),S=s(V,C.props.children),S.return=A,A=S;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===sr&&rg(D)===V.type){n(A,V.sibling),S=s(V,C.props),S.ref=Ki(A,V,C),S.return=A,A=S;break e}n(A,V);break}else e(A,V);V=V.sibling}C.type===Ds?(S=ss(C.props.children,A.mode,O,C.key),S.return=A,A=S):(O=hl(C.type,C.key,C.props,null,A.mode,O),O.ref=Ki(A,S,C),O.return=A,A=O)}return o(A);case bs:e:{for(V=C.key;S!==null;){if(S.key===V)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(A,S.sibling),S=s(S,C.children||[]),S.return=A,A=S;break e}else{n(A,S);break}else e(A,S);S=S.sibling}S=qc(C,A.mode,O),S.return=A,A=S}return o(A);case sr:return V=C._init,N(A,S,V(C._payload),O)}if(Ji(C))return P(A,S,C,O);if($i(C))return k(A,S,C,O);Fa(A,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(A,S.sibling),S=s(S,C),S.return=A,A=S):(n(A,S),S=Hc(C,A.mode,O),S.return=A,A=S),o(A)):n(A,S)}return N}var si=O_(!0),V_=O_(!1),Vl=jr(null),Ml=null,Bs=null,ef=null;function tf(){ef=Bs=Ml=null}function nf(t){var e=Vl.current;be(Vl),t._currentValue=e}function jh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){Ml=t,ef=Bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(ef!==t)if(t={context:t,memoizedValue:e,next:null},Bs===null){if(Ml===null)throw Error(K(308));Bs=t,Ml.dependencies={lanes:0,firstContext:t}}else Bs=Bs.next=t;return e}var Zr=null;function rf(t){Zr===null?Zr=[t]:Zr.push(t)}function M_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Bn(t,r)}function Bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Bn(t,n)}return s=r.interleaved,s===null?(e.next=e,rf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Bn(t,n)}function il(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$d(t,n)}}function sg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ll(t,e,n,r){var s=t.updateQueue;ir=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,d=c=u=null,l=i;do{var _=l.lane,R=l.eventTime;if((r&_)===_){d!==null&&(d=d.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,k=l;switch(_=e,R=n,k.tag){case 1:if(P=k.payload,typeof P=="function"){m=P.call(R,m,_);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=k.payload,_=typeof P=="function"?P.call(R,m,_):P,_==null)break e;m=Le({},m,_);break e;case 2:ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=R,u=m):d=d.next=R,o|=_;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(d===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);cs|=o,t.lanes=o,t.memoizedState=m}}function ig(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var Zo={},gn=jr(Zo),bo=jr(Zo),Do=jr(Zo);function es(t){if(t===Zo)throw Error(K(174));return t}function of(t,e){switch(Pe(Do,e),Pe(bo,t),Pe(gn,Zo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vh(e,t)}be(gn),Pe(gn,e)}function ii(){be(gn),be(bo),be(Do)}function j_(t){es(Do.current);var e=es(gn.current),n=vh(e,t.type);e!==n&&(Pe(bo,t),Pe(gn,n))}function af(t){bo.current===t&&(be(gn),be(bo))}var Ve=jr(0);function jl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jc=[];function lf(){for(var t=0;t<jc.length;t++)jc[t]._workInProgressVersionPrimary=null;jc.length=0}var ol=Kn.ReactCurrentDispatcher,Uc=Kn.ReactCurrentBatchConfig,us=0,Me=null,Xe=null,rt=null,Ul=!1,co=!1,Oo=0,jx=0;function ft(){throw Error(K(321))}function uf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function cf(t,e,n,r,s,i){if(us=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?zx:$x,t=n(r,s),co){i=0;do{if(co=!1,Oo=0,25<=i)throw Error(K(301));i+=1,rt=Xe=null,e.updateQueue=null,ol.current=Hx,t=n(r,s)}while(co)}if(ol.current=Fl,e=Xe!==null&&Xe.next!==null,us=0,rt=Xe=Me=null,Ul=!1,e)throw Error(K(300));return t}function hf(){var t=Oo!==0;return Oo=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Me.memoizedState=rt=t:rt=rt.next=t,rt}function Kt(){if(Xe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=rt===null?Me.memoizedState:rt.next;if(e!==null)rt=e,Xe=t;else{if(t===null)throw Error(K(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},rt===null?Me.memoizedState=rt=t:rt=rt.next=t}return rt}function Vo(t,e){return typeof e=="function"?e(t):e}function Fc(t){var e=Kt(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var d=c.lane;if((us&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Me.lanes|=d,cs|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,sn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,cs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bc(t){var e=Kt(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);sn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function U_(){}function F_(t,e){var n=Me,r=Kt(),s=e(),i=!sn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,df($_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Mo(9,z_.bind(null,n,r,s,e),void 0,null),st===null)throw Error(K(349));us&30||B_(n,e,s)}return s}function B_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function z_(t,e,n,r){e.value=n,e.getSnapshot=r,H_(e)&&q_(t)}function $_(t,e,n){return n(function(){H_(e)&&q_(t)})}function H_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function q_(t){var e=Bn(t,1);e!==null&&nn(e,t,1,-1)}function og(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:t},e.queue=t,t=t.dispatch=Bx.bind(null,Me,t),[e.memoizedState,t]}function Mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function W_(){return Kt().memoizedState}function al(t,e,n,r){var s=dn();Me.flags|=t,s.memoizedState=Mo(1|e,n,void 0,r===void 0?null:r)}function xu(t,e,n,r){var s=Kt();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&uf(r,o.deps)){s.memoizedState=Mo(e,n,i,r);return}}Me.flags|=t,s.memoizedState=Mo(1|e,n,i,r)}function ag(t,e){return al(8390656,8,t,e)}function df(t,e){return xu(2048,8,t,e)}function G_(t,e){return xu(4,2,t,e)}function K_(t,e){return xu(4,4,t,e)}function Q_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Y_(t,e,n){return n=n!=null?n.concat([t]):null,xu(4,4,Q_.bind(null,e,t),n)}function ff(){}function X_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function J_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Z_(t,e,n){return us&21?(sn(n,e)||(n=s_(),Me.lanes|=n,cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function Ux(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Uc.transition;Uc.transition={};try{t(!1),e()}finally{Se=n,Uc.transition=r}}function e0(){return Kt().memoizedState}function Fx(t,e,n){var r=Er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},t0(t))n0(e,n);else if(n=M_(t,e,n,r),n!==null){var s=xt();nn(n,t,r,s),r0(n,e,r)}}function Bx(t,e,n){var r=Er(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(t0(t))n0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,sn(l,o)){var u=e.interleaved;u===null?(s.next=s,rf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=M_(t,e,s,r),n!==null&&(s=xt(),nn(n,t,r,s),r0(n,e,r))}}function t0(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function n0(t,e){co=Ul=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function r0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$d(t,n)}}var Fl={readContext:Gt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},zx={readContext:Gt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:ag,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,al(4194308,4,Q_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return al(4194308,4,t,e)},useInsertionEffect:function(t,e){return al(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Fx.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:og,useDebugValue:ff,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=og(!1),e=t[0];return t=Ux.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=dn();if(De){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),st===null)throw Error(K(349));us&30||B_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ag($_.bind(null,r,i,t),[t]),r.flags|=2048,Mo(9,z_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=st.identifierPrefix;if(De){var n=On,r=Dn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$x={readContext:Gt,useCallback:X_,useContext:Gt,useEffect:df,useImperativeHandle:Y_,useInsertionEffect:G_,useLayoutEffect:K_,useMemo:J_,useReducer:Fc,useRef:W_,useState:function(){return Fc(Vo)},useDebugValue:ff,useDeferredValue:function(t){var e=Kt();return Z_(e,Xe.memoizedState,t)},useTransition:function(){var t=Fc(Vo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:U_,useSyncExternalStore:F_,useId:e0,unstable_isNewReconciler:!1},Hx={readContext:Gt,useCallback:X_,useContext:Gt,useEffect:df,useImperativeHandle:Y_,useInsertionEffect:G_,useLayoutEffect:K_,useMemo:J_,useReducer:Bc,useRef:W_,useState:function(){return Bc(Vo)},useDebugValue:ff,useDeferredValue:function(t){var e=Kt();return Xe===null?e.memoizedState=t:Z_(e,Xe.memoizedState,t)},useTransition:function(){var t=Bc(Vo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:U_,useSyncExternalStore:F_,useId:e0,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iu={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Er(t),i=Ln(r,s);i.payload=e,n!=null&&(i.callback=n),e=_r(t,i,s),e!==null&&(nn(e,t,s,r),il(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Er(t),i=Ln(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=_r(t,i,s),e!==null&&(nn(e,t,s,r),il(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Er(t),s=Ln(n,r);s.tag=2,e!=null&&(s.callback=e),e=_r(t,s,r),e!==null&&(nn(e,t,r,n),il(e,t,r))}};function lg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ro(n,r)||!Ro(s,i):!0}function s0(t,e,n){var r=!1,s=Pr,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(s=Nt(e)?as:_t.current,r=e.contextTypes,i=(r=r!=null)?ni(t,s):Pr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ug(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iu.enqueueReplaceState(e,e.state,null)}function Fh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gt(i):(i=Nt(e)?as:_t.current,s.context=ni(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Uh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Iu.enqueueReplaceState(s,s.state,null),Ll(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,e){try{var n="",r=e;do n+=vT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qx=typeof WeakMap=="function"?WeakMap:Map;function i0(t,e,n){n=Ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zl||(zl=!0,Xh=r),Bh(t,e)},n}function o0(t,e,n){n=Ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Bh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bh(t,e),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iI.bind(null,t,e,n),e.then(t,t))}function hg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ln(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t)}var Wx=Kn.ReactCurrentOwner,Pt=!1;function Tt(t,e,n,r){e.child=t===null?V_(e,null,n,r):si(e,t.child,n,r)}function fg(t,e,n,r,s){n=n.render;var i=e.ref;return Ks(e,s),r=cf(t,e,n,r,i,s),n=hf(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(De&&n&&Xd(e),e.flags|=1,Tt(t,e,r,s),e.child)}function pg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ef(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,a0(t,e,i,r,s)):(t=hl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ro,n(o,r)&&t.ref===e.ref)return zn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function a0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ro(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,zn(t,e,s)}return zh(t,e,n,r,s)}function l0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe($s,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe($s,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe($s,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe($s,Ot),Ot|=r;return Tt(t,e,s,n),e.child}function u0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zh(t,e,n,r,s){var i=Nt(n)?as:_t.current;return i=ni(e,i),Ks(e,s),n=cf(t,e,n,r,i,s),r=hf(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(De&&r&&Xd(e),e.flags|=1,Tt(t,e,n,s),e.child)}function mg(t,e,n,r,s){if(Nt(n)){var i=!0;bl(e)}else i=!1;if(Ks(e,s),e.stateNode===null)ll(t,e),s0(e,n,r),Fh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Gt(c):(c=Nt(n)?as:_t.current,c=ni(e,c));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&ug(e,o,r,c),ir=!1;var _=e.memoizedState;o.state=_,Ll(e,r,o,s),u=e.memoizedState,l!==r||_!==u||kt.current||ir?(typeof d=="function"&&(Uh(e,n,d,r),u=e.memoizedState),(l=ir||lg(e,n,l,r,_,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,L_(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Yt(e.type,l),o.props=c,m=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gt(u):(u=Nt(n)?as:_t.current,u=ni(e,u));var R=n.getDerivedStateFromProps;(d=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||_!==u)&&ug(e,o,r,u),ir=!1,_=e.memoizedState,o.state=_,Ll(e,r,o,s);var P=e.memoizedState;l!==m||_!==P||kt.current||ir?(typeof R=="function"&&(Uh(e,n,R,r),P=e.memoizedState),(c=ir||lg(e,n,c,r,_,P,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return $h(t,e,n,r,i,s)}function $h(t,e,n,r,s,i){u0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&eg(e,n,!1),zn(t,e,i);r=e.stateNode,Wx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=si(e,t.child,null,i),e.child=si(e,null,l,i)):Tt(t,e,l,i),e.memoizedState=r.state,s&&eg(e,n,!0),e.child}function c0(t){var e=t.stateNode;e.pendingContext?Zm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zm(t,e.context,!1),of(t,e.containerInfo)}function gg(t,e,n,r,s){return ri(),Zd(s),e.flags|=256,Tt(t,e,n,r),e.child}var Hh={dehydrated:null,treeContext:null,retryLane:0};function qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function h0(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(Ve,s&1),t===null)return Lh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cu(o,r,0,null),t=ss(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qh(n),e.memoizedState=Hh,t):pf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Gx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Tr(l,i):(i=ss(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Hh,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pf(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ba(t,e,n,r){return r!==null&&Zd(r),si(e,t.child,null,n),t=pf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zc(Error(K(422))),Ba(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cu({mode:"visible",children:r.children},s,0,null),i=ss(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&si(e,t.child,null,o),e.child.memoizedState=qh(o),e.memoizedState=Hh,i);if(!(e.mode&1))return Ba(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(K(419)),r=zc(i,r,void 0),Ba(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pt||l){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bn(t,s),nn(r,t,s,-1))}return wf(),r=zc(Error(K(421))),Ba(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=vr(s.nextSibling),Lt=e,De=!0,Jt=null,t!==null&&(Bt[zt++]=Dn,Bt[zt++]=On,Bt[zt++]=ls,Dn=t.id,On=t.overflow,ls=e),e=pf(e,r.children),e.flags|=4096,e)}function yg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jh(t.return,e,n)}function $c(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function d0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yg(t,n,e);else if(t.tag===19)yg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$c(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$c(e,!0,n,null,i);break;case"together":$c(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Kx(t,e,n){switch(e.tag){case 3:c0(e),ri();break;case 5:j_(e);break;case 1:Nt(e.type)&&bl(e);break;case 4:of(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(Vl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?h0(t,e,n):(Pe(Ve,Ve.current&1),t=zn(t,e,n),t!==null?t.sibling:null);Pe(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return d0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,l0(t,e,n)}return zn(t,e,n)}var f0,Wh,p0,m0;f0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wh=function(){};p0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,es(gn.current);var i=null;switch(n){case"input":s=ph(t,s),r=ph(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=yh(t,s),r=yh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kl)}_h(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Eo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Eo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ne("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};m0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qi(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Qx(t,e,n){var r=e.pendingProps;switch(Jd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Nt(e.type)&&Nl(),pt(e),null;case 3:return r=e.stateNode,ii(),be(kt),be(_t),lf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(ed(Jt),Jt=null))),Wh(t,e),pt(e),null;case 5:af(e);var s=es(Do.current);if(n=e.type,t!==null&&e.stateNode!=null)p0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return pt(e),null}if(t=es(gn.current),Ua(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pn]=e,r[No]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<eo.length;s++)Ne(eo[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Am(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":Rm(r,i),Ne("invalid",r)}_h(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,l,t),s=["children",""+l]):Eo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":ka(r),Cm(r,i,!0);break;case"textarea":ka(r),Pm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=kl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$v(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[No]=r,f0(t,e,!1,!1),e.stateNode=t;e:{switch(o=wh(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<eo.length;s++)Ne(eo[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":Am(t,r),s=ph(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Rm(t,r),s=yh(t,r),Ne("invalid",t);break;default:s=r}_h(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Wv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Hv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&To(t,u):typeof u=="number"&&To(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Eo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ne("scroll",t):u!=null&&Ld(t,i,u,o))}switch(n){case"input":ka(t),Cm(t,r,!1);break;case"textarea":ka(t),Pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=kl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)m0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=es(Do.current),es(gn.current),Ua(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(i=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:ja(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return pt(e),null;case 13:if(be(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Vt!==null&&e.mode&1&&!(e.flags&128))D_(),ri(),e.flags|=98560,i=!1;else if(i=Ua(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[pn]=e}else ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else Jt!==null&&(ed(Jt),Jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?Je===0&&(Je=3):wf())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return ii(),Wh(t,e),t===null&&Po(e.stateNode.containerInfo),pt(e),null;case 10:return nf(e.type._context),pt(e),null;case 17:return Nt(e.type)&&Nl(),pt(e),null;case 19:if(be(Ve),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qi(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jl(t),o!==null){for(e.flags|=128,Qi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>ai&&(e.flags|=128,r=!0,Qi(i,!1),e.lanes=4194304)}else{if(!r)if(t=jl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return pt(e),null}else 2*ze()-i.renderingStartTime>ai&&n!==1073741824&&(e.flags|=128,r=!0,Qi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,n=Ve.current,Pe(Ve,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return _f(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function Yx(t,e){switch(Jd(e),e.tag){case 1:return Nt(e.type)&&Nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ii(),be(kt),be(_t),lf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return af(e),null;case 13:if(be(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ve),null;case 4:return ii(),null;case 10:return nf(e.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var za=!1,yt=!1,Xx=typeof WeakSet=="function"?WeakSet:Set,ee=null;function zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Gh(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var vg=!1;function Jx(t,e){if(kh=Cl,t=w_(),Yd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,m=t,_=null;t:for(;;){for(var R;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(R=m.firstChild)!==null;)_=m,m=R;for(;;){if(m===t)break t;if(_===n&&++c===s&&(l=o),_===i&&++d===r&&(u=o),(R=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nh={focusedElem:t,selectionRange:n},Cl=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var k=P.memoizedProps,N=P.memoizedState,A=e.stateNode,S=A.getSnapshotBeforeUpdate(e.elementType===e.type?k:Yt(e.type,k),N);A.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(O){Fe(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return P=vg,vg=!1,P}function ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Gh(e,n,i)}s=s.next}while(s!==r)}}function Su(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function g0(t){var e=t.alternate;e!==null&&(t.alternate=null,g0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[No],delete e[Oh],delete e[Ox],delete e[Vx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function y0(t){return t.tag===5||t.tag===3||t.tag===4}function _g(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kl));else if(r!==4&&(t=t.child,t!==null))for(Qh(t,e,n),t=t.sibling;t!==null;)Qh(t,e,n),t=t.sibling}function Yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yh(t,e,n),t=t.sibling;t!==null;)Yh(t,e,n),t=t.sibling}var at=null,Xt=!1;function nr(t,e,n){for(n=n.child;n!==null;)v0(t,e,n),n=n.sibling}function v0(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(yu,n)}catch{}switch(n.tag){case 5:yt||zs(n,e);case 6:var r=at,s=Xt;at=null,nr(t,e,n),at=r,Xt=s,at!==null&&(Xt?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(Xt?(t=at,n=n.stateNode,t.nodeType===8?Mc(t.parentNode,n):t.nodeType===1&&Mc(t,n),Ao(t)):Mc(at,n.stateNode));break;case 4:r=at,s=Xt,at=n.stateNode.containerInfo,Xt=!0,nr(t,e,n),at=r,Xt=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Gh(n,e,o),s=s.next}while(s!==r)}nr(t,e,n);break;case 1:if(!yt&&(zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,nr(t,e,n),yt=r):nr(t,e,n);break;default:nr(t,e,n)}}function wg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Xx),e.forEach(function(r){var s=aI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:at=l.stateNode,Xt=!1;break e;case 3:at=l.stateNode.containerInfo,Xt=!0;break e;case 4:at=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(at===null)throw Error(K(160));v0(i,o,s),at=null,Xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Fe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_0(e,t),e=e.sibling}function _0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),hn(t),r&4){try{ho(3,t,t.return),Su(3,t)}catch(k){Fe(t,t.return,k)}try{ho(5,t,t.return)}catch(k){Fe(t,t.return,k)}}break;case 1:Qt(e,t),hn(t),r&512&&n!==null&&zs(n,n.return);break;case 5:if(Qt(e,t),hn(t),r&512&&n!==null&&zs(n,n.return),t.flags&32){var s=t.stateNode;try{To(s,"")}catch(k){Fe(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Bv(s,i),wh(l,o);var c=wh(l,i);for(o=0;o<u.length;o+=2){var d=u[o],m=u[o+1];d==="style"?Wv(s,m):d==="dangerouslySetInnerHTML"?Hv(s,m):d==="children"?To(s,m):Ld(s,d,m,c)}switch(l){case"input":mh(s,i);break;case"textarea":zv(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var R=i.value;R!=null?Hs(s,!!i.multiple,R,!1):_!==!!i.multiple&&(i.defaultValue!=null?Hs(s,!!i.multiple,i.defaultValue,!0):Hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[No]=i}catch(k){Fe(t,t.return,k)}}break;case 6:if(Qt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Fe(t,t.return,k)}}break;case 3:if(Qt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(k){Fe(t,t.return,k)}break;case 4:Qt(e,t),hn(t);break;case 13:Qt(e,t),hn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yf=ze())),r&4&&wg(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(c=yt)||d,Qt(e,t),yt=c):Qt(e,t),hn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(m=ee=d;ee!==null;){switch(_=ee,R=_.child,_.tag){case 0:case 11:case 14:case 15:ho(4,_,_.return);break;case 1:zs(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(k){Fe(r,n,k)}}break;case 5:zs(_,_.return);break;case 22:if(_.memoizedState!==null){Tg(m);continue}}R!==null?(R.return=_,ee=R):Tg(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=qv("display",o))}catch(k){Fe(t,t.return,k)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(k){Fe(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Qt(e,t),hn(t),r&4&&wg(t);break;case 21:break;default:Qt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(y0(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(To(s,""),r.flags&=-33);var i=_g(t);Yh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=_g(t);Qh(t,l,o);break;default:throw Error(K(161))}}catch(u){Fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Zx(t,e,n){ee=t,w0(t)}function w0(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||za;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||yt;l=za;var c=yt;if(za=o,(yt=u)&&!c)for(ee=s;ee!==null;)o=ee,u=o.child,o.tag===22&&o.memoizedState!==null?xg(s):u!==null?(u.return=o,ee=u):xg(s);for(;i!==null;)ee=i,w0(i),i=i.sibling;ee=s,za=l,yt=c}Eg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):Eg(t)}}function Eg(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Su(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ig(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ig(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Ao(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}yt||e.flags&512&&Kh(e)}catch(_){Fe(e,e.return,_)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Tg(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function xg(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Su(4,e)}catch(u){Fe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Fe(e,s,u)}}var i=e.return;try{Kh(e)}catch(u){Fe(e,i,u)}break;case 5:var o=e.return;try{Kh(e)}catch(u){Fe(e,o,u)}}}catch(u){Fe(e,e.return,u)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var eI=Math.ceil,Bl=Kn.ReactCurrentDispatcher,mf=Kn.ReactCurrentOwner,Wt=Kn.ReactCurrentBatchConfig,_e=0,st=null,We=null,ct=0,Ot=0,$s=jr(0),Je=0,Lo=null,cs=0,Au=0,gf=0,fo=null,Ct=null,yf=0,ai=1/0,kn=null,zl=!1,Xh=null,wr=null,$a=!1,dr=null,$l=0,po=0,Jh=null,ul=-1,cl=0;function xt(){return _e&6?ze():ul!==-1?ul:ul=ze()}function Er(t){return t.mode&1?_e&2&&ct!==0?ct&-ct:Lx.transition!==null?(cl===0&&(cl=s_()),cl):(t=Se,t!==0||(t=window.event,t=t===void 0?16:h_(t.type)),t):1}function nn(t,e,n,r){if(50<po)throw po=0,Jh=null,Error(K(185));Yo(t,n,r),(!(_e&2)||t!==st)&&(t===st&&(!(_e&2)&&(Au|=n),Je===4&&ar(t,ct)),bt(t,r),n===1&&_e===0&&!(e.mode&1)&&(ai=ze()+500,Tu&&Ur()))}function bt(t,e){var n=t.callbackNode;LT(t,e);var r=Al(t,t===st?ct:0);if(r===0)n!==null&&bm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bm(n),e===1)t.tag===0?Mx(Ig.bind(null,t)):k_(Ig.bind(null,t)),bx(function(){!(_e&6)&&Ur()}),n=null;else{switch(i_(r)){case 1:n=zd;break;case 4:n=n_;break;case 16:n=Sl;break;case 536870912:n=r_;break;default:n=Sl}n=R0(n,E0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E0(t,e){if(ul=-1,cl=0,_e&6)throw Error(K(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=Al(t,t===st?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hl(t,r);else{e=r;var s=_e;_e|=2;var i=x0();(st!==t||ct!==e)&&(kn=null,ai=ze()+500,rs(t,e));do try{rI();break}catch(l){T0(t,l)}while(!0);tf(),Bl.current=i,_e=s,We!==null?e=0:(st=null,ct=0,e=Je)}if(e!==0){if(e===2&&(s=Sh(t),s!==0&&(r=s,e=Zh(t,s))),e===1)throw n=Lo,rs(t,0),ar(t,r),bt(t,ze()),n;if(e===6)ar(t,r);else{if(s=t.current.alternate,!(r&30)&&!tI(s)&&(e=Hl(t,r),e===2&&(i=Sh(t),i!==0&&(r=i,e=Zh(t,i))),e===1))throw n=Lo,rs(t,0),ar(t,r),bt(t,ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Yr(t,Ct,kn);break;case 3:if(ar(t,r),(r&130023424)===r&&(e=yf+500-ze(),10<e)){if(Al(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dh(Yr.bind(null,t,Ct,kn),e);break}Yr(t,Ct,kn);break;case 4:if(ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eI(r/1960))-r,10<r){t.timeoutHandle=Dh(Yr.bind(null,t,Ct,kn),r);break}Yr(t,Ct,kn);break;case 5:Yr(t,Ct,kn);break;default:throw Error(K(329))}}}return bt(t,ze()),t.callbackNode===n?E0.bind(null,t):null}function Zh(t,e){var n=fo;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=Hl(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&ed(e)),t}function ed(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function tI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ar(t,e){for(e&=~gf,e&=~Au,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function Ig(t){if(_e&6)throw Error(K(327));Qs();var e=Al(t,0);if(!(e&1))return bt(t,ze()),null;var n=Hl(t,e);if(t.tag!==0&&n===2){var r=Sh(t);r!==0&&(e=r,n=Zh(t,r))}if(n===1)throw n=Lo,rs(t,0),ar(t,e),bt(t,ze()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Ct,kn),bt(t,ze()),null}function vf(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(ai=ze()+500,Tu&&Ur())}}function hs(t){dr!==null&&dr.tag===0&&!(_e&6)&&Qs();var e=_e;_e|=1;var n=Wt.transition,r=Se;try{if(Wt.transition=null,Se=1,t)return t()}finally{Se=r,Wt.transition=n,_e=e,!(_e&6)&&Ur()}}function _f(){Ot=$s.current,be($s)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Nx(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Jd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:ii(),be(kt),be(_t),lf();break;case 5:af(r);break;case 4:ii();break;case 13:be(Ve);break;case 19:be(Ve);break;case 10:nf(r.type._context);break;case 22:case 23:_f()}n=n.return}if(st=t,We=t=Tr(t.current,null),ct=Ot=e,Je=0,Lo=null,gf=Au=cs=0,Ct=fo=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zr=null}return t}function T0(t,e){do{var n=We;try{if(tf(),ol.current=Fl,Ul){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ul=!1}if(us=0,rt=Xe=Me=null,co=!1,Oo=0,mf.current=null,n===null||n.return===null){Je=1,Lo=e,We=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ct,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var _=d.alternate;_?(d.updateQueue=_.updateQueue,d.memoizedState=_.memoizedState,d.lanes=_.lanes):(d.updateQueue=null,d.memoizedState=null)}var R=hg(o);if(R!==null){R.flags&=-257,dg(R,o,l,i,e),R.mode&1&&cg(i,c,e),e=R,u=c;var P=e.updateQueue;if(P===null){var k=new Set;k.add(u),e.updateQueue=k}else P.add(u);break e}else{if(!(e&1)){cg(i,c,e),wf();break e}u=Error(K(426))}}else if(De&&l.mode&1){var N=hg(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),dg(N,o,l,i,e),Zd(oi(u,l));break e}}i=u=oi(u,l),Je!==4&&(Je=2),fo===null?fo=[i]:fo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=i0(i,u,e);sg(i,A);break e;case 1:l=u;var S=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(wr===null||!wr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=o0(i,l,e);sg(i,O);break e}}i=i.return}while(i!==null)}S0(n)}catch(D){e=D,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function x0(){var t=Bl.current;return Bl.current=Fl,t===null?Fl:t}function wf(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||!(cs&268435455)&&!(Au&268435455)||ar(st,ct)}function Hl(t,e){var n=_e;_e|=2;var r=x0();(st!==t||ct!==e)&&(kn=null,rs(t,e));do try{nI();break}catch(s){T0(t,s)}while(!0);if(tf(),_e=n,Bl.current=r,We!==null)throw Error(K(261));return st=null,ct=0,Je}function nI(){for(;We!==null;)I0(We)}function rI(){for(;We!==null&&!RT();)I0(We)}function I0(t){var e=C0(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?S0(t):We=e,mf.current=null}function S0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yx(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,We=null;return}}else if(n=Qx(n,e,Ot),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Je===0&&(Je=5)}function Yr(t,e,n){var r=Se,s=Wt.transition;try{Wt.transition=null,Se=1,sI(t,e,n,r)}finally{Wt.transition=s,Se=r}return null}function sI(t,e,n,r){do Qs();while(dr!==null);if(_e&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jT(t,i),t===st&&(We=st=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$a||($a=!0,R0(Sl,function(){return Qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=Se;Se=1;var l=_e;_e|=4,mf.current=null,Jx(t,n),_0(n,t),Ix(Nh),Cl=!!kh,Nh=kh=null,t.current=n,Zx(n),PT(),_e=l,Se=o,Wt.transition=i}else t.current=n;if($a&&($a=!1,dr=t,$l=s),i=t.pendingLanes,i===0&&(wr=null),bT(n.stateNode),bt(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zl)throw zl=!1,t=Xh,Xh=null,t;return $l&1&&t.tag!==0&&Qs(),i=t.pendingLanes,i&1?t===Jh?po++:(po=0,Jh=t):po=0,Ur(),null}function Qs(){if(dr!==null){var t=i_($l),e=Wt.transition,n=Se;try{if(Wt.transition=null,Se=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,$l=0,_e&6)throw Error(K(331));var s=_e;for(_e|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:ho(8,d,i)}var m=d.child;if(m!==null)m.return=d,ee=m;else for(;ee!==null;){d=ee;var _=d.sibling,R=d.return;if(g0(d),d===c){ee=null;break}if(_!==null){_.return=R,ee=_;break}ee=R}}}var P=i.alternate;if(P!==null){var k=P.child;if(k!==null){P.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ho(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,ee=A;break e}ee=i.return}}var S=t.current;for(ee=S;ee!==null;){o=ee;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ee=C;else e:for(o=S;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Su(9,l)}}catch(D){Fe(l,l.return,D)}if(l===o){ee=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,ee=O;break e}ee=l.return}}if(_e=s,Ur(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(yu,t)}catch{}r=!0}return r}finally{Se=n,Wt.transition=e}}return!1}function Sg(t,e,n){e=oi(n,e),e=i0(t,e,1),t=_r(t,e,1),e=xt(),t!==null&&(Yo(t,1,e),bt(t,e))}function Fe(t,e,n){if(t.tag===3)Sg(t,t,n);else for(;e!==null;){if(e.tag===3){Sg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wr===null||!wr.has(r))){t=oi(n,t),t=o0(e,t,1),e=_r(e,t,1),t=xt(),e!==null&&(Yo(e,1,t),bt(e,t));break}}e=e.return}}function iI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ct&n)===n&&(Je===4||Je===3&&(ct&130023424)===ct&&500>ze()-yf?rs(t,0):gf|=n),bt(t,e)}function A0(t,e){e===0&&(t.mode&1?(e=Da,Da<<=1,!(Da&130023424)&&(Da=4194304)):e=1);var n=xt();t=Bn(t,e),t!==null&&(Yo(t,e,n),bt(t,n))}function oI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),A0(t,n)}function aI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),A0(t,n)}var C0;C0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,Kx(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,De&&e.flags&1048576&&N_(e,Ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ll(t,e),t=e.pendingProps;var s=ni(e,_t.current);Ks(e,n),s=cf(null,e,r,t,s,n);var i=hf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(i=!0,bl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sf(e),s.updater=Iu,e.stateNode=s,s._reactInternals=e,Fh(e,r,t,n),e=$h(null,e,r,!0,i,n)):(e.tag=0,De&&i&&Xd(e),Tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ll(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uI(r),t=Yt(r,t),s){case 0:e=zh(null,e,r,t,n);break e;case 1:e=mg(null,e,r,t,n);break e;case 11:e=fg(null,e,r,t,n);break e;case 14:e=pg(null,e,r,Yt(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),zh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),mg(t,e,r,s,n);case 3:e:{if(c0(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,L_(t,e),Ll(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oi(Error(K(423)),e),e=gg(t,e,r,n,s);break e}else if(r!==s){s=oi(Error(K(424)),e),e=gg(t,e,r,n,s);break e}else for(Vt=vr(e.stateNode.containerInfo.firstChild),Lt=e,De=!0,Jt=null,n=V_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),r===s){e=zn(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return j_(e),t===null&&Lh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bh(r,s)?o=null:i!==null&&bh(r,i)&&(e.flags|=32),u0(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Lh(e),null;case 13:return h0(t,e,n);case 4:return of(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=si(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),fg(t,e,r,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(Vl,r._currentValue),r._currentValue=o,i!==null)if(sn(i.value,o)){if(i.children===s.children&&!kt.current){e=zn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ln(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),jh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),jh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ks(e,n),s=Gt(s),r=r(s),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,s=Yt(r,e.pendingProps),s=Yt(r.type,s),pg(t,e,r,s,n);case 15:return a0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),ll(t,e),e.tag=1,Nt(r)?(t=!0,bl(e)):t=!1,Ks(e,n),s0(e,r,s),Fh(e,r,s,n),$h(null,e,r,!0,t,n);case 19:return d0(t,e,n);case 22:return l0(t,e,n)}throw Error(K(156,e.tag))};function R0(t,e){return t_(t,e)}function lI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new lI(t,e,n,r)}function Ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uI(t){if(typeof t=="function")return Ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ud)return 11;if(t===Fd)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ef(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ds:return ss(n.children,s,i,e);case jd:o=8,s|=8;break;case ch:return t=qt(12,n,e,s|2),t.elementType=ch,t.lanes=i,t;case hh:return t=qt(13,n,e,s),t.elementType=hh,t.lanes=i,t;case dh:return t=qt(19,n,e,s),t.elementType=dh,t.lanes=i,t;case jv:return Cu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mv:o=10;break e;case Lv:o=9;break e;case Ud:o=11;break e;case Fd:o=14;break e;case sr:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ss(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=qt(22,t,r,e),t.elementType=jv,t.lanes=n,t.stateNode={isHidden:!1},t}function Hc(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function qc(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sc(0),this.expirationTimes=Sc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tf(t,e,n,r,s,i,o,l,u){return t=new cI(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sf(i),t}function hI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function P0(t){if(!t)return Pr;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Nt(n))return P_(t,n,e)}return e}function k0(t,e,n,r,s,i,o,l,u){return t=Tf(n,r,!0,t,s,i,o,l,u),t.context=P0(null),n=t.current,r=xt(),s=Er(n),i=Ln(r,s),i.callback=e??null,_r(n,i,s),t.current.lanes=s,Yo(t,s,r),bt(t,r),t}function Ru(t,e,n,r){var s=e.current,i=xt(),o=Er(s);return n=P0(n),e.context===null?e.context=n:e.pendingContext=n,e=Ln(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_r(s,e,o),t!==null&&(nn(t,s,o,i),il(t,s,o)),o}function ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ag(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xf(t,e){Ag(t,e),(t=t.alternate)&&Ag(t,e)}function dI(){return null}var N0=typeof reportError=="function"?reportError:function(t){console.error(t)};function If(t){this._internalRoot=t}Pu.prototype.render=If.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Ru(t,e,null,null)};Pu.prototype.unmount=If.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){Ru(null,t,null,null)}),e[Fn]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=l_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<or.length&&e!==0&&e<or[n].priority;n++);or.splice(n,0,t),n===0&&c_(t)}};function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function fI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ql(o);i.call(c)}}var o=k0(e,r,t,0,null,!1,!1,"",Cg);return t._reactRootContainer=o,t[Fn]=o.current,Po(t.nodeType===8?t.parentNode:t),hs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=ql(u);l.call(c)}}var u=Tf(t,0,!1,null,null,!1,!1,"",Cg);return t._reactRootContainer=u,t[Fn]=u.current,Po(t.nodeType===8?t.parentNode:t),hs(function(){Ru(e,u,n,r)}),u}function Nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=ql(o);l.call(u)}}Ru(e,o,t,s)}else o=fI(n,e,t,s,r);return ql(o)}o_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zi(e.pendingLanes);n!==0&&($d(e,n|1),bt(e,ze()),!(_e&6)&&(ai=ze()+500,Ur()))}break;case 13:hs(function(){var r=Bn(t,1);if(r!==null){var s=xt();nn(r,t,1,s)}}),xf(t,1)}};Hd=function(t){if(t.tag===13){var e=Bn(t,134217728);if(e!==null){var n=xt();nn(e,t,134217728,n)}xf(t,134217728)}};a_=function(t){if(t.tag===13){var e=Er(t),n=Bn(t,e);if(n!==null){var r=xt();nn(n,t,e,r)}xf(t,e)}};l_=function(){return Se};u_=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Th=function(t,e,n){switch(e){case"input":if(mh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Eu(r);if(!s)throw Error(K(90));Fv(r),mh(r,s)}}}break;case"textarea":zv(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};Qv=vf;Yv=hs;var pI={usingClientEntryPoint:!1,Events:[Jo,Ls,Eu,Gv,Kv,vf]},Yi={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mI={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zv(t),t===null?null:t.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||dI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{yu=Ha.inject(mI),mn=Ha}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pI;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sf(e))throw Error(K(200));return hI(t,e,null,n)};Ut.createRoot=function(t,e){if(!Sf(t))throw Error(K(299));var n=!1,r="",s=N0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Tf(t,1,!1,null,null,n,!1,r,s),t[Fn]=e.current,Po(t.nodeType===8?t.parentNode:t),new If(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Zv(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return hs(t)};Ut.hydrate=function(t,e,n){if(!ku(e))throw Error(K(200));return Nu(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!Sf(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=N0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=k0(e,null,t,1,n??null,s,!1,i,o),t[Fn]=e.current,Po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pu(e)};Ut.render=function(t,e,n){if(!ku(e))throw Error(K(200));return Nu(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!ku(t))throw Error(K(40));return t._reactRootContainer?(hs(function(){Nu(null,null,t,!1,function(){t._reactRootContainer=null,t[Fn]=null})}),!0):!1};Ut.unstable_batchedUpdates=vf;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Nu(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function b0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b0)}catch(t){console.error(t)}}b0(),bv.exports=Ut;var gI=bv.exports,Rg=gI;lh.createRoot=Rg.createRoot,lh.hydrateRoot=Rg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jo(){return jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jo.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const Pg="popstate";function yI(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return td("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Wl(s)}return _I(e,n,null,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Af(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vI(){return Math.random().toString(36).substr(2,8)}function kg(t,e){return{usr:t.state,key:t.key,idx:e}}function td(t,e,n,r){return n===void 0&&(n=null),jo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vi(e):e,{state:n,key:e&&e.key||r||vI()})}function Wl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _I(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=fr.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(jo({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function m(){l=fr.Pop;let N=d(),A=N==null?null:N-c;c=N,u&&u({action:l,location:k.location,delta:A})}function _(N,A){l=fr.Push;let S=td(k.location,N,A);c=d()+1;let C=kg(S,c),O=k.createHref(S);try{o.pushState(C,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(O)}i&&u&&u({action:l,location:k.location,delta:1})}function R(N,A){l=fr.Replace;let S=td(k.location,N,A);c=d();let C=kg(S,c),O=k.createHref(S);o.replaceState(C,"",O),i&&u&&u({action:l,location:k.location,delta:0})}function P(N){let A=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof N=="string"?N:Wl(N);return S=S.replace(/ $/,"%20"),He(A,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,A)}let k={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Pg,m),u=N,()=>{s.removeEventListener(Pg,m),u=null}},createHref(N){return e(s,N)},createURL:P,encodeLocation(N){let A=P(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:_,replace:R,go(N){return o.go(N)}};return k}var Ng;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ng||(Ng={}));function wI(t,e,n){return n===void 0&&(n="/"),EI(t,e,n)}function EI(t,e,n,r){let s=typeof e=="string"?vi(e):e,i=Cf(s.pathname||"/",n);if(i==null)return null;let o=D0(t);TI(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=OI(i);l=NI(o[u],c)}return l}function D0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(He(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=xr([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),D0(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:PI(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of O0(i.path))s(i,o,u)}),e}function O0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=O0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function TI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xI=/^:[\w-]+$/,II=3,SI=2,AI=1,CI=10,RI=-2,bg=t=>t==="*";function PI(t,e){let n=t.split("/"),r=n.length;return n.some(bg)&&(r+=RI),e&&(r+=SI),n.filter(s=>!bg(s)).reduce((s,i)=>s+(xI.test(i)?II:i===""?AI:CI),r)}function kI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function NI(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=bI({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),_=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:xr([i,m.pathname]),pathnameBase:UI(xr([i,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(i=xr([i,m.pathnameBase]))}return o}function bI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=DI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((c,d,m)=>{let{paramName:_,isOptional:R}=d;if(_==="*"){let k=l[m]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const P=l[m];return R&&!P?c[_]=void 0:c[_]=(P||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function DI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Af(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Af(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const VI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MI=t=>VI.test(t);function LI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?vi(t):t,i;if(n)if(MI(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Af(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Dg(n.substring(1),"/"):i=Dg(n,e)}else i=e;return{pathname:i,search:FI(r),hash:BI(s)}}function Dg(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Wc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rf(t,e){let n=jI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=vi(t):(s=jo({},t),He(!s.pathname||!s.pathname.includes("?"),Wc("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),Wc("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),Wc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),m-=1;s.pathname=_.join("/")}l=m>=0?e[m]:"/"}let u=LI(s,l),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const xr=t=>t.join("/").replace(/\/\/+/g,"/"),UI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const V0=["post","put","patch","delete"];new Set(V0);const $I=["get",...V0];new Set($I);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uo.apply(this,arguments)}const kf=G.createContext(null),HI=G.createContext(null),Fr=G.createContext(null),bu=G.createContext(null),Qn=G.createContext({outlet:null,matches:[],isDataRoute:!1}),M0=G.createContext(null);function qI(t,e){let{relative:n}=e===void 0?{}:e;_i()||He(!1);let{basename:r,navigator:s}=G.useContext(Fr),{hash:i,pathname:o,search:l}=U0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:xr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function _i(){return G.useContext(bu)!=null}function ea(){return _i()||He(!1),G.useContext(bu).location}function L0(t){G.useContext(Fr).static||G.useLayoutEffect(t)}function ta(){let{isDataRoute:t}=G.useContext(Qn);return t?sS():WI()}function WI(){_i()||He(!1);let t=G.useContext(kf),{basename:e,future:n,navigator:r}=G.useContext(Fr),{matches:s}=G.useContext(Qn),{pathname:i}=ea(),o=JSON.stringify(Rf(s,n.v7_relativeSplatPath)),l=G.useRef(!1);return L0(()=>{l.current=!0}),G.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=Pf(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:xr([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,t])}function j0(){let{matches:t}=G.useContext(Qn),e=t[t.length-1];return e?e.params:{}}function U0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=G.useContext(Fr),{matches:s}=G.useContext(Qn),{pathname:i}=ea(),o=JSON.stringify(Rf(s,r.v7_relativeSplatPath));return G.useMemo(()=>Pf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function GI(t,e){return KI(t,e)}function KI(t,e,n,r){_i()||He(!1);let{navigator:s}=G.useContext(Fr),{matches:i}=G.useContext(Qn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=ea(),d;if(e){var m;let N=typeof e=="string"?vi(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||He(!1),d=N}else d=c;let _=d.pathname||"/",R=_;if(u!=="/"){let N=u.replace(/^\//,"").split("/");R="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let P=wI(t,{pathname:R}),k=ZI(P&&P.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:xr([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:xr([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&k?G.createElement(bu.Provider,{value:{location:Uo({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fr.Pop}},k):k}function QI(){let t=rS(),e=zI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:s},n):null,null)}const YI=G.createElement(QI,null);class XI extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(Qn.Provider,{value:this.props.routeContext},G.createElement(M0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JI(t){let{routeContext:e,match:n,children:r}=t,s=G.useContext(kf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(Qn.Provider,{value:e},r)}function ZI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);d>=0||He(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:_,errors:R}=n,P=m.route.loader&&_[m.route.id]===void 0&&(!R||R[m.route.id]===void 0);if(m.route.lazy||P){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,m,_)=>{let R,P=!1,k=null,N=null;n&&(R=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||YI,u&&(c<0&&_===0?(iS("route-fallback"),P=!0,N=null):c===_&&(P=!0,N=m.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,_+1)),S=()=>{let C;return R?C=k:P?C=N:m.route.Component?C=G.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=d,G.createElement(JI,{match:m,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?G.createElement(XI,{location:n.location,revalidation:n.revalidation,component:k,error:R,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}var F0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(F0||{}),B0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(B0||{});function eS(t){let e=G.useContext(kf);return e||He(!1),e}function tS(t){let e=G.useContext(HI);return e||He(!1),e}function nS(t){let e=G.useContext(Qn);return e||He(!1),e}function z0(t){let e=nS(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function rS(){var t;let e=G.useContext(M0),n=tS(),r=z0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sS(){let{router:t}=eS(F0.UseNavigateStable),e=z0(B0.UseNavigateStable),n=G.useRef(!1);return L0(()=>{n.current=!0}),G.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Uo({fromRouteId:e},i)))},[t,e])}const Og={};function iS(t,e,n){Og[t]||(Og[t]=!0)}function oS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function aS(t){let{to:e,replace:n,state:r,relative:s}=t;_i()||He(!1);let{future:i,static:o}=G.useContext(Fr),{matches:l}=G.useContext(Qn),{pathname:u}=ea(),c=ta(),d=Pf(e,Rf(l,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(d);return G.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:s}),[c,m,s,n,r]),null}function Cs(t){He(!1)}function lS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=fr.Pop,navigator:i,static:o=!1,future:l}=t;_i()&&He(!1);let u=e.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:u,navigator:i,static:o,future:Uo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=vi(r));let{pathname:d="/",search:m="",hash:_="",state:R=null,key:P="default"}=r,k=G.useMemo(()=>{let N=Cf(d,u);return N==null?null:{location:{pathname:N,search:m,hash:_,state:R,key:P},navigationType:s}},[u,d,m,_,R,P,s]);return k==null?null:G.createElement(Fr.Provider,{value:c},G.createElement(bu.Provider,{children:n,value:k}))}function uS(t){let{children:e,location:n}=t;return GI(nd(e),n)}new Promise(()=>{});function nd(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(r,s)=>{if(!G.isValidElement(r))return;let i=[...e,s];if(r.type===G.Fragment){n.push.apply(n,nd(r.props.children,i));return}r.type!==Cs&&He(!1),!r.props.index||!r.props.children||He(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=nd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rd.apply(this,arguments)}function cS(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function hS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dS(t,e){return t.button===0&&(!e||e==="_self")&&!hS(t)}const fS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pS="6";try{window.__reactRouterVersion=pS}catch{}const mS="startTransition",Vg=iT[mS];function gS(t){let{basename:e,children:n,future:r,window:s}=t,i=G.useRef();i.current==null&&(i.current=yI({window:s,v5Compat:!0}));let o=i.current,[l,u]=G.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=G.useCallback(m=>{c&&Vg?Vg(()=>u(m)):u(m)},[u,c]);return G.useLayoutEffect(()=>o.listen(d),[o,d]),G.useEffect(()=>oS(r),[r]),G.createElement(lS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const yS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qa=G.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:m}=e,_=cS(e,fS),{basename:R}=G.useContext(Fr),P,k=!1;if(typeof c=="string"&&vS.test(c)&&(P=c,yS))try{let C=new URL(window.location.href),O=c.startsWith("//")?new URL(C.protocol+c):new URL(c),D=Cf(O.pathname,R);O.origin===C.origin&&D!=null?c=D+O.search+O.hash:k=!0}catch{}let N=qI(c,{relative:s}),A=_S(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:m});function S(C){r&&r(C),C.defaultPrevented||A(C)}return G.createElement("a",rd({},_,{href:P||N,onClick:k||i?r:S,ref:n,target:u}))});var Mg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Mg||(Mg={}));var Lg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lg||(Lg={}));function _S(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=ta(),c=ea(),d=U0(t,{relative:o});return G.useCallback(m=>{if(dS(m,n)){m.preventDefault();let _=r!==void 0?r:Wl(c)===Wl(d);u(t,{replace:_,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[c,u,d,r,s,n,t,i,o,l])}const wS=()=>{};var jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ES=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},H0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let _=(l&15)<<2|c>>6,R=c&63;u||(R=64,o||(_=64)),r.push(n[d],n[m],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ES(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||c==null||m==null)throw new TS;const _=i<<2|l>>4;if(r.push(_),c!==64){const R=l<<4&240|c>>2;if(r.push(R),m!==64){const P=c<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xS=function(t){const e=$0(t);return H0.encodeByteArray(e,!0)},Gl=function(t){return xS(t).replace(/\./g,"")},q0=function(t){try{return H0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=()=>IS().__FIREBASE_DEFAULTS__,AS=()=>{if(typeof process>"u"||typeof jg>"u")return;const t=jg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q0(t[1]);return e&&JSON.parse(e)},Du=()=>{try{return wS()||SS()||AS()||CS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W0=t=>{var e,n;return(n=(e=Du())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},G0=t=>{const e=W0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},K0=()=>{var t;return(t=Du())==null?void 0:t.config},Q0=t=>{var e;return(e=Du())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gl(JSON.stringify(n)),Gl(JSON.stringify(o)),""].join(".")}const mo={};function PS(){const t={prod:[],emulator:[]};for(const e of Object.keys(mo))mo[e]?t.emulator.push(e):t.prod.push(e);return t}function kS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ug=!1;function bf(t,e){if(typeof window>"u"||typeof document>"u"||!_s(window.location.host)||mo[t]===e||mo[t]||Ug)return;mo[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",i=PS().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function c(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Ug=!0,o()},_}function d(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function m(){const _=kS(r),R=n("text"),P=document.getElementById(R)||document.createElement("span"),k=n("learnmore"),N=document.getElementById(k)||document.createElement("a"),A=n("preprendIcon"),S=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;l(C),d(N,k);const O=c();u(S,A),C.append(S,P,N,O),document.body.appendChild(C)}i?(P.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function bS(){var e;const t=(e=Du())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MS(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jS(){try{return typeof indexedDB=="object"}catch{return!1}}function US(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="FirebaseError";class Cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FS,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,na.prototype.create)}}class na{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?BS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Cn(s,l,r)}}function BS(t,e){return t.replace(zS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zS=/\{\$([^}]+)}/g;function $S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ds(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Fg(i)&&Fg(o)){if(!ds(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Fg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HS(t,e){const n=new qS(t,e);return n.subscribe.bind(n)}class qS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Gc),s.error===void 0&&(s.error=Gc),s.complete===void 0&&(s.complete=Gc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QS(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KS(t){return t===Xr?void 0:t}function QS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const XS={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},JS=pe.INFO,ZS={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},eA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=JS,this._logHandler=eA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const tA=(t,e)=>e.some(n=>t instanceof n);let Bg,zg;function nA(){return Bg||(Bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rA(){return zg||(zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,sd=new WeakMap,J0=new WeakMap,Kc=new WeakMap,Of=new WeakMap;function sA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ir(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X0.set(n,t)}).catch(()=>{}),Of.set(e,t),e}function iA(t){if(sd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sd.set(t,e)}let id={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oA(t){id=t(id)}function aA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qc(this),e,...n);return J0.set(r,e.sort?e.sort():[e]),Ir(r)}:rA().includes(t)?function(...e){return t.apply(Qc(this),e),Ir(X0.get(this))}:function(...e){return Ir(t.apply(Qc(this),e))}}function lA(t){return typeof t=="function"?aA(t):(t instanceof IDBTransaction&&iA(t),tA(t,nA())?new Proxy(t,id):t)}function Ir(t){if(t instanceof IDBRequest)return sA(t);if(Kc.has(t))return Kc.get(t);const e=lA(t);return e!==t&&(Kc.set(t,e),Of.set(e,t)),e}const Qc=t=>Of.get(t);function uA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ir(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ir(o.result),u.oldVersion,u.newVersion,Ir(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const cA=["get","getKey","getAll","getAllKeys","count"],hA=["put","add","delete","clear"],Yc=new Map;function $g(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yc.get(e))return Yc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cA.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),s&&u.done]))[0]};return Yc.set(e,i),i}oA(t=>({...t,get:(e,n,r)=>$g(e,n)||t.get(e,n,r),has:(e,n)=>!!$g(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const od="@firebase/app",Hg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new Df("@firebase/app"),pA="@firebase/app-compat",mA="@firebase/analytics-compat",gA="@firebase/analytics",yA="@firebase/app-check-compat",vA="@firebase/app-check",_A="@firebase/auth",wA="@firebase/auth-compat",EA="@firebase/database",TA="@firebase/data-connect",xA="@firebase/database-compat",IA="@firebase/functions",SA="@firebase/functions-compat",AA="@firebase/installations",CA="@firebase/installations-compat",RA="@firebase/messaging",PA="@firebase/messaging-compat",kA="@firebase/performance",NA="@firebase/performance-compat",bA="@firebase/remote-config",DA="@firebase/remote-config-compat",OA="@firebase/storage",VA="@firebase/storage-compat",MA="@firebase/firestore",LA="@firebase/ai",jA="@firebase/firestore-compat",UA="firebase",FA="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="[DEFAULT]",BA={[od]:"fire-core",[pA]:"fire-core-compat",[gA]:"fire-analytics",[mA]:"fire-analytics-compat",[vA]:"fire-app-check",[yA]:"fire-app-check-compat",[_A]:"fire-auth",[wA]:"fire-auth-compat",[EA]:"fire-rtdb",[TA]:"fire-data-connect",[xA]:"fire-rtdb-compat",[IA]:"fire-fn",[SA]:"fire-fn-compat",[AA]:"fire-iid",[CA]:"fire-iid-compat",[RA]:"fire-fcm",[PA]:"fire-fcm-compat",[kA]:"fire-perf",[NA]:"fire-perf-compat",[bA]:"fire-rc",[DA]:"fire-rc-compat",[OA]:"fire-gcs",[VA]:"fire-gcs-compat",[MA]:"fire-fst",[jA]:"fire-fst-compat",[LA]:"fire-vertex","fire-js":"fire-js",[UA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,zA=new Map,ld=new Map;function qg(t,e){try{t.container.addComponent(e)}catch(n){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fs(t){const e=t.name;if(ld.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;ld.set(e,t);for(const n of Kl.values())qg(n,t);for(const n of zA.values())qg(n,t);return!0}function Ou(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new na("app","Firebase",$A);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=FA;function Z0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ad,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Sr.create("bad-app-name",{appName:String(s)});if(n||(n=K0()),!n)throw Sr.create("no-options");const i=Kl.get(s);if(i){if(ds(n,i.options)&&ds(r,i.config))return i;throw Sr.create("duplicate-app",{appName:s})}const o=new YS(s);for(const u of ld.values())o.addComponent(u);const l=new HA(n,r,o);return Kl.set(s,l),l}function Vf(t=ad){const e=Kl.get(t);if(!e&&t===ad&&K0())return Z0();if(!e)throw Sr.create("no-app",{appName:t});return e}function yn(t,e,n){let r=BA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(o.join(" "));return}fs(new kr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebase-heartbeat-database",WA=1,Fo="firebase-heartbeat-store";let Xc=null;function ew(){return Xc||(Xc=uA(qA,WA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),Xc}async function GA(t){try{const n=(await ew()).transaction(Fo),r=await n.objectStore(Fo).get(tw(t));return await n.done,r}catch(e){if(e instanceof Cn)$n.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$n.warn(n.message)}}}async function Wg(t,e){try{const r=(await ew()).transaction(Fo,"readwrite");await r.objectStore(Fo).put(e,tw(t)),await r.done}catch(n){if(n instanceof Cn)$n.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$n.warn(r.message)}}}function tw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=1024,QA=30;class YA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>QA){const o=ZA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$n.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gg(),{heartbeatsToSend:r,unsentEntries:s}=XA(this._heartbeatsCache.heartbeats),i=Gl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return $n.warn(n),""}}}function Gg(){return new Date().toISOString().substring(0,10)}function XA(t,e=KA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Kg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Kg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jS()?US().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kg(t){return Gl(JSON.stringify({version:2,heartbeats:t})).length}function ZA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){fs(new kr("platform-logger",e=>new dA(e),"PRIVATE")),fs(new kr("heartbeat",e=>new YA(e),"PRIVATE")),yn(od,Hg,t),yn(od,Hg,"esm2020"),yn("fire-js","")}eC("");function nw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tC=nw,rw=new na("auth","Firebase",nw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Df("@firebase/auth");function nC(t,...e){Ql.logLevel<=pe.WARN&&Ql.warn(`Auth (${ws}): ${t}`,...e)}function dl(t,...e){Ql.logLevel<=pe.ERROR&&Ql.error(`Auth (${ws}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,...e){throw Lf(t,...e)}function rn(t,...e){return Lf(t,...e)}function Mf(t,e,n){const r={...tC(),[e]:n};return new na("auth","Firebase",r).create(e,{appName:t.name})}function is(t){return Mf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&In(t,"argument-error"),Mf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rw.create(t,...e)}function le(t,e,...n){if(!t)throw Lf(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dl(e),new Error(e)}function Hn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function sC(){return Qg()==="http:"||Qg()==="https:"}function Qg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sC()||OS()||"connection"in navigator)?navigator.onLine:!0}function oC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hn(n>e,"Short delay should be less than long delay!"),this.isMobile=NS()||VS()}get(){return iC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e){Hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uC=new sa(3e4,6e4);function Uf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function wi(t,e,n,r,s={}){return iw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ra({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return DS()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&_s(t.emulatorConfig.host)&&(c.credentials="include"),sw.fetch()(await ow(t,t.config.apiHost,n,l),c)})}async function iw(t,e,n){t._canInitEmulator=!1;const r={...aC,...e};try{const s=new hC(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Wa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Wa(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Mf(t,d,c);In(t,d)}}catch(s){if(s instanceof Cn)throw s;In(t,"network-request-failed",{message:String(s)})}}async function cC(t,e,n,r,s={}){const i=await wi(t,e,n,r,s);return"mfaPendingCredential"in i&&In(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function ow(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?jf(t.config,s):`${t.config.apiScheme}://${s}`;return lC.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class hC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rn(this.auth,"network-request-failed")),uC.get())})}}function Wa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(t,e){return wi(t,"POST","/v1/accounts:delete",e)}async function Yl(t,e){return wi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fC(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=Ff(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:go(Jc(s.auth_time)),issuedAtTime:go(Jc(s.iat)),expirationTime:go(Jc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Jc(t){return Number(t)*1e3}function Ff(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dl("JWT malformed, contained fewer than 3 sections"),null;try{const s=q0(n);return s?JSON.parse(s):(dl("Failed to decode base64 JWT payload"),null)}catch(s){return dl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Yg(t){const e=Ff(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cn&&pC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Bo(t,Yl(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?aw(s.providerUserInfo):[],o=yC(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new cd(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function gC(t){const e=it(t);await Xl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yC(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(t,e){const n=await iw(t,{},async()=>{const r=ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await ow(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&_s(t.emulatorConfig.host)&&(u.credentials="include"),sw.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _C(t,e){return wi(t,"POST","/v2/accounts:revokeToken",Uf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Yg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await vC(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ys;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new mC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Bo(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fC(this,e)}reload(){return gC(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Bo(this,dC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:m,emailVerified:_,isAnonymous:R,providerData:P,stsTokenManager:k}=n;le(m&&k,e,"internal-error");const N=Ys.fromJSON(this.name,k);le(typeof m=="string",e,"internal-error"),rr(r,e.name),rr(s,e.name),le(typeof _=="boolean",e,"internal-error"),le(typeof R=="boolean",e,"internal-error"),rr(i,e.name),rr(o,e.name),rr(l,e.name),rr(u,e.name),rr(c,e.name),rr(d,e.name);const A=new Zt({uid:m,auth:e,email:s,emailVerified:_,displayName:r,isAnonymous:R,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:N,createdAt:c,lastLoginAt:d});return P&&Array.isArray(P)&&(A.providerData=P.map(S=>({...S}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ys;s.updateFromServerResponse(n);const i=new Zt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?aw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ys;l.updateFromIdToken(r);const u=new Zt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new cd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;function Mn(t){Hn(t instanceof Function,"Expected a class definition");let e=Xg.get(t);return e?(Hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lw.type="NONE";const Jg=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e,n){return`firebase:${t}:${e}:${n}`}class Xs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fl(this.userKey,s.apiKey,i),this.fullPersistenceKey=fl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Yl(this.auth,{idToken:e}).catch(()=>{});return n?Zt._fromGetAccountInfoResponse(this.auth,n,e):null}return Zt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xs(Mn(Jg),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Mn(Jg);const o=fl(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const d=await c._get(o);if(d){let m;if(typeof d=="string"){const _=await Yl(e,{idToken:d}).catch(()=>{});if(!_)break;m=await Zt._fromGetAccountInfoResponse(e,_,d)}else m=Zt._fromJSON(e,d);c!==i&&(l=m),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Xs(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(mw(e))return"Webos";if(cw(e))return"Safari";if((e.includes("chrome/")||hw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uw(t=wt()){return/firefox\//i.test(t)}function cw(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hw(t=wt()){return/crios\//i.test(t)}function dw(t=wt()){return/iemobile/i.test(t)}function fw(t=wt()){return/android/i.test(t)}function pw(t=wt()){return/blackberry/i.test(t)}function mw(t=wt()){return/webos/i.test(t)}function Bf(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wC(t=wt()){var e;return Bf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function EC(){return MS()&&document.documentMode===10}function gw(t=wt()){return Bf(t)||fw(t)||mw(t)||pw(t)||/windows phone/i.test(t)||dw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e=[]){let n;switch(t){case"Browser":n=Zg(wt());break;case"Worker":n=`${Zg(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ws}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e={}){return wi(t,"GET","/v2/passwordPolicy",Uf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=6;class SC{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ey(this),this.idTokenSubscription=new ey(this),this.beforeStateQueue=new TC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Xs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yl(this,{idToken:e}),r=await Zt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if($t(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(is(this));const n=e?it(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xC(this),n=new SC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new na("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _C(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Xs.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&nC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vu(t){return it(t)}class ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=HS(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CC(t){zf=t}function RC(t){return zf.loadJS(t)}function PC(){return zf.gapiScript}function kC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e){const n=Ou(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ds(i,e??{}))return s;In(s,"already-initialized")}return n.initialize({options:e})}function bC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DC(t,e,n){const r=Vu(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=vw(e),{host:o,port:l}=OC(e),u=l===null?"":`:${l}`,c={url:`${i}//${o}${u}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(ds(c,r.config.emulator)&&ds(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,_s(o)?(Nf(`${i}//${o}${u}`),bf("Auth",!0)):VC()}function vw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OC(t){const e=vw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ty(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ty(o)}}}function ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return cC(t,"POST","/v1/accounts:signInWithIdp",Uf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="http://localhost";class ps extends _w{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ps(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:MC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ra(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends $f{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends ia{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bn.credential(n,r)}catch{return null}}}bn.GOOGLE_SIGN_IN_METHOD="google.com";bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends ia{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends ia{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cr.credential(n,r)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zt._fromIdTokenResponse(e,r,s),o=ny(r);return new li({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ny(r);return new li({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ny(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Cn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Jl(e,n,r,s)}}function ww(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Jl._fromErrorAndOperation(t,i,e,r):i})}async function LC(t,e,n=!1){const r=await Bo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return li._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(is(r));const s="reauthenticate";try{const i=await Bo(t,ww(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=Ff(i.idToken);le(o,r,"internal-error");const{sub:l}=o;return le(t.uid===l,r,"user-mismatch"),li._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&In(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(t,e,n=!1){if($t(t.app))return Promise.reject(is(t));const r="signIn",s=await ww(t,r,e),i=await li._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function FC(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function BC(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function zC(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function $C(t){return it(t).signOut()}const Zl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zl,"1"),this.storage.removeItem(Zl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=1e3,qC=10;class Tw extends Ew{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);EC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tw.type="LOCAL";const WC=Tw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Ew{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xw.type="SESSION";const Iw=xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Mu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async c=>c(n.origin,i)),u=await GC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const c=Hf("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const _=m;if(_.data.eventId===c)switch(_.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(_.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function QC(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function YC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function JC(){return Sw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="firebaseLocalStorageDb",ZC=1,eu="firebaseLocalStorage",Cw="fbase_key";class oa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lu(t,e){return t.transaction([eu],e?"readwrite":"readonly").objectStore(eu)}function eR(){const t=indexedDB.deleteDatabase(Aw);return new oa(t).toPromise()}function hd(){const t=indexedDB.open(Aw,ZC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(eu,{keyPath:Cw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(eu)?e(r):(r.close(),await eR(),e(await hd()))})})}async function ry(t,e,n){const r=Lu(t,!0).put({[Cw]:e,value:n});return new oa(r).toPromise()}async function tR(t,e){const n=Lu(t,!1).get(e),r=await new oa(n).toPromise();return r===void 0?null:r.value}function sy(t,e){const n=Lu(t,!0).delete(e);return new oa(n).toPromise()}const nR=800,rR=3;class Rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mu._getInstance(JC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await YC(),!this.activeServiceWorker)return;this.sender=new KC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hd();return await ry(e,Zl,"1"),await sy(e,Zl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ry(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Lu(s,!1).getAll();return new oa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rw.type="LOCAL";const sR=Rw;new sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e){return e?Mn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends _w{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iR(t){return UC(t.auth,new qf(t),t.bypassAuthState)}function oR(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),jC(n,new qf(t),t.bypassAuthState)}async function aR(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),LC(n,new qf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iR;case"linkViaPopup":case"linkViaRedirect":return aR;case"reauthViaPopup":case"reauthViaRedirect":return oR;default:In(this.auth,"internal-error")}}resolve(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new sa(2e3,1e4);async function uR(t,e,n){if($t(t.app))return Promise.reject(rn(t,"operation-not-supported-in-this-environment"));const r=Vu(t);rC(t,e,$f);const s=Pw(r,n);return new ts(r,"signInViaPopup",e,s).executeNotNull()}class ts extends kw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Hn(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lR.get())};e()}}ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="pendingRedirect",pl=new Map;class hR extends kw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pl.get(this.auth._key());if(!e){try{const r=await dR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pl.set(this.auth._key(),e)}return this.bypassAuthState||pl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dR(t,e){const n=mR(e),r=pR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fR(t,e){pl.set(t._key(),e)}function pR(t){return Mn(t._redirectPersistence)}function mR(t){return fl(cR,t.config.apiKey,t.name)}async function gR(t,e,n=!1){if($t(t.app))return Promise.reject(is(t));const r=Vu(t),s=Pw(r,e),o=await new hR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=10*60*1e3;class vR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_R(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Nw(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(rn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yR&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}}function iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Nw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _R(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e={}){return wi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TR=/^https?/;async function xR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wR(t);for(const n of e)try{if(IR(n))return}catch{}In(t,"unauthorized-domain")}function IR(t){const e=ud(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!TR.test(n))return!1;if(ER.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new sa(3e4,6e4);function oy(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AR(t){return new Promise((e,n)=>{var s,i,o;function r(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),n(rn(t,"network-request-failed"))},timeout:SR.get()})}if((i=(s=vn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=vn().gapi)!=null&&o.load)r();else{const l=kC("iframefcb");return vn()[l]=()=>{gapi.load?r():n(rn(t,"network-request-failed"))},RC(`${PC()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ml=null,e})}let ml=null;function CR(t){return ml=ml||AR(t),ml}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new sa(5e3,15e3),PR="__/auth/iframe",kR="emulator/auth/iframe",NR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DR(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jf(e,kR):`https://${t.config.authDomain}/${PR}`,r={apiKey:e.apiKey,appName:t.name,v:ws},s=bR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ra(r).slice(1)}`}async function OR(t){const e=await CR(t),n=vn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:DR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=rn(t,"network-request-failed"),l=vn().setTimeout(()=>{i(o)},RR.get());function u(){vn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MR=500,LR=600,jR="_blank",UR="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FR(t,e,n,r=MR,s=LR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...VR,width:r.toString(),height:s.toString(),top:i,left:o},c=wt().toLowerCase();n&&(l=hw(c)?jR:n),uw(c)&&(e=e||UR,u.scrollbars="yes");const d=Object.entries(u).reduce((_,[R,P])=>`${_}${R}=${P},`,"");if(wC(c)&&l!=="_self")return BR(e||"",l),new ay(null);const m=window.open(e||"",l,d);le(m,t,"popup-blocked");try{m.focus()}catch{}return new ay(m)}function BR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="__/auth/handler",$R="emulator/auth/handler",HR=encodeURIComponent("fac");async function ly(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ws,eventId:s};if(e instanceof $f){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$S(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof ia){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${HR}=${encodeURIComponent(u)}`:"";return`${qR(t)}?${ra(l).slice(1)}${c}`}function qR({config:t}){return t.emulator?jf(t,$R):`https://${t.authDomain}/${zR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="webStorageSupport";class WR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Iw,this._completeRedirectFn=gR,this._overrideRedirectResult=fR}async _openPopup(e,n,r,s){var o;Hn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await ly(e,n,r,ud(),s);return FR(e,i,Hf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ly(e,n,r,ud(),s);return QC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Hn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OR(e),r=new vR(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zc,{type:Zc},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Zc];i!==void 0&&n(!!i),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gw()||cw()||Bf()}}const GR=WR;var uy="@firebase/auth",cy="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YR(t){fs(new kr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(t)},c=new AC(r,s,i,u);return bC(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fs(new kr("auth-internal",e=>{const n=Vu(e.getProvider("auth").getImmediate());return(r=>new KR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(uy,cy,QR(t)),yn(uy,cy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=5*60,JR=Q0("authIdTokenMaxAge")||XR;let hy=null;const ZR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JR)return;const s=n==null?void 0:n.token;hy!==s&&(hy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function e2(t=Vf()){const e=Ou(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NC(t,{popupRedirectResolver:GR,persistence:[sR,WC,Iw]}),r=Q0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ZR(i.toString());BC(n,o,()=>o(n.currentUser)),FC(n,l=>o(l))}}const s=W0("auth");return s&&DC(n,`http://${s}`),n}function t2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}CC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",t2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YR("Browser");var n2="firebase",r2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn(n2,r2,"app");var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,bw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function v(){}v.prototype=y.prototype,T.F=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.D=function(I,E,g){for(var w=Array(arguments.length-2),L=2;L<arguments.length;L++)w[L-2]=arguments[L];return y.prototype[E].apply(I,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,v){v||(v=0);const I=Array(16);if(typeof y=="string")for(var E=0;E<16;++E)I[E]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(E=0;E<16;++E)I[E]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],E=T.g[2];let g=T.g[3],w;w=y+(g^v&(E^g))+I[0]+3614090360&4294967295,y=v+(w<<7&4294967295|w>>>25),w=g+(E^y&(v^E))+I[1]+3905402710&4294967295,g=y+(w<<12&4294967295|w>>>20),w=E+(v^g&(y^v))+I[2]+606105819&4294967295,E=g+(w<<17&4294967295|w>>>15),w=v+(y^E&(g^y))+I[3]+3250441966&4294967295,v=E+(w<<22&4294967295|w>>>10),w=y+(g^v&(E^g))+I[4]+4118548399&4294967295,y=v+(w<<7&4294967295|w>>>25),w=g+(E^y&(v^E))+I[5]+1200080426&4294967295,g=y+(w<<12&4294967295|w>>>20),w=E+(v^g&(y^v))+I[6]+2821735955&4294967295,E=g+(w<<17&4294967295|w>>>15),w=v+(y^E&(g^y))+I[7]+4249261313&4294967295,v=E+(w<<22&4294967295|w>>>10),w=y+(g^v&(E^g))+I[8]+1770035416&4294967295,y=v+(w<<7&4294967295|w>>>25),w=g+(E^y&(v^E))+I[9]+2336552879&4294967295,g=y+(w<<12&4294967295|w>>>20),w=E+(v^g&(y^v))+I[10]+4294925233&4294967295,E=g+(w<<17&4294967295|w>>>15),w=v+(y^E&(g^y))+I[11]+2304563134&4294967295,v=E+(w<<22&4294967295|w>>>10),w=y+(g^v&(E^g))+I[12]+1804603682&4294967295,y=v+(w<<7&4294967295|w>>>25),w=g+(E^y&(v^E))+I[13]+4254626195&4294967295,g=y+(w<<12&4294967295|w>>>20),w=E+(v^g&(y^v))+I[14]+2792965006&4294967295,E=g+(w<<17&4294967295|w>>>15),w=v+(y^E&(g^y))+I[15]+1236535329&4294967295,v=E+(w<<22&4294967295|w>>>10),w=y+(E^g&(v^E))+I[1]+4129170786&4294967295,y=v+(w<<5&4294967295|w>>>27),w=g+(v^E&(y^v))+I[6]+3225465664&4294967295,g=y+(w<<9&4294967295|w>>>23),w=E+(y^v&(g^y))+I[11]+643717713&4294967295,E=g+(w<<14&4294967295|w>>>18),w=v+(g^y&(E^g))+I[0]+3921069994&4294967295,v=E+(w<<20&4294967295|w>>>12),w=y+(E^g&(v^E))+I[5]+3593408605&4294967295,y=v+(w<<5&4294967295|w>>>27),w=g+(v^E&(y^v))+I[10]+38016083&4294967295,g=y+(w<<9&4294967295|w>>>23),w=E+(y^v&(g^y))+I[15]+3634488961&4294967295,E=g+(w<<14&4294967295|w>>>18),w=v+(g^y&(E^g))+I[4]+3889429448&4294967295,v=E+(w<<20&4294967295|w>>>12),w=y+(E^g&(v^E))+I[9]+568446438&4294967295,y=v+(w<<5&4294967295|w>>>27),w=g+(v^E&(y^v))+I[14]+3275163606&4294967295,g=y+(w<<9&4294967295|w>>>23),w=E+(y^v&(g^y))+I[3]+4107603335&4294967295,E=g+(w<<14&4294967295|w>>>18),w=v+(g^y&(E^g))+I[8]+1163531501&4294967295,v=E+(w<<20&4294967295|w>>>12),w=y+(E^g&(v^E))+I[13]+2850285829&4294967295,y=v+(w<<5&4294967295|w>>>27),w=g+(v^E&(y^v))+I[2]+4243563512&4294967295,g=y+(w<<9&4294967295|w>>>23),w=E+(y^v&(g^y))+I[7]+1735328473&4294967295,E=g+(w<<14&4294967295|w>>>18),w=v+(g^y&(E^g))+I[12]+2368359562&4294967295,v=E+(w<<20&4294967295|w>>>12),w=y+(v^E^g)+I[5]+4294588738&4294967295,y=v+(w<<4&4294967295|w>>>28),w=g+(y^v^E)+I[8]+2272392833&4294967295,g=y+(w<<11&4294967295|w>>>21),w=E+(g^y^v)+I[11]+1839030562&4294967295,E=g+(w<<16&4294967295|w>>>16),w=v+(E^g^y)+I[14]+4259657740&4294967295,v=E+(w<<23&4294967295|w>>>9),w=y+(v^E^g)+I[1]+2763975236&4294967295,y=v+(w<<4&4294967295|w>>>28),w=g+(y^v^E)+I[4]+1272893353&4294967295,g=y+(w<<11&4294967295|w>>>21),w=E+(g^y^v)+I[7]+4139469664&4294967295,E=g+(w<<16&4294967295|w>>>16),w=v+(E^g^y)+I[10]+3200236656&4294967295,v=E+(w<<23&4294967295|w>>>9),w=y+(v^E^g)+I[13]+681279174&4294967295,y=v+(w<<4&4294967295|w>>>28),w=g+(y^v^E)+I[0]+3936430074&4294967295,g=y+(w<<11&4294967295|w>>>21),w=E+(g^y^v)+I[3]+3572445317&4294967295,E=g+(w<<16&4294967295|w>>>16),w=v+(E^g^y)+I[6]+76029189&4294967295,v=E+(w<<23&4294967295|w>>>9),w=y+(v^E^g)+I[9]+3654602809&4294967295,y=v+(w<<4&4294967295|w>>>28),w=g+(y^v^E)+I[12]+3873151461&4294967295,g=y+(w<<11&4294967295|w>>>21),w=E+(g^y^v)+I[15]+530742520&4294967295,E=g+(w<<16&4294967295|w>>>16),w=v+(E^g^y)+I[2]+3299628645&4294967295,v=E+(w<<23&4294967295|w>>>9),w=y+(E^(v|~g))+I[0]+4096336452&4294967295,y=v+(w<<6&4294967295|w>>>26),w=g+(v^(y|~E))+I[7]+1126891415&4294967295,g=y+(w<<10&4294967295|w>>>22),w=E+(y^(g|~v))+I[14]+2878612391&4294967295,E=g+(w<<15&4294967295|w>>>17),w=v+(g^(E|~y))+I[5]+4237533241&4294967295,v=E+(w<<21&4294967295|w>>>11),w=y+(E^(v|~g))+I[12]+1700485571&4294967295,y=v+(w<<6&4294967295|w>>>26),w=g+(v^(y|~E))+I[3]+2399980690&4294967295,g=y+(w<<10&4294967295|w>>>22),w=E+(y^(g|~v))+I[10]+4293915773&4294967295,E=g+(w<<15&4294967295|w>>>17),w=v+(g^(E|~y))+I[1]+2240044497&4294967295,v=E+(w<<21&4294967295|w>>>11),w=y+(E^(v|~g))+I[8]+1873313359&4294967295,y=v+(w<<6&4294967295|w>>>26),w=g+(v^(y|~E))+I[15]+4264355552&4294967295,g=y+(w<<10&4294967295|w>>>22),w=E+(y^(g|~v))+I[6]+2734768916&4294967295,E=g+(w<<15&4294967295|w>>>17),w=v+(g^(E|~y))+I[13]+1309151649&4294967295,v=E+(w<<21&4294967295|w>>>11),w=y+(E^(v|~g))+I[4]+4149444226&4294967295,y=v+(w<<6&4294967295|w>>>26),w=g+(v^(y|~E))+I[11]+3174756917&4294967295,g=y+(w<<10&4294967295|w>>>22),w=E+(y^(g|~v))+I[2]+718787259&4294967295,E=g+(w<<15&4294967295|w>>>17),w=v+(g^(E|~y))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(E+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+E&4294967295,T.g[3]=T.g[3]+g&4294967295}r.prototype.v=function(T,y){y===void 0&&(y=T.length);const v=y-this.blockSize,I=this.C;let E=this.h,g=0;for(;g<y;){if(E==0)for(;g<=v;)s(this,T,g),g+=this.blockSize;if(typeof T=="string"){for(;g<y;)if(I[E++]=T.charCodeAt(g++),E==this.blockSize){s(this,I),E=0;break}}else for(;g<y;)if(I[E++]=T[g++],E==this.blockSize){s(this,I),E=0;break}}this.h=E,this.o+=y},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;y=this.o*8;for(var v=T.length-8;v<T.length;++v)T[v]=y&255,y/=256;for(this.v(T),T=Array(16),y=0,v=0;v<4;++v)for(let I=0;I<32;I+=8)T[y++]=this.g[v]>>>I&255;return T};function i(T,y){var v=l;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function o(T,y){this.h=y;const v=[];let I=!0;for(let E=T.length-1;E>=0;E--){const g=T[E]|0;I&&g==y||(v[E]=g,I=!1)}this.g=v}var l={};function u(T){return-128<=T&&T<128?i(T,function(y){return new o([y|0],y<0?-1:0)}):new o([T|0],T<0?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return N(c(-T));const y=[];let v=1;for(let I=0;T>=v;I++)y[I]=T/v|0,v*=4294967296;return new o(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return N(d(T.substring(1),y));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=c(Math.pow(y,8));let I=m;for(let g=0;g<T.length;g+=8){var E=Math.min(8,T.length-g);const w=parseInt(T.substring(g,g+E),y);E<8?(E=c(Math.pow(y,E)),I=I.j(E).add(c(w))):(I=I.j(v),I=I.add(c(w)))}return I}var m=u(0),_=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-N(this).m();let T=0,y=1;for(let v=0;v<this.g.length;v++){const I=this.i(v);T+=(I>=0?I:4294967296+I)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(k(this))return"-"+N(this).toString(T);const y=c(Math.pow(T,6));var v=this;let I="";for(;;){const E=O(v,y).g;v=A(v,E.j(y));let g=((v.g.length>0?v.g[0]:v.h)>>>0).toString(T);if(v=E,P(v))return g+I;for(;g.length<6;)g="0"+g;I=g+I}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(let y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=A(this,T),k(T)?-1:P(T)?0:1};function N(T){const y=T.g.length,v=[];for(let I=0;I<y;I++)v[I]=~T.g[I];return new o(v,~T.h).add(_)}t.abs=function(){return k(this)?N(this):this},t.add=function(T){const y=Math.max(this.g.length,T.g.length),v=[];let I=0;for(let E=0;E<=y;E++){let g=I+(this.i(E)&65535)+(T.i(E)&65535),w=(g>>>16)+(this.i(E)>>>16)+(T.i(E)>>>16);I=w>>>16,g&=65535,w&=65535,v[E]=w<<16|g}return new o(v,v[v.length-1]&-2147483648?-1:0)};function A(T,y){return T.add(N(y))}t.j=function(T){if(P(this)||P(T))return m;if(k(this))return k(T)?N(this).j(N(T)):N(N(this).j(T));if(k(T))return N(this.j(N(T)));if(this.l(R)<0&&T.l(R)<0)return c(this.m()*T.m());const y=this.g.length+T.g.length,v=[];for(var I=0;I<2*y;I++)v[I]=0;for(I=0;I<this.g.length;I++)for(let E=0;E<T.g.length;E++){const g=this.i(I)>>>16,w=this.i(I)&65535,L=T.i(E)>>>16,$=T.i(E)&65535;v[2*I+2*E]+=w*$,S(v,2*I+2*E),v[2*I+2*E+1]+=g*$,S(v,2*I+2*E+1),v[2*I+2*E+1]+=w*L,S(v,2*I+2*E+1),v[2*I+2*E+2]+=g*L,S(v,2*I+2*E+2)}for(T=0;T<y;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=y;T<2*y;T++)v[T]=0;return new o(v,0)};function S(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function C(T,y){this.g=T,this.h=y}function O(T,y){if(P(y))throw Error("division by zero");if(P(T))return new C(m,m);if(k(T))return y=O(N(T),y),new C(N(y.g),N(y.h));if(k(y))return y=O(T,N(y)),new C(N(y.g),y.h);if(T.g.length>30){if(k(T)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var v=_,I=y;I.l(T)<=0;)v=D(v),I=D(I);var E=V(v,1),g=V(I,1);for(I=V(I,2),v=V(v,2);!P(I);){var w=g.add(I);w.l(T)<=0&&(E=E.add(v),g=w),I=V(I,1),v=V(v,1)}return y=A(T,E.j(y)),new C(E,y)}for(E=m;T.l(y)>=0;){for(v=Math.max(1,Math.floor(T.m()/y.m())),I=Math.ceil(Math.log(v)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),g=c(v),w=g.j(y);k(w)||w.l(T)>0;)v-=I,g=c(v),w=g.j(y);P(g)&&(g=_),E=E.add(g),T=A(T,w)}return new C(E,T)}t.B=function(T){return O(this,T).h},t.and=function(T){const y=Math.max(this.g.length,T.g.length),v=[];for(let I=0;I<y;I++)v[I]=this.i(I)&T.i(I);return new o(v,this.h&T.h)},t.or=function(T){const y=Math.max(this.g.length,T.g.length),v=[];for(let I=0;I<y;I++)v[I]=this.i(I)|T.i(I);return new o(v,this.h|T.h)},t.xor=function(T){const y=Math.max(this.g.length,T.g.length),v=[];for(let I=0;I<y;I++)v[I]=this.i(I)^T.i(I);return new o(v,this.h^T.h)};function D(T){const y=T.g.length+1,v=[];for(let I=0;I<y;I++)v[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(v,T.h)}function V(T,y){const v=y>>5;y%=32;const I=T.g.length-v,E=[];for(let g=0;g<I;g++)E[g]=y>0?T.i(g+v)>>>y|T.i(g+v+1)<<32-y:T.i(g+v);return new o(E,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ar=o}).apply(typeof dy<"u"?dy:typeof self<"u"?self:typeof window<"u"?window:{});var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dw,to,Ow,gl,dd,Vw,Mw,Lw;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ga=="object"&&Ga];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var x=0;x<a.length-1;x++){var b=a[x];if(!(b in p))break e;p=p[b]}a=a[a.length-1],x=p[a],h=h(x),h!=x&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var p=[],x;for(x in h)Object.prototype.hasOwnProperty.call(h,x)&&p.push([x,h[x]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,p){return a.call.apply(a.bind,arguments)}function c(a,h,p){return c=u,c.apply(null,arguments)}function d(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),a.apply(this,x)}}function m(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(x,b,M){for(var Q=Array(arguments.length-2),de=2;de<arguments.length;de++)Q[de-2]=arguments[de];return h.prototype[b].apply(x,Q)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function R(a){const h=a.length;if(h>0){const p=Array(h);for(let x=0;x<h;x++)p[x]=a[x];return p}return[]}function P(a,h){for(let x=1;x<arguments.length;x++){const b=arguments[x];var p=typeof b;if(p=p!="object"?p:b?Array.isArray(b)?"array":p:"null",p=="array"||p=="object"&&typeof b.length=="number"){p=a.length||0;const M=b.length||0;a.length=p+M;for(let Q=0;Q<M;Q++)a[p+Q]=b[Q]}else a.push(b)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function N(a){o.setTimeout(()=>{throw a},0)}function A(){var a=T;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class S{constructor(){this.h=this.g=null}add(h,p){const x=C.get();x.set(h,p),this.h?this.h.next=x:this.g=x,this.h=x}}var C=new k(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let D,V=!1,T=new S,y=()=>{const a=Promise.resolve(void 0);D=()=>{a.then(v)}};function v(){for(var a;a=A();){try{a.h.call(a.g)}catch(p){N(p)}var h=C;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}V=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var g=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function L(a,h){E.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}m(L,E),L.prototype.init=function(a,h){const p=this.type=a.type,x=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),ie=0;function he(a,h,p,x,b){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!x,this.ha=b,this.key=++ie,this.da=this.fa=!1}function W(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Z(a,h,p){for(const x in a)h.call(p,a[x],x,a)}function te(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function ye(a){const h={};for(const p in a)h[p]=a[p];return h}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(a,h){let p,x;for(let b=1;b<arguments.length;b++){x=arguments[b];for(p in x)a[p]=x[p];for(let M=0;M<we.length;M++)p=we[M],Object.prototype.hasOwnProperty.call(x,p)&&(a[p]=x[p])}}function Qe(a){this.src=a,this.g={},this.h=0}Qe.prototype.add=function(a,h,p,x,b){const M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);const Q=et(a,h,x,b);return Q>-1?(h=a[Q],p||(h.fa=!1)):(h=new he(h,this.src,M,!!x,b),h.fa=p,a.push(h)),h};function Pn(a,h){const p=h.type;if(p in a.g){var x=a.g[p],b=Array.prototype.indexOf.call(x,h,void 0),M;(M=b>=0)&&Array.prototype.splice.call(x,b,1),M&&(W(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function et(a,h,p,x){for(let b=0;b<a.length;++b){const M=a[b];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==x)return b}return-1}var an="closure_lm_"+(Math.random()*1e6|0),F={};function z(a,h,p,x,b){if(Array.isArray(h)){for(let M=0;M<h.length;M++)z(a,h[M],p,x,b);return null}return p=ae(p),a&&a[$]?a.J(h,p,l(x)?!!x.capture:!1,b):j(a,h,p,!1,x,b)}function j(a,h,p,x,b,M){if(!h)throw Error("Invalid event type");const Q=l(b)?!!b.capture:!!b;let de=xe(a);if(de||(a[an]=de=new Qe(a)),p=de.add(h,p,x,Q,M),p.proxy)return p;if(x=H(),p.proxy=x,x.src=a,x.listener=p,a.addEventListener)g||(b=Q),b===void 0&&(b=!1),a.addEventListener(h.toString(),x,b);else if(a.attachEvent)a.attachEvent(se(h.toString()),x);else if(a.addListener&&a.removeListener)a.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function H(){function a(p){return h.call(a.src,a.listener,p)}const h=re;return a}function q(a,h,p,x,b){if(Array.isArray(h))for(var M=0;M<h.length;M++)q(a,h[M],p,x,b);else x=l(x)?!!x.capture:!!x,p=ae(p),a&&a[$]?(a=a.i,M=String(h).toString(),M in a.g&&(h=a.g[M],p=et(h,p,x,b),p>-1&&(W(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[M],a.h--)))):a&&(a=xe(a))&&(h=a.g[h.toString()],a=-1,h&&(a=et(h,p,x,b)),(p=a>-1?h[a]:null)&&Y(p))}function Y(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[$])Pn(h.i,a);else{var p=a.type,x=a.proxy;h.removeEventListener?h.removeEventListener(p,x,a.capture):h.detachEvent?h.detachEvent(se(p),x):h.addListener&&h.removeListener&&h.removeListener(x),(p=xe(h))?(Pn(p,a),p.h==0&&(p.src=null,h[an]=null)):W(a)}}}function se(a){return a in F?F[a]:F[a]="on"+a}function re(a,h){if(a.da)a=!0;else{h=new L(h,this);const p=a.listener,x=a.ha||a.src;a.fa&&Y(a),a=p.call(x,h)}return a}function xe(a){return a=a[an],a instanceof Qe?a:null}var Oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function ae(a){return typeof a=="function"?a:(a[Oe]||(a[Oe]=function(h){return a.handleEvent(h)}),a[Oe])}function Ie(){I.call(this),this.i=new Qe(this),this.M=this,this.G=null}m(Ie,I),Ie.prototype[$]=!0,Ie.prototype.removeEventListener=function(a,h,p,x){q(this,a,h,p,x)};function Ae(a,h){var p,x=a.G;if(x)for(p=[];x;x=x.G)p.push(x);if(a=a.M,x=h.type||h,typeof h=="string")h=new E(h,a);else if(h instanceof E)h.target=h.target||a;else{var b=h;h=new E(x,a),ot(h,b)}b=!0;let M,Q;if(p)for(Q=p.length-1;Q>=0;Q--)M=h.g=p[Q],b=$r(M,x,!0,h)&&b;if(M=h.g=a,b=$r(M,x,!0,h)&&b,b=$r(M,x,!1,h)&&b,p)for(Q=0;Q<p.length;Q++)M=h.g=p[Q],b=$r(M,x,!1,h)&&b}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let x=0;x<p.length;x++)W(p[x]);delete a.g[h],a.h--}}this.G=null},Ie.prototype.J=function(a,h,p,x){return this.i.add(String(a),h,!1,p,x)},Ie.prototype.K=function(a,h,p,x){return this.i.add(String(a),h,!0,p,x)};function $r(a,h,p,x){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let b=!0;for(let M=0;M<h.length;++M){const Q=h[M];if(Q&&!Q.da&&Q.capture==p){const de=Q.listener,Ye=Q.ha||Q.src;Q.fa&&Pn(a.i,Q),b=de.call(Ye,x)!==!1&&b}}return b&&!x.defaultPrevented}function ga(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=c(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Ai(a){a.g=ga(()=>{a.g=null,a.i&&(a.i=!1,Ai(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Ci extends I{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(a){I.call(this),this.h=a,this.g={}}m(ln,I);var Cp=[];function Rp(a){Z(a.g,function(h,p){this.g.hasOwnProperty(p)&&Y(h)},a),a.g={}}ln.prototype.N=function(){ln.Z.N.call(this),Rp(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rc=o.JSON.stringify,_E=o.JSON.parse,wE=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Pp(){}function kp(){}var Ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sc(){E.call(this,"d")}m(sc,E);function ic(){E.call(this,"c")}m(ic,E);var Hr={},Np=null;function ya(){return Np=Np||new Ie}Hr.Ia="serverreachability";function bp(a){E.call(this,Hr.Ia,a)}m(bp,E);function Pi(a){const h=ya();Ae(h,new bp(h))}Hr.STAT_EVENT="statevent";function Dp(a,h){E.call(this,Hr.STAT_EVENT,a),this.stat=h}m(Dp,E);function Et(a){const h=ya();Ae(h,new Dp(h,a))}Hr.Ja="timingevent";function Op(a,h){E.call(this,Hr.Ja,a),this.size=h}m(Op,E);function ki(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function Ni(){this.g=!0}Ni.prototype.ua=function(){this.g=!1};function EE(a,h,p,x,b,M){a.info(function(){if(a.g)if(M){var Q="",de=M.split("&");for(let Ce=0;Ce<de.length;Ce++){var Ye=de[Ce].split("=");if(Ye.length>1){const tt=Ye[0];Ye=Ye[1];const cn=tt.split("_");Q=cn.length>=2&&cn[1]=="type"?Q+(tt+"="+Ye+"&"):Q+(tt+"=redacted&")}}}else Q=null;else Q=M;return"XMLHTTP REQ ("+x+") [attempt "+b+"]: "+h+`
`+p+`
`+Q})}function TE(a,h,p,x,b,M,Q){a.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+b+"]: "+h+`
`+p+`
`+M+" "+Q})}function xs(a,h,p,x){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+IE(a,p)+(x?" "+x:"")})}function xE(a,h){a.info(function(){return"TIMEOUT: "+h})}Ni.prototype.info=function(){};function IE(a,h){if(!a.g)return h;if(!h)return null;try{const M=JSON.parse(h);if(M){for(a=0;a<M.length;a++)if(Array.isArray(M[a])){var p=M[a];if(!(p.length<2)){var x=p[1];if(Array.isArray(x)&&!(x.length<1)){var b=x[0];if(b!="noop"&&b!="stop"&&b!="close")for(let Q=1;Q<x.length;Q++)x[Q]=""}}}}return rc(M)}catch{return h}}var va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mp;function oc(){}m(oc,Pp),oc.prototype.g=function(){return new XMLHttpRequest},Mp=new oc;function bi(a){return encodeURIComponent(String(a))}function SE(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function Yn(a,h,p,x){this.j=a,this.i=h,this.l=p,this.S=x||1,this.V=new ln(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Lp}function Lp(){this.i=null,this.g="",this.h=!1}var jp={},ac={};function lc(a,h,p){a.M=1,a.A=wa(un(h)),a.u=p,a.R=!0,Up(a,null)}function Up(a,h){a.F=Date.now(),_a(a),a.B=un(a.A);var p=a.B,x=a.S;Array.isArray(x)||(x=[String(x)]),Jp(p.i,"t",x),a.C=0,p=a.j.L,a.h=new Lp,a.g=gm(a.j,p?h:null,!a.u),a.P>0&&(a.O=new Ci(c(a.Y,a,a.g),a.P)),h=a.V,p=a.g,x=a.ba;var b="readystatechange";Array.isArray(b)||(b&&(Cp[0]=b.toString()),b=Cp);for(let M=0;M<b.length;M++){const Q=z(p,b[M],x||h.handleEvent,!1,h.h||h);if(!Q)break;h.g[Q.key]=Q}h=a.J?ye(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Pi(),EE(a.i,a.v,a.B,a.l,a.S,a.u)}Yn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Zn(a)==3?h.j():this.Y(a)},Yn.prototype.Y=function(a){try{if(a==this.g)e:{const de=Zn(this.g),Ye=this.g.ya(),Ce=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||im(this.g)))){this.K||de!=4||Ye==7||(Ye==8||Ce<=0?Pi(3):Pi(2)),uc(this);var h=this.g.ca();this.X=h;var p=AE(this);if(this.o=h==200,TE(this.i,this.v,this.B,this.l,this.S,de,h),this.o){if(this.U&&!this.L){t:{if(this.g){var x,b=this.g;if((x=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(x)){var M=x;break t}}M=null}if(a=M)xs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cc(this,a);else{this.o=!1,this.m=3,Et(12),qr(this),Di(this);break e}}if(this.R){a=!0;let tt;for(;!this.K&&this.C<p.length;)if(tt=CE(this,p),tt==ac){de==4&&(this.m=4,Et(14),a=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==jp){this.m=4,Et(15),xs(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else xs(this.i,this.l,tt,null),cc(this,tt);if(Fp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||p.length!=0||this.h.h||(this.m=1,Et(16),a=!1),this.o=this.o&&a,!a)xs(this.i,this.l,p,"[Invalid Chunked Response]"),qr(this),Di(this);else if(p.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),vc(Q),Q.P=!0,Et(11))}}else xs(this.i,this.l,p,null),cc(this,p);de==4&&qr(this),this.o&&!this.K&&(de==4?dm(this.j,this):(this.o=!1,_a(this)))}else BE(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),qr(this),Di(this)}}}catch{}finally{}};function AE(a){if(!Fp(a))return a.g.la();const h=im(a.g);if(h==="")return"";let p="";const x=h.length,b=Zn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return qr(a),Di(a),"";a.h.i=new o.TextDecoder}for(let M=0;M<x;M++)a.h.h=!0,p+=a.h.i.decode(h[M],{stream:!(b&&M==x-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Fp(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function CE(a,h){var p=a.C,x=h.indexOf(`
`,p);return x==-1?ac:(p=Number(h.substring(p,x)),isNaN(p)?jp:(x+=1,x+p>h.length?ac:(h=h.slice(x,x+p),a.C=x+p,h)))}Yn.prototype.cancel=function(){this.K=!0,qr(this)};function _a(a){a.T=Date.now()+a.H,Bp(a,a.H)}function Bp(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ki(c(a.aa,a),h)}function uc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Yn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(xE(this.i,this.B),this.M!=2&&(Pi(),Et(17)),qr(this),this.m=2,Di(this)):Bp(this,this.T-a)};function Di(a){a.j.I==0||a.K||dm(a.j,a)}function qr(a){uc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Rp(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function cc(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||hc(p.h,a))){if(!a.L&&hc(p.h,a)&&p.I==3){try{var x=p.Ba.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var b=x;if(b[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Sa(p),xa(p);else break e;yc(p),Et(18)}}else p.xa=b[1],0<p.xa-p.K&&b[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=ki(c(p.Va,p),6e3));Hp(p.h)<=1&&p.ta&&(p.ta=void 0)}else Gr(p,11)}else if((a.L||p.g==a)&&Sa(p),!w(h))for(b=p.Ba.g.parse(h),h=0;h<b.length;h++){let Ce=b[h];const tt=Ce[0];if(!(tt<=p.K))if(p.K=tt,Ce=Ce[1],p.I==2)if(Ce[0]=="c"){p.M=Ce[1],p.ba=Ce[2];const cn=Ce[3];cn!=null&&(p.ka=cn,p.j.info("VER="+p.ka));const Kr=Ce[4];Kr!=null&&(p.za=Kr,p.j.info("SVER="+p.za));const er=Ce[5];er!=null&&typeof er=="number"&&er>0&&(x=1.5*er,p.O=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const tr=a.g;if(tr){const Ca=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ca){var M=x.h;M.g||Ca.indexOf("spdy")==-1&&Ca.indexOf("quic")==-1&&Ca.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(dc(M,M.h),M.h=null))}if(x.G){const _c=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;_c&&(x.wa=_c,ke(x.J,x.G,_c))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),x=p;var Q=a;if(x.na=mm(x,x.L?x.ba:null,x.W),Q.L){qp(x.h,Q);var de=Q,Ye=x.O;Ye&&(de.H=Ye),de.D&&(uc(de),_a(de)),x.g=Q}else cm(x);p.i.length>0&&Ia(p)}else Ce[0]!="stop"&&Ce[0]!="close"||Gr(p,7);else p.I==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Gr(p,7):gc(p):Ce[0]!="noop"&&p.l&&p.l.qa(Ce),p.A=0)}}Pi(4)}catch{}}var RE=class{constructor(a,h){this.g=a,this.map=h}};function zp(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $p(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Hp(a){return a.h?1:a.g?a.g.size:0}function hc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function dc(a,h){a.g?a.g.add(h):a.h=h}function qp(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}zp.prototype.cancel=function(){if(this.i=Wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Wp(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return R(a.i)}var Gp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PE(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const x=a[p].indexOf("=");let b,M=null;x>=0?(b=a[p].substring(0,x),M=a[p].substring(x+1)):b=a[p],h(b,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Xn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Xn?(this.l=a.l,Oi(this,a.j),this.o=a.o,this.g=a.g,Vi(this,a.u),this.h=a.h,fc(this,Zp(a.i)),this.m=a.m):a&&(h=String(a).match(Gp))?(this.l=!1,Oi(this,h[1]||"",!0),this.o=Mi(h[2]||""),this.g=Mi(h[3]||"",!0),Vi(this,h[4]),this.h=Mi(h[5]||"",!0),fc(this,h[6]||"",!0),this.m=Mi(h[7]||"")):(this.l=!1,this.i=new ji(null,this.l))}Xn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(Li(h,Kp,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Li(h,Kp,!0),"@"),a.push(bi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Li(p,p.charAt(0)=="/"?bE:NE,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Li(p,OE)),a.join("")},Xn.prototype.resolve=function(a){const h=un(this);let p=!!a.j;p?Oi(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var x=a.h;if(p)Vi(h,a.u);else if(p=!!a.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var b=h.h.lastIndexOf("/");b!=-1&&(x=h.h.slice(0,b+1)+x)}if(b=x,b==".."||b==".")x="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){x=b.lastIndexOf("/",0)==0,b=b.split("/");const M=[];for(let Q=0;Q<b.length;){const de=b[Q++];de=="."?x&&Q==b.length&&M.push(""):de==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),x&&Q==b.length&&M.push("")):(M.push(de),x=!0)}x=M.join("/")}else x=b}return p?h.h=x:p=a.i.toString()!=="",p?fc(h,Zp(a.i)):p=!!a.m,p&&(h.m=a.m),h};function un(a){return new Xn(a)}function Oi(a,h,p){a.j=p?Mi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Vi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function fc(a,h,p){h instanceof ji?(a.i=h,VE(a.i,a.l)):(p||(h=Li(h,DE)),a.i=new ji(h,a.l))}function ke(a,h,p){a.i.set(h,p)}function wa(a){return ke(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Mi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Li(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,kE),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function kE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Kp=/[#\/\?@]/g,NE=/[#\?:]/g,bE=/[#\?]/g,DE=/[#\?@]/g,OE=/#/g;function ji(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Wr(a){a.g||(a.g=new Map,a.h=0,a.i&&PE(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ji.prototype,t.add=function(a,h){Wr(this),this.i=null,a=Is(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Qp(a,h){Wr(a),h=Is(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Yp(a,h){return Wr(a),h=Is(a,h),a.g.has(h)}t.forEach=function(a,h){Wr(this),this.g.forEach(function(p,x){p.forEach(function(b){a.call(h,b,x,this)},this)},this)};function Xp(a,h){Wr(a);let p=[];if(typeof h=="string")Yp(a,h)&&(p=p.concat(a.g.get(Is(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return Wr(this),this.i=null,a=Is(this,a),Yp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Xp(this,a),a.length>0?String(a[0]):h):h};function Jp(a,h,p){Qp(a,h),p.length>0&&(a.i=null,a.g.set(Is(a,h),R(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let x=0;x<h.length;x++){var p=h[x];const b=bi(p);p=Xp(this,p);for(let M=0;M<p.length;M++){let Q=b;p[M]!==""&&(Q+="="+bi(p[M])),a.push(Q)}}return this.i=a.join("&")};function Zp(a){const h=new ji;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Is(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function VE(a,h){h&&!a.j&&(Wr(a),a.i=null,a.g.forEach(function(p,x){const b=x.toLowerCase();x!=b&&(Qp(this,x),Jp(this,b,p))},a)),a.j=h}function ME(a,h){const p=new Ni;if(o.Image){const x=new Image;x.onload=d(Jn,p,"TestLoadImage: loaded",!0,h,x),x.onerror=d(Jn,p,"TestLoadImage: error",!1,h,x),x.onabort=d(Jn,p,"TestLoadImage: abort",!1,h,x),x.ontimeout=d(Jn,p,"TestLoadImage: timeout",!1,h,x),o.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=a}else h(!1)}function LE(a,h){const p=new Ni,x=new AbortController,b=setTimeout(()=>{x.abort(),Jn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:x.signal}).then(M=>{clearTimeout(b),M.ok?Jn(p,"TestPingServer: ok",!0,h):Jn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),Jn(p,"TestPingServer: error",!1,h)})}function Jn(a,h,p,x,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),x(p)}catch{}}function jE(){this.g=new wE}function pc(a){this.i=a.Sb||null,this.h=a.ab||!1}m(pc,Pp),pc.prototype.g=function(){return new Ea(this.i,this.h)};function Ea(a,h){Ie.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ea,Ie),t=Ea.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Fi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ui(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;em(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function em(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ui(this):Fi(this),this.readyState==3&&em(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ui(this))},t.Na=function(a){this.g&&(this.response=a,Ui(this))},t.ga=function(){this.g&&Ui(this)};function Ui(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Fi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function tm(a){let h="";return Z(a,function(p,x){h+=x,h+=":",h+=p,h+=`\r
`}),h}function mc(a,h,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=tm(p),typeof a=="string"?p!=null&&bi(p):ke(a,h,p))}function Ue(a){Ie.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ue,Ie);var UE=/^https?$/i,FE=["POST","PUT"];t=Ue.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mp.g(),this.g.onreadystatechange=_(c(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(M){nm(this,M);return}if(a=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var b in x)p.set(b,x[b]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const M of x.keys())p.set(M,x.get(M));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),b=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(FE,h,void 0)>=0)||x||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,Q]of p)this.g.setRequestHeader(M,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(M){nm(this,M)}};function nm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,rm(a),Ta(a)}function rm(a){a.A||(a.A=!0,Ae(a,"complete"),Ae(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Ae(this,"complete"),Ae(this,"abort"),Ta(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sm(this):this.Xa())},t.Xa=function(){sm(this)};function sm(a){if(a.h&&typeof i<"u"){if(a.v&&Zn(a)==4)setTimeout(a.Ca.bind(a),0);else if(Ae(a,"readystatechange"),Zn(a)==4){a.h=!1;try{const M=a.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var x;if(x=M===0){let Q=String(a.D).match(Gp)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),x=!UE.test(Q?Q.toLowerCase():"")}p=x}if(p)Ae(a,"complete"),Ae(a,"success");else{a.o=6;try{var b=Zn(a)>2?a.g.statusText:""}catch{b=""}a.l=b+" ["+a.ca()+"]",rm(a)}}finally{Ta(a)}}}}function Ta(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||Ae(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),_E(h)}};function im(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function BE(a){const h={};a=(a.g&&Zn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<a.length;x++){if(w(a[x]))continue;var p=SE(a[x]);const b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=h[b]||[];h[b]=M,M.push(p)}te(h,function(x){return x.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function om(a){this.za=0,this.i=[],this.j=new Ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,a),this.Za=Bi("retryDelaySeedMs",1e4,a),this.Ta=Bi("forwardChannelMaxRetries",2,a),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new zp(a&&a.concurrentRequestLimit),this.Ba=new jE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=om.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,x){Et(0),this.W=a,this.H=h||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.J=mm(this,null,this.W),Ia(this)};function gc(a){if(am(a),a.I==3){var h=a.V++,p=un(a.J);if(ke(p,"SID",a.M),ke(p,"RID",h),ke(p,"TYPE","terminate"),zi(a,p),h=new Yn(a,a.j,h),h.M=2,h.A=wa(un(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=gm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),_a(h)}pm(a)}function xa(a){a.g&&(vc(a),a.g.cancel(),a.g=null)}function am(a){xa(a),a.v&&(o.clearTimeout(a.v),a.v=null),Sa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ia(a){if(!$p(a.h)&&!a.m){a.m=!0;var h=a.Ea;D||y(),V||(D(),V=!0),T.add(h,a),a.D=0}}function zE(a,h){return Hp(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ki(c(a.Ea,a,h),fm(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const b=new Yn(this,this.j,a);let M=this.o;if(this.U&&(M?(M=ye(M),ot(M,this.U)):M=this.U),this.u!==null||this.R||(b.J=M,M=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=um(this,b,h),p=un(this.J),ke(p,"RID",a),ke(p,"CVER",22),this.G&&ke(p,"X-HTTP-Session-Id",this.G),zi(this,p),M&&(this.R?h="headers="+bi(tm(M))+"&"+h:this.u&&mc(p,this.u,M)),dc(this.h,b),this.Ra&&ke(p,"TYPE","init"),this.S?(ke(p,"$req",h),ke(p,"SID","null"),b.U=!0,lc(b,p,null)):lc(b,p,h),this.I=2}}else this.I==3&&(a?lm(this,a):this.i.length==0||$p(this.h)||lm(this))};function lm(a,h){var p;h?p=h.l:p=a.V++;const x=un(a.J);ke(x,"SID",a.M),ke(x,"RID",p),ke(x,"AID",a.K),zi(a,x),a.u&&a.o&&mc(x,a.u,a.o),p=new Yn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=um(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),dc(a.h,p),lc(p,x,h)}function zi(a,h){a.H&&Z(a.H,function(p,x){ke(h,x,p)}),a.l&&Z({},function(p,x){ke(h,x,p)})}function um(a,h,p){p=Math.min(a.i.length,p);const x=a.l?c(a.l.Ka,a.l,a):null;e:{var b=a.i;let de=-1;for(;;){const Ye=["count="+p];de==-1?p>0?(de=b[0].g,Ye.push("ofs="+de)):de=0:Ye.push("ofs="+de);let Ce=!0;for(let tt=0;tt<p;tt++){var M=b[tt].g;const cn=b[tt].map;if(M-=de,M<0)de=Math.max(0,b[tt].g-100),Ce=!1;else try{M="req"+M+"_"||"";try{var Q=cn instanceof Map?cn:Object.entries(cn);for(const[Kr,er]of Q){let tr=er;l(er)&&(tr=rc(er)),Ye.push(M+Kr+"="+encodeURIComponent(tr))}}catch(Kr){throw Ye.push(M+"type="+encodeURIComponent("_badmap")),Kr}}catch{x&&x(cn)}}if(Ce){Q=Ye.join("&");break e}}Q=void 0}return a=a.i.splice(0,p),h.G=a,Q}function cm(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;D||y(),V||(D(),V=!0),T.add(h,a),a.A=0}}function yc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ki(c(a.Da,a),fm(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,hm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ki(c(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),xa(this),hm(this))};function vc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function hm(a){a.g=new Yn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=un(a.na);ke(h,"RID","rpc"),ke(h,"SID",a.M),ke(h,"AID",a.K),ke(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&ke(h,"TO",a.ia),ke(h,"TYPE","xmlhttp"),zi(a,h),a.u&&a.o&&mc(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=wa(un(h)),p.u=null,p.R=!0,Up(p,a)}t.Va=function(){this.C!=null&&(this.C=null,xa(this),yc(this),Et(19))};function Sa(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function dm(a,h){var p=null;if(a.g==h){Sa(a),vc(a),a.g=null;var x=2}else if(hc(a.h,h))p=h.G,qp(a.h,h),x=1;else return;if(a.I!=0){if(h.o)if(x==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var b=a.D;x=ya(),Ae(x,new Op(x,p)),Ia(a)}else cm(a);else if(b=h.m,b==3||b==0&&h.X>0||!(x==1&&zE(a,h)||x==2&&yc(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),b){case 1:Gr(a,5);break;case 4:Gr(a,10);break;case 3:Gr(a,6);break;default:Gr(a,2)}}}function fm(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function Gr(a,h){if(a.j.info("Error code "+h),h==2){var p=c(a.bb,a),x=a.Ua;const b=!x;x=new Xn(x||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Oi(x,"https"),wa(x),b?ME(x.toString(),p):LE(x.toString(),p)}else Et(2);a.I=0,a.l&&a.l.pa(h),pm(a),am(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function pm(a){if(a.I=0,a.ja=[],a.l){const h=Wp(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ja,h),P(a.ja,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.oa()}}function mm(a,h,p){var x=p instanceof Xn?un(p):new Xn(p);if(x.g!="")h&&(x.g=h+"."+x.g),Vi(x,x.u);else{var b=o.location;x=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;const M=new Xn(null);x&&Oi(M,x),h&&(M.g=h),b&&Vi(M,b),p&&(M.h=p),x=M}return p=a.G,h=a.wa,p&&h&&ke(x,p,h),ke(x,"VER",a.ka),zi(a,x),x}function gm(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Ue(new pc({ab:p})):new Ue(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ym(){}t=ym.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Aa(){}Aa.prototype.g=function(a,h){return new Dt(a,h)};function Dt(a,h){Ie.call(this),this.g=new om(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!w(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ss(this)}m(Dt,Ie),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){gc(this.g)},Dt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=rc(a),a=p);h.i.push(new RE(h.Ya++,a)),h.I==3&&Ia(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,gc(this.g),delete this.g,Dt.Z.N.call(this)};function vm(a){sc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}m(vm,sc);function _m(){ic.call(this),this.status=1}m(_m,ic);function Ss(a){this.g=a}m(Ss,ym),Ss.prototype.ra=function(){Ae(this.g,"a")},Ss.prototype.qa=function(a){Ae(this.g,new vm(a))},Ss.prototype.pa=function(a){Ae(this.g,new _m)},Ss.prototype.oa=function(){Ae(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Lw=function(){return new Aa},Mw=function(){return ya()},Vw=Hr,dd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,gl=va,Vp.COMPLETE="complete",Ow=Vp,kp.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,to=kp,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,Dw=Ue}).apply(typeof Ga<"u"?Ga:typeof self<"u"?self:typeof window<"u"?window:{});const fy="@firebase/firestore",py="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ei="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Df("@firebase/firestore");function Rs(){return ms.logLevel}function J(t,...e){if(ms.logLevel<=pe.DEBUG){const n=e.map(Wf);ms.debug(`Firestore (${Ei}): ${t}`,...n)}}function qn(t,...e){if(ms.logLevel<=pe.ERROR){const n=e.map(Wf);ms.error(`Firestore (${Ei}): ${t}`,...n)}}function ui(t,...e){if(ms.logLevel<=pe.WARN){const n=e.map(Wf);ms.warn(`Firestore (${Ei}): ${t}`,...n)}}function Wf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,jw(t,r,n)}function jw(t,e,n){let r=`FIRESTORE (${Ei}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qn(r),new Error(r)}function Te(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||jw(e,s,r)}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class i2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class o2{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new Uw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class a2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new a2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class my{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Te(this.o===void 0,3512);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new my(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new my(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=c2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function fd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return eh(s)===eh(i)?me(s,i):eh(s)?1:-1}return me(t.length,e.length)}const h2=55296,d2=57343;function eh(t){const e=t.charCodeAt(0);return e>=h2&&e<=d2}function ci(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="__name__";class fn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=fn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return me(e.length,n.length)}static compareSegments(e,n){const r=fn.isNumericId(e),s=fn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?fn.extractNumericId(e).compare(fn.extractNumericId(n)):fd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class Re extends fn{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const f2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends fn{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return f2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gy}static keyField(){return new ut([gy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new X(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new X(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Re.fromString(e))}static fromName(e){return new ne(Re.fromString(e).popFirst(5))}static empty(){return new ne(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Re(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e,n){if(!n)throw new X(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function p2(t,e,n,r){if(e===!0&&r===!0)throw new X(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yy(t){if(!ne.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vy(t){if(ne.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ju(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe(12329,{type:typeof t})}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ju(t);throw new X(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function aa(t,e){if(!Bw(t))throw new X(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=-62135596800,wy=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wy);return new Ee(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_y)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wy}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(aa(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_y;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:Ke("string",Ee._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Ee(0,0))}static max(){return new ue(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=-1;function m2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new Nr(s,ne.empty(),e)}function g2(t){return new Nr(t.readTime,t.key,zo)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(ue.min(),ne.empty(),zo)}static max(){return new Nr(ue.max(),ne.empty(),zo)}}function y2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==v2)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function w2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=-1;function Fu(t){return t==null}function tu(t){return t===0&&1/t==-1/0}function E2(t){return typeof t=="number"&&Number.isInteger(t)&&!tu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="";function T2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ey(e)),e=x2(t.get(n),e);return Ey(e)}function x2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zw:n+="";break;default:n+=i}}return n}function Ey(t){return t+zw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Br(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $w(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}}class Ka{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??lt.RED,this.left=s??lt.EMPTY,this.right=i??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xy(this.data.getIterator())}getIteratorFrom(e){return new xy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class xy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new Ze(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ci(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Hw("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const I2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(Te(!!t,39018),typeof t=="string"){let e=0;const n=I2.exec(t);if(Te(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="server_timestamp",Ww="__type__",Gw="__previous_value__",Kw="__local_write_time__";function Qf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ww])==null?void 0:r.stringValue)===qw}function Bu(t){const e=t.mapValue.fields[Gw];return Qf(e)?Bu(e):e}function $o(t){const e=br(t.mapValue.fields[Kw].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,r,s,i,o,l,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const nu="(default)";class Ho{constructor(e,n){this.projectId=e,this.database=n||nu}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database===nu}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="__type__",A2="__max__",Qa={mapValue:{}},Yw="__vector__",ru="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qf(t)?4:R2(t)?9007199254740991:C2(t)?10:11:oe(28295,{value:t})}function Sn(t,e){if(t===e)return!0;const n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $o(t).isEqual($o(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=br(s.timestampValue),l=br(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Dr(s.bytesValue).isEqual(Dr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),l=Be(i.doubleValue);return o===l?tu(o)===tu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ci(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ty(o)!==Ty(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Sn(o[u],l[u])))return!1;return!0}(t,e);default:return oe(52216,{left:t})}}function qo(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function hi(t,e){if(t===e)return 0;const n=Or(t),r=Or(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Be(i.integerValue||i.doubleValue),u=Be(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Iy(t.timestampValue,e.timestampValue);case 4:return Iy($o(t),$o(e));case 5:return fd(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Dr(i),u=Dr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=me(l[c],u[c]);if(d!==0)return d}return me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=me(Be(i.latitude),Be(o.latitude));return l!==0?l:me(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var _,R,P,k;const l=i.fields||{},u=o.fields||{},c=(_=l[ru])==null?void 0:_.arrayValue,d=(R=u[ru])==null?void 0:R.arrayValue,m=me(((P=c==null?void 0:c.values)==null?void 0:P.length)||0,((k=d==null?void 0:d.values)==null?void 0:k.length)||0);return m!==0?m:Sy(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Qa.mapValue&&o===Qa.mapValue)return 0;if(i===Qa.mapValue)return 1;if(o===Qa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const _=fd(u[m],d[m]);if(_!==0)return _;const R=hi(l[u[m]],c[d[m]]);if(R!==0)return R}return me(u.length,d.length)}(t.mapValue,e.mapValue);default:throw oe(23264,{he:n})}}function Iy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=br(t),r=br(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Sy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hi(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function di(t){return pd(t)}function pd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${pd(n.fields[o])}`;return s+"}"}(t.mapValue):oe(61005,{value:t})}function yl(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bu(t);return e?16+yl(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+yl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Br(r.fields,(i,o)=>{s+=i.length+yl(o)}),s}(t.mapValue);default:throw oe(13486,{value:t})}}function Ay(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function md(t){return!!t&&"integerValue"in t}function Yf(t){return!!t&&"arrayValue"in t}function Cy(t){return!!t&&"nullValue"in t}function Ry(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vl(t){return!!t&&"mapValue"in t}function C2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Qw])==null?void 0:r.stringValue)===Yw}function yo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Br(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yo(t.arrayValue.values[n]);return e}return{...t}}function R2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===A2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yo(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=yo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];vl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Br(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(yo(this.value))}}function Xw(t){const e=[];return Br(t.fields,(n,r)=>{const s=new ut([n]);if(vl(r)){const i=Xw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new vt(e,0,ue.min(),ue.min(),ue.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,ue.min(),ue.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,ue.min(),ue.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.position=e,this.inclusive=n}}function Py(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=hi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ky(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function P2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{}class Ge extends Jw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N2(e,n,r):n==="array-contains"?new O2(e,r):n==="in"?new V2(e,r):n==="not-in"?new M2(e,r):n==="array-contains-any"?new L2(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b2(e,r):new D2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hi(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends Jw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new on(e,n)}matches(e){return Zw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zw(t){return t.op==="and"}function e1(t){return k2(t)&&Zw(t)}function k2(t){for(const e of t.filters)if(e instanceof on)return!1;return!0}function gd(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+di(t.value);if(e1(t))return t.filters.map(e=>gd(e)).join(",");{const e=t.filters.map(n=>gd(n)).join(",");return`${t.op}(${e})`}}function t1(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof on?function(r,s){return s instanceof on&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&t1(o,s.filters[l]),!0):!1}(t,e):void oe(19439)}function n1(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${di(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map(n1).join(" ,")+"}"}(t):"Filter"}class N2 extends Ge{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class b2 extends Ge{constructor(e,n){super(e,"in",n),this.keys=r1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D2 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=r1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class O2 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yf(n)&&qo(n.arrayValue,this.value)}}class V2 extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class M2 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class L2 extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Ny(t,e=null,n=[],r=[],s=null,i=null,o=null){return new j2(t,e,n,r,s,i,o)}function Xf(t){const e=ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Fu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>di(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>di(r)).join(",")),e.Te=n}return e.Te}function Jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!P2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ky(t.startAt,e.startAt)&&ky(t.endAt,e.endAt)}function yd(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function U2(t,e,n,r,s,i,o,l){return new la(t,e,n,r,s,i,o,l)}function Zf(t){return new la(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s1(t){return t.collectionGroup!==null}function vo(t){const e=ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ze(ut.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new iu(i,r))}),n.has(ut.keyField().canonicalString())||e.Ie.push(new iu(ut.keyField(),r))}return e.Ie}function _n(t){const e=ce(t);return e.Ee||(e.Ee=F2(e,vo(t))),e.Ee}function F2(t,e){if(t.limitType==="F")return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new iu(s.field,i)});const n=t.endAt?new su(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new su(t.startAt.position,t.startAt.inclusive):null;return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vd(t,e){const n=t.filters.concat([e]);return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _d(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return Jf(_n(t),_n(e))&&t.limitType===e.limitType}function i1(t){return`${Xf(_n(t))}|lt:${t.limitType}`}function Ps(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>n1(s)).join(", ")}]`),Fu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>di(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>di(s)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function $u(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of vo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const c=Py(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,vo(r),s)||r.endAt&&!function(o,l,u){const c=Py(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,vo(r),s))}(t,e)}function B2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o1(t){return(e,n)=>{let r=!1;for(const s of vo(t)){const i=z2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function z2(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),c=l.data.field(i);return u!==null&&c!==null?hi(u,c):oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new je(ne.comparator);function Gn(){return $2}const a1=new je(ne.comparator);function no(...t){let e=a1;for(const n of t)e=e.insert(n.key,n);return e}function l1(t){let e=a1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ns(){return _o()}function u1(){return _o()}function _o(){return new Es(t=>t.toString(),(t,e)=>t.isEqual(e))}const H2=new je(ne.comparator),q2=new Ze(ne.comparator);function ge(...t){let e=q2;for(const n of t)e=e.add(n);return e}const W2=new Ze(me);function G2(){return W2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(e)?"-0":e}}function c1(t){return{integerValue:""+t}}function K2(t,e){return E2(e)?c1(e):ep(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function Q2(t,e,n){return t instanceof Wo?function(s,i){const o={fields:{[Ww]:{stringValue:qw},[Kw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Qf(i)&&(i=Bu(i)),i&&(o.fields[Gw]=i),{mapValue:o}}(n,e):t instanceof Go?d1(t,e):t instanceof Ko?f1(t,e):function(s,i){const o=h1(s,i),l=Dy(o)+Dy(s.Ae);return md(o)&&md(s.Ae)?c1(l):ep(s.serializer,l)}(t,e)}function Y2(t,e,n){return t instanceof Go?d1(t,e):t instanceof Ko?f1(t,e):n}function h1(t,e){return t instanceof ou?function(r){return md(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Wo extends Hu{}class Go extends Hu{constructor(e){super(),this.elements=e}}function d1(t,e){const n=p1(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ko extends Hu{constructor(e){super(),this.elements=e}}function f1(t,e){let n=p1(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class ou extends Hu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Dy(t){return Be(t.integerValue||t.doubleValue)}function p1(t){return Yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n){this.field=e,this.transform=n}}function J2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Go&&s instanceof Go||r instanceof Ko&&s instanceof Ko?ci(r.elements,s.elements,Sn):r instanceof ou&&s instanceof ou?Sn(r.Ae,s.Ae):r instanceof Wo&&s instanceof Wo}(t.transform,e.transform)}class Z2{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qu{}function m1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y1(t.key,wn.none()):new ua(t.key,t.data,wn.none());{const n=t.data,r=Rt.empty();let s=new Ze(ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zr(t.key,r,new Mt(s.toArray()),wn.none())}}function eP(t,e,n){t instanceof ua?function(s,i,o){const l=s.value.clone(),u=Vy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(s,i,o){if(!_l(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Vy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(g1(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n,r){return t instanceof ua?function(i,o,l,u){if(!_l(i.precondition,o))return l;const c=i.value.clone(),d=My(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof zr?function(i,o,l,u){if(!_l(i.precondition,o))return l;const c=My(i.fieldTransforms,u,o),d=o.data;return d.setAll(g1(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return _l(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function tP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=h1(r.transform,s||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,i))}return n||null}function Oy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ci(r,s,(i,o)=>J2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ua extends qu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zr extends qu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function g1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Vy(t,e,n){const r=new Map;Te(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Y2(o,l,n[s]))}return r}function My(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Q2(i,o,e))}return r}class y1 extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nP extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=m1(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&ci(this.mutations,e.mutations,(n,r)=>Oy(n,r))&&ci(this.baseMutations,e.baseMutations,(n,r)=>Oy(n,r))}}class tp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return H2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new tp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ve;function oP(t){switch(t){case U.OK:return oe(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return oe(15467,{code:t})}}function v1(t){if(t===void 0)return qn("GRPC error has no .code"),U.UNKNOWN;switch(t){case qe.OK:return U.OK;case qe.CANCELLED:return U.CANCELLED;case qe.UNKNOWN:return U.UNKNOWN;case qe.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case qe.INTERNAL:return U.INTERNAL;case qe.UNAVAILABLE:return U.UNAVAILABLE;case qe.UNAUTHENTICATED:return U.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case qe.NOT_FOUND:return U.NOT_FOUND;case qe.ALREADY_EXISTS:return U.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return U.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case qe.ABORTED:return U.ABORTED;case qe.OUT_OF_RANGE:return U.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return U.UNIMPLEMENTED;case qe.DATA_LOSS:return U.DATA_LOSS;default:return oe(39323,{code:t})}}(ve=qe||(qe={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new Ar([4294967295,4294967295],0);function Ly(t){const e=aP().encode(t),n=new bw;return n.update(e),new Uint8Array(n.digest())}function jy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([s,i],0)]}class np{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ro(`Invalid padding: ${n}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ro(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ar.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ar.fromNumber(r)));return s.compare(lP)===1&&(s=new Ar([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ly(e),[r,s]=jy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new np(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Ly(e),[r,s]=jy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wu(ue.min(),s,new je(me),Gn(),ge())}}class ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ca(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class _1{constructor(e,n){this.targetId=e,this.Ce=n}}class w1{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Uy{constructor(){this.ve=0,this.Fe=Fy(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:i})}}),new ca(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Fy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.Je=Ya(),this.He=Ya(),this.Ye=new je(me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(yd(i))if(r===0){const o=new ne(i.path);this.et(n,o,vt.newNoDocument(o,ue.min()))}else Te(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Dr(r).toUint8Array()}catch(u){if(u instanceof Hw)return ui("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new np(o,s,i)}catch(u){return ui(u instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&yd(l.target)){const u=new ne(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,vt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ge();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Wu(e,n,this.Ye,this.je,r);return this.je=Gn(),this.Je=Ya(),this.He=Ya(),this.Ye=new je(me),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Uy,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Uy),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ya(){return new je(ne.comparator)}function Fy(){return new je(ne.comparator)}const cP={asc:"ASCENDING",desc:"DESCENDING"},hP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dP={and:"AND",or:"OR"};class fP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wd(t,e){return t.useProto3Json||Fu(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pP(t,e){return au(t,e.toTimestamp())}function En(t){return Te(!!t,49232),ue.fromTimestamp(function(n){const r=br(n);return new Ee(r.seconds,r.nanos)}(t))}function rp(t,e){return Ed(t,e).canonicalString()}function Ed(t,e){const n=function(s){return new Re(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T1(t){const e=Re.fromString(t);return Te(C1(e),10190,{key:e.toString()}),e}function Td(t,e){return rp(t.databaseId,e.path)}function th(t,e){const n=T1(e);if(n.get(1)!==t.databaseId.projectId)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(I1(n))}function x1(t,e){return rp(t.databaseId,e)}function mP(t){const e=T1(t);return e.length===4?Re.emptyPath():I1(e)}function xd(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I1(t){return Te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function By(t,e,n){return{name:Td(t,e),fields:n.value.mapValue.fields}}function gP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Te(d===void 0||typeof d=="string",58123),dt.fromBase64String(d||"")):(Te(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),dt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const d=c.code===void 0?U.UNKNOWN:v1(c.code);return new X(d,c.message||"")}(o);n=new w1(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=th(t,r.document.name),i=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):ue.min(),l=new Rt({mapValue:{fields:r.document.fields}}),u=vt.newFoundDocument(s,i,o,l),c=r.targetIds||[],d=r.removedTargetIds||[];n=new wl(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=th(t,r.document),i=r.readTime?En(r.readTime):ue.min(),o=vt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new wl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=th(t,r.document),i=r.removedTargetIds||[];n=new wl([],i,s,null)}else{if(!("filter"in e))return oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new iP(s,i),l=r.targetId;n=new _1(l,o)}}return n}function yP(t,e){let n;if(e instanceof ua)n={update:By(t,e.key,e.value)};else if(e instanceof y1)n={delete:Td(t,e.key)};else if(e instanceof zr)n={update:By(t,e.key,e.data),updateMask:AP(e.fieldMask)};else{if(!(e instanceof nP))return oe(16599,{Vt:e.type});n={verify:Td(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Wo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Go)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ou)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe(27497)}(t,e.precondition)),n}function vP(t,e){return t&&t.length>0?(Te(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?En(s.updateTime):En(i);return o.isEqual(ue.min())&&(o=En(i)),new Z2(o,s.transformResults||[])}(n,e))):[]}function _P(t,e){return{documents:[x1(t,e.path)]}}function wP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=x1(t,s);const i=function(c){if(c.length!==0)return A1(on.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(_){return{field:ks(_.field),direction:xP(_.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=wd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function EP(t){let e=mP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const _=S1(m);return _ instanceof on&&e1(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(_=>function(P){return new iu(Ns(P.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(m){let _;return _=typeof m=="object"?m.value:m,Fu(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(m){const _=!!m.before,R=m.values||[];return new su(R,_)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const _=!m.before,R=m.values||[];return new su(R,_)}(n.endAt)),U2(e,s,o,i,l,"F",u,c)}function TP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ns(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ns(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ns(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Ns(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>S1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(n.compositeFilter.op))}(t):oe(30097,{filter:t})}function xP(t){return cP[t]}function IP(t){return hP[t]}function SP(t){return dP[t]}function ks(t){return{fieldPath:t.canonicalString()}}function Ns(t){return ut.fromServerFormat(t.fieldPath)}function A1(t){return t instanceof Ge?function(n){if(n.op==="=="){if(Ry(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NAN"}};if(Cy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ry(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NAN"}};if(Cy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(n.field),op:IP(n.op),value:n.value}}}(t):t instanceof on?function(n){const r=n.getFilters().map(s=>A1(s));return r.length===1?r[0]:{compositeFilter:{op:SP(n.op),filters:r}}}(t):oe(54877,{filter:t})}function AP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r,s,i=ue.min(),o=ue.min(),l=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.yt=e}}function RP(t){const e=EP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.Cn=new kP}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Nr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class kP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R1=41943040;class At{static withCacheSize(e){return new At(e,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(R1,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fi(0)}static cr(){return new fi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="LruGarbageCollector",NP=1048576;function Hy([t,e],[n,r]){const s=me(t,n);return s===0?me(e,r):s}class bP{constructor(e){this.Ir=e,this.buffer=new Ze(Hy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J($y,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xi(n)?J($y,"Ignoring IndexedDB error during garbage collection: ",n):await Ti(n)}await this.Vr(3e5)})}}class OP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Uu.ce);const r=new bP(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(zy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zy):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),Rs()<=pe.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function VP(t,e){return new OP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.changes=new Es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wo(r.mutation,s,Mt.empty(),Ee.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=ns();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=no();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Gn();const o=_o(),l=function(){return _o()}();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof zr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),wo(d.mutation,c,d.mutation.getFieldMask(),Ee.now())):o.set(c.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>l.set(c,new LP(d,o.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const r=_o();let s=new je((o,l)=>o-l),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Mt.empty();d=l.applyToLocalView(c,d),r.set(u,d);const m=(s.get(l.batchId)||ge()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,m=u1();d.forEach(_=>{if(!i.has(_)){const R=m1(n.get(_),r.get(_));R!==null&&m.set(_,R),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ns());let l=zo,u=i;return o.next(c=>B.forEach(c,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(_=>{u=u.insert(d,_)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ge())).next(d=>({batchId:l,changes:l1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=no();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=no();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,u=>{const c=function(m,_){return new la(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,vt.newInvalidDocument(d)))});let l=no();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&wo(d.mutation,c,Mt.empty(),Ee.now()),$u(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:En(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:RP(s.bundledQuery),readTime:En(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.overlays=new je(ne.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ns(),i=n.length+1,o=new ne(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ns(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=ns(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return B.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sP(n,r));let i=this.qr.get(n);i===void 0&&(i=ge(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.Qr=new Ze(nt.$r),this.Ur=new Ze(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ne(new Re([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ne(new Re([])),r=new nt(n,e),s=new nt(n,e+1);let i=ge();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ne.comparator(e.key,n.key)||me(e.Yr,n.Yr)}static Kr(e,n){return me(e.Yr,n.Yr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(nt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rP(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Kf:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(me);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new nt(new ne(i),0);let l=new Ze(me);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Yr)),!0)},o),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new nt(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.ri=e,this.docs=function(){return new je(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gn();const o=n.path,l=new ne(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||y2(g2(d),r)<=0||(s.has(d.key)||$u(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HP(this)}getSize(e){return B.resolve(this.size)}}class HP extends MP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.persistence=e,this.si=new Es(n=>Xf(n),Jf),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=fi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Uu(0),this.li=!1,this.li=!0,this.hi=new BP,this.referenceDelegate=e(this),this.Pi=new qP(this),this.indexManager=new PP,this.remoteDocumentCache=function(s){return new $P(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new CP(n),this.Ii=new UP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new zP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new WP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class WP extends _2{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ri=new sp,this.Vi=null}static mi(e){return new ip(e)}get fi(){if(this.Vi)return this.Vi;throw oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=ne.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class lu{constructor(e,n){this.persistence=e,this.pi=new Es(r=>T2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=VP(this,n)}static mi(e,n){return new lu(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yl(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new op(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return LS()?8:w2(wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new GP;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Rs()<=pe.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Rs()<=pe.DEBUG&&J("QueryEngine","Query:",Ps(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Rs()<=pe.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):B.resolve())}ys(e,n){if(by(n))return B.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_d(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,l);return this.Cs(n,c,o,u.readTime)?this.ys(e,_d(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,s){return by(n)||s.isEqual(ue.min())?B.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?B.resolve(null):(Rs()<=pe.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ps(n)),this.vs(e,o,n,m2(s,zo)).next(l=>l))})}Ds(e,n){let r=new Ze(o1(e));return n.forEach((s,i)=>{$u(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Rs()<=pe.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ps(n)),this.ps.getDocumentsMatchingQuery(e,n,Nr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="LocalStore",QP=3e8;class YP{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new je(me),this.xs=new Es(i=>Xf(i),Jf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function XP(t,e,n,r){return new YP(t,e,n,r)}async function k1(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ge();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:l}))})})}function JP(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const m=c.batch,_=m.keys();let R=B.resolve();return _.forEach(P=>{R=R.next(()=>d.getEntry(u,P)).next(k=>{const N=c.docVersions.get(P);Te(N!==null,48541),k.version.compareTo(N)<0&&(m.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),d.addEntry(k)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ge();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function N1(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function ZP(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((d,m)=>{const _=s.get(m);if(!_)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,m)));let R=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?R=R.withResumeToken(dt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(d.resumeToken,r)),s=s.insert(m,R),function(k,N,A){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=QP?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(_,R,d)&&l.push(n.Pi.updateTargetData(i,R))});let u=Gn(),c=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(ek(i,o,e.documentUpdates).next(d=>{u=d.ks,c=d.qs})),!r.isEqual(ue.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return B.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=s,i))}function ek(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gn();return n.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):J(ap,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:s}})}function tk(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Kf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nk(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Id(t,e,n){const r=ce(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xi(o))throw o;J(ap,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function qy(t,e,n){const r=ce(t);let s=ue.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const m=ce(u),_=m.xs.get(d);return _!==void 0?B.resolve(m.Ms.get(_)):m.Pi.getTargetData(c,d)}(r,o,_n(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:ge())).next(l=>(rk(r,B2(e),l),{documents:l,Qs:i})))}function rk(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Wy{constructor(){this.activeTargetIds=G2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sk{constructor(){this.Mo=new Wy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="ConnectivityMonitor";class Ky{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(Gy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(Gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa=null;function Sd(){return Xa===null?Xa=function(){return 268435456+Math.round(2147483648*Math.random())}():Xa++,"0x"+Xa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="RestConnection",ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ak{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===nu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Sd(),l=this.zo(e,n.toUriEncodedString());J(nh,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:c}=new URL(l),d=_s(c);return this.Jo(e,l,u,r,d).then(m=>(J(nh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw ui(nh,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ei}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=ok[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class uk extends ak{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Sd();return new Promise((l,u)=>{const c=new Dw;c.setWithCredentials(!0),c.listenOnce(Ow.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case gl.NO_ERROR:const m=c.getResponseJson();J(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case gl.TIMEOUT:J(mt,`RPC '${e}' ${o} timed out`),u(new X(U.DEADLINE_EXCEEDED,"Request time out"));break;case gl.HTTP_ERROR:const _=c.getStatus();if(J(mt,`RPC '${e}' ${o} failed with status:`,_,"response text:",c.getResponseText()),_>0){let R=c.getResponseJson();Array.isArray(R)&&(R=R[0]);const P=R==null?void 0:R.error;if(P&&P.status&&P.message){const k=function(A){const S=A.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(S)>=0?S:U.UNKNOWN}(P.status);u(new X(k,P.message))}else u(new X(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new X(U.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{J(mt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);J(mt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Sd(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Lw(),l=Mw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");J(mt,`Creating RPC '${e}' stream ${s}: ${d}`,u);const m=o.createWebChannel(d,u);this.I_(m);let _=!1,R=!1;const P=new lk({Yo:N=>{R?J(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(_||(J(mt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),_=!0),J(mt,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},Zo:()=>m.close()}),k=(N,A,S)=>{N.listen(A,C=>{try{S(C)}catch(O){setTimeout(()=>{throw O},0)}})};return k(m,to.EventType.OPEN,()=>{R||(J(mt,`RPC '${e}' stream ${s} transport opened.`),P.o_())}),k(m,to.EventType.CLOSE,()=>{R||(R=!0,J(mt,`RPC '${e}' stream ${s} transport closed`),P.a_(),this.E_(m))}),k(m,to.EventType.ERROR,N=>{R||(R=!0,ui(mt,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),P.a_(new X(U.UNAVAILABLE,"The operation could not be completed")))}),k(m,to.EventType.MESSAGE,N=>{var A;if(!R){const S=N.data[0];Te(!!S,16349);const C=S,O=(C==null?void 0:C.error)||((A=C[0])==null?void 0:A.error);if(O){J(mt,`RPC '${e}' stream ${s} received error:`,O);const D=O.status;let V=function(v){const I=qe[v];if(I!==void 0)return v1(I)}(D),T=O.message;V===void 0&&(V=U.INTERNAL,T="Unknown error status: "+D+" with message "+O.message),R=!0,P.a_(new X(V,T)),m.close()}else J(mt,`RPC '${e}' stream ${s} received:`,S),P.u_(S)}}),k(l,Vw.STAT_EVENT,N=>{N.stat===dd.PROXY?J(mt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===dd.NOPROXY&&J(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function rh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){return new fP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="PersistentStream";class D1{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new b1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new X(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(Qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(Qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ck extends D1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=gP(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?En(o.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=xd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=yd(u)?{documents:_P(i,u)}:{query:wP(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=E1(i,o.resumeToken);const c=wd(i,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){l.readTime=au(i,o.snapshotVersion.toTimestamp());const c=wd(i,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=TP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=xd(this.serializer),n.removeTarget=e,this.q_(n)}}class hk extends D1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vP(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{}class fk extends dk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Ed(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Ed(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qn(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="RemoteStore";class mk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ts(this)&&(J(gs,"Restarting streams for network reachability change."),await async function(u){const c=ce(u);c.Ea.add(4),await ha(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ku(c)}(this))})}),this.Ra=new pk(r,s)}}async function Ku(t){if(Ts(t))for(const e of t.da)await e(!0)}async function ha(t){for(const e of t.da)await e(!1)}function O1(t,e){const n=ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hp(n)?cp(n):Ii(n).O_()&&up(n,e))}function lp(t,e){const n=ce(t),r=Ii(n);n.Ia.delete(e),r.O_()&&V1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ts(n)&&n.Ra.set("Unknown"))}function up(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ii(t).Y_(e)}function V1(t,e){t.Va.Ue(e),Ii(t).Z_(e)}function cp(t){t.Va=new uP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ii(t).start(),t.Ra.ua()}function hp(t){return Ts(t)&&!Ii(t).x_()&&t.Ia.size>0}function Ts(t){return ce(t).Ea.size===0}function M1(t){t.Va=void 0}async function gk(t){t.Ra.set("Online")}async function yk(t){t.Ia.forEach((e,n)=>{up(t,e)})}async function vk(t,e){M1(t),hp(t)?(t.Ra.ha(e),cp(t)):t.Ra.set("Unknown")}async function _k(t,e,n){if(t.Ra.set("Online"),e instanceof w1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){J(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uu(t,r)}else if(e instanceof wl?t.Va.Ze(e):e instanceof _1?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await N1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(dt.EMPTY_BYTE_STRING,d.snapshotVersion)),V1(i,u);const m=new pr(d.target,u,c,d.sequenceNumber);up(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J(gs,"Failed to raise snapshot:",r),await uu(t,r)}}async function uu(t,e,n){if(!xi(e))throw e;t.Ea.add(1),await ha(t),t.Ra.set("Offline"),n||(n=()=>N1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(gs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ku(t)})}function L1(t,e){return e().catch(n=>uu(t,n,e))}async function Qu(t){const e=ce(t),n=Vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kf;for(;wk(e);)try{const s=await tk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Ek(e,s)}catch(s){await uu(e,s)}j1(e)&&U1(e)}function wk(t){return Ts(t)&&t.Ta.length<10}function Ek(t,e){t.Ta.push(e);const n=Vr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function j1(t){return Ts(t)&&!Vr(t).x_()&&t.Ta.length>0}function U1(t){Vr(t).start()}async function Tk(t){Vr(t).ra()}async function xk(t){const e=Vr(t);for(const n of t.Ta)e.ea(n.mutations)}async function Ik(t,e,n){const r=t.Ta.shift(),s=tp.from(r,e,n);await L1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qu(t)}async function Sk(t,e){e&&Vr(t).X_&&await async function(r,s){if(function(o){return oP(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();Vr(r).B_(),await L1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qu(r)}}(t,e),j1(t)&&U1(t)}async function Yy(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),J(gs,"RemoteStore received new credentials");const r=Ts(n);n.Ea.add(3),await ha(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ku(n)}async function Ak(t,e){const n=ce(t);e?(n.Ea.delete(2),await Ku(n)):e||(n.Ea.add(2),await ha(n),n.Ra.set("Unknown"))}function Ii(t){return t.ma||(t.ma=function(n,r,s){const i=ce(n);return i.sa(),new ck(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:gk.bind(null,t),t_:yk.bind(null,t),r_:vk.bind(null,t),H_:_k.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),hp(t)?cp(t):t.Ra.set("Unknown")):(await t.ma.stop(),M1(t))})),t.ma}function Vr(t){return t.fa||(t.fa=function(n,r,s){const i=ce(n);return i.sa(),new hk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Tk.bind(null,t),r_:Sk.bind(null,t),ta:xk.bind(null,t),na:Ik.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qu(t)):(await t.fa.stop(),t.Ta.length>0&&(J(gs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new dp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(t,e){if(qn("AsyncQueue",`${e}: ${t}`),xi(t))return new X(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{static emptySet(e){return new Zs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=no(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.ga=new je(ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class pi{constructor(e,n,r,s,i,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new pi(e,n,Zs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Rk{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ce(n),i=s.queries;s.queries=Jy(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new X(U.ABORTED,"Firestore shutting down"))}}function Jy(){return new Es(t=>i1(t),zu)}async function F1(t,e){const n=ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Ck,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=fp(o,`Initialization of query '${Ps(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&pp(n)}async function B1(t,e){const n=ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Pk(t,e){const n=ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&pp(n)}function kk(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function pp(t){t.Ca.forEach(e=>{e.next()})}var Ad,Zy;(Zy=Ad||(Ad={})).Ma="default",Zy.Cache="cache";class z1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ad.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.key=e}}class H1{constructor(e){this.key=e}}class Nk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=o1(e),this.tu=new Zs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Xy,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const _=s.get(d),R=$u(this.query,m)?m:null,P=!!_&&this.mutatedKeys.has(_.key),k=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let N=!1;_&&R?_.data.isEqual(R.data)?P!==k&&(r.track({type:3,doc:R}),N=!0):this.su(_,R)||(r.track({type:2,doc:R}),N=!0,(u&&this.eu(R,u)>0||c&&this.eu(R,c)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),N=!0):_&&!R&&(r.track({type:1,doc:_}),N=!0,(u||c)&&(l=!0)),N&&(R?(o=o.add(R),i=k?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,m)=>function(R,P){const k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Rt:N})}};return k(R)-k(P)}(d.type,m.type)||this.eu(d.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new pi(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new H1(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new $1(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return pi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mp="SyncEngine";class bk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Dk{constructor(e){this.key=e,this.hu=!1}}class Ok{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Es(l=>i1(l),zu),this.Iu=new Map,this.Eu=new Set,this.du=new je(ne.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=fi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Vk(t,e,n=!0){const r=Y1(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await q1(r,e,n,!0),s}async function Mk(t,e){const n=Y1(t);await q1(n,e,!0,!1)}async function q1(t,e,n,r){const s=await nk(t.localStore,_n(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Lk(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&O1(t.remoteStore,s),l}async function Lk(t,e,n,r,s){t.pu=(m,_,R)=>async function(k,N,A,S){let C=N.view.ru(A);C.Cs&&(C=await qy(k.localStore,N.query,!1).then(({documents:T})=>N.view.ru(T,C)));const O=S&&S.targetChanges.get(N.targetId),D=S&&S.targetMismatches.get(N.targetId)!=null,V=N.view.applyChanges(C,k.isPrimaryClient,O,D);return tv(k,N.targetId,V.au),V.snapshot}(t,m,_,R);const i=await qy(t.localStore,e,!0),o=new Nk(e,i.Qs),l=o.ru(i.documents),u=ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);tv(t,n,c.au);const d=new bk(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function jk(t,e,n){const r=ce(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!zu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Id(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&lp(r.remoteStore,s.targetId),Cd(r,s.targetId)}).catch(Ti)):(Cd(r,s.targetId),await Id(r.localStore,s.targetId,!0))}async function Uk(t,e){const n=ce(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lp(n.remoteStore,r.targetId))}async function Fk(t,e,n){const r=Gk(t);try{const s=await function(o,l){const u=ce(o),c=Ee.now(),d=l.reduce((R,P)=>R.add(P.key),ge());let m,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=Gn(),k=ge();return u.Ns.getEntries(R,d).next(N=>{P=N,P.forEach((A,S)=>{S.isValidDocument()||(k=k.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,P)).next(N=>{m=N;const A=[];for(const S of l){const C=tP(S,m.get(S.key).overlayedDocument);C!=null&&A.push(new zr(S.key,C,Xw(C.value.mapValue),wn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,c,A,l)}).next(N=>{_=N;const A=N.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(R,N.batchId,A)})}).then(()=>({batchId:_.batchId,changes:l1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new je(me)),c=c.insert(l,u),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await da(r,s.changes),await Qu(r.remoteStore)}catch(s){const i=fp(s,"Failed to persist write");n.reject(i)}}async function W1(t,e){const n=ce(t);try{const r=await ZP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Te(o.hu,14607):s.removedDocuments.size>0&&(Te(o.hu,42227),o.hu=!1))}),await da(n,r,e)}catch(r){await Ti(r)}}function ev(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ce(o);u.onlineState=l;let c=!1;u.queries.forEach((d,m)=>{for(const _ of m.Sa)_.va(l)&&(c=!0)}),c&&pp(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Bk(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new je(ne.comparator);o=o.insert(i,vt.newNoDocument(i,ue.min()));const l=ge().add(i),u=new Wu(ue.min(),new Map,new je(me),o,l);await W1(r,u),r.du=r.du.remove(i),r.Au.delete(e),gp(r)}else await Id(r.localStore,e,!1).then(()=>Cd(r,e,n)).catch(Ti)}async function zk(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await JP(n.localStore,e);K1(n,r,null),G1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await da(n,s)}catch(s){await Ti(s)}}async function $k(t,e,n){const r=ce(t);try{const s=await function(o,l){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(Te(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);K1(r,e,n),G1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await da(r,s)}catch(s){await Ti(s)}}function G1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function K1(t,e,n){const r=ce(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Cd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Q1(t,r)})}function Q1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(lp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),gp(t))}function tv(t,e,n){for(const r of n)r instanceof $1?(t.Ru.addReference(r.key,e),Hk(t,r)):r instanceof H1?(J(mp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Q1(t,r.key)):oe(19791,{wu:r})}function Hk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(mp,"New document in limbo: "+n),t.Eu.add(r),gp(t))}function gp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ne(Re.fromString(e)),r=t.fu.next();t.Au.set(r,new Dk(n)),t.du=t.du.insert(n,r),O1(t.remoteStore,new pr(_n(Zf(n.path)),r,"TargetPurposeLimboResolution",Uu.ce))}}async function da(t,e,n){const r=ce(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){s.push(c);const m=op.As(u.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,c){const d=ce(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(c,_=>B.forEach(_.Es,R=>d.persistence.referenceDelegate.addReference(m,_.targetId,R)).next(()=>B.forEach(_.ds,R=>d.persistence.referenceDelegate.removeReference(m,_.targetId,R)))))}catch(m){if(!xi(m))throw m;J(ap,"Failed to update sequence numbers: "+m)}for(const m of c){const _=m.targetId;if(!m.fromCache){const R=d.Ms.get(_),P=R.snapshotVersion,k=R.withLastLimboFreeSnapshotVersion(P);d.Ms=d.Ms.insert(_,k)}}}(r.localStore,i))}async function qk(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){J(mp,"User change. New user:",e.toKey());const r=await k1(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new X(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await da(n,r.Ls)}}function Wk(t,e){const n=ce(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let s=ge();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function Y1(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=W1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bk.bind(null,e),e.Pu.H_=Pk.bind(null,e.eventManager),e.Pu.yu=kk.bind(null,e.eventManager),e}function Gk(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$k.bind(null,e),e}class cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return XP(this.persistence,new KP,e.initialUser,this.serializer)}Cu(e){return new P1(ip.mi,this.serializer)}Du(e){return new sk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cu.provider={build:()=>new cu};class Kk extends cu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Te(this.persistence.referenceDelegate instanceof lu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new DP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new P1(r=>lu.mi(r,n),this.serializer)}}class Rd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ev(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qk.bind(null,this.syncEngine),await Ak(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Rk}()}createDatastore(e){const n=Gu(e.databaseInfo.databaseId),r=function(i){return new uk(i)}(e.databaseInfo);return function(i,o,l,u){return new fk(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new mk(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ev(this.syncEngine,n,0),function(){return Ky.v()?new Ky:new ik}())}createSyncEngine(e,n){return function(s,i,o,l,u,c,d){const m=new Ok(s,i,o,l,u,c);return d&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ce(s);J(gs,"RemoteStore shutting down."),i.Ea.add(5),await ha(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Rd.provider={build:()=>new Rd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class Qk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J(Mr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(Mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sh(t,e){t.asyncQueue.verifyOperationInProgress(),J(Mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await k1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Yk(t);J(Mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Yy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Yy(e.remoteStore,s)),t._onlineComponents=e}async function Yk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Mr,"Using user provided OfflineComponentProvider");try{await sh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ui("Error using user provided cache. Falling back to memory cache: "+n),await sh(t,new cu)}}else J(Mr,"Using default OfflineComponentProvider"),await sh(t,new Kk(void 0));return t._offlineComponents}async function J1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Mr,"Using user provided OnlineComponentProvider"),await nv(t,t._uninitializedComponentsProvider._online)):(J(Mr,"Using default OnlineComponentProvider"),await nv(t,new Rd))),t._onlineComponents}function Xk(t){return J1(t).then(e=>e.syncEngine)}async function Z1(t){const e=await J1(t),n=e.eventManager;return n.onListen=Vk.bind(null,e.syncEngine),n.onUnlisten=jk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Mk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Uk.bind(null,e.syncEngine),n}function Jk(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const d=new X1({next:_=>{d.Nu(),o.enqueueAndForget(()=>B1(i,m));const R=_.docs.has(l);!R&&_.fromCache?c.reject(new X(U.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&u&&u.source==="server"?c.reject(new X(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(_)},error:_=>c.reject(_)}),m=new z1(Zf(l.path),d,{includeMetadataChanges:!0,qa:!0});return F1(i,m)}(await Z1(t),t.asyncQueue,e,n,r)),r.promise}function Zk(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const d=new X1({next:_=>{d.Nu(),o.enqueueAndForget(()=>B1(i,m)),_.fromCache&&u.source==="server"?c.reject(new X(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(_)},error:_=>c.reject(_)}),m=new z1(l,d,{includeMetadataChanges:!0,qa:!0});return F1(i,m)}(await Z1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="firestore.googleapis.com",sv=!0;class iv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tE,this.ssl=sv}else this.host=e.host,this.ssl=e.ssl??sv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NP)throw new X(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new s2;switch(r.type){case"firstParty":return new l2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rv.get(n);r&&(J("ComponentProvider","Removing Datastore"),rv.delete(n),r.terminate())}(this),Promise.resolve()}}function eN(t,e,n,r={}){var c;t=Wn(t,Yu);const s=_s(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Nf(`https://${l}`),bf("Firestore",!0)),i.host!==tE&&i.host!==l&&ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!ds(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=gt.MOCK_USER;else{d=Y0(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new X(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gt(_)}t._authCredentials=new i2(new Uw(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(aa(n,$e._jsonSchema))return new $e(e,r||null,new ne(Re.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Ke("string",$e._jsonSchemaVersion),referencePath:Ke("string")};class Cr extends Si{constructor(e,n,r){super(e,n,Zf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new ne(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function tN(t,e,...n){if(t=it(t),Fw("collection","path",e),t instanceof Yu){const r=Re.fromString(e,...n);return vy(r),new Cr(t,null,r)}{if(!(t instanceof $e||t instanceof Cr))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return vy(r),new Cr(t.firestore,null,r)}}function Xu(t,e,...n){if(t=it(t),arguments.length===1&&(e=Gf.newId()),Fw("doc","path",e),t instanceof Yu){const r=Re.fromString(e,...n);return yy(r),new $e(t,null,new ne(r))}{if(!(t instanceof $e||t instanceof Cr))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return yy(r),new $e(t.firestore,t instanceof Cr?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="AsyncQueue";class av{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new b1(this,"async_queue_retry"),this._c=()=>{const r=rh();r&&J(ov,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=rh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=rh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new jn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xi(e))throw e;J(ov,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,qn("INTERNAL UNHANDLED ERROR: ",lv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=dp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&oe(47125,{Pc:lv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function lv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class fa extends Yu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new av,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new av(e),this._firestoreClient=void 0,await e}}}function nN(t,e){const n=typeof t=="object"?t:Vf(),r=typeof t=="string"?t:nu,s=Ou(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=G0("firestore");i&&eN(s,...i)}return s}function yp(t){if(t._terminated)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rN(t),t._firestoreClient}function rN(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,c,d){return new S2(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,eE(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Qk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(dt.fromBase64String(e))}catch(n){throw new X(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(aa(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:Ke("string",Ht._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(e){if(aa(e,Tn._jsonSchema))return new Tn(e.latitude,e.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:Ke("string",Tn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(aa(e,xn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new xn(e.vectorValues);throw new X(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xn._jsonSchemaVersion="firestore/vectorValue/1.0",xn._jsonSchema={type:Ke("string",xn._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=/^__.*__$/;class iN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ua(e,this.data,n,this.fieldTransforms)}}class nE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ac:t})}}class vp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rE(this.Ac)&&sN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class oN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gu(e)}Cc(e,n,r,s=!1){return new vp({Ac:e,methodName:n,Dc:r,path:ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _p(t){const e=t._freezeSettings(),n=Gu(t._databaseId);return new oN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Ep("Data must be an object, but it was:",o,r);const l=sE(r,o);let u,c;if(i.merge)u=new Mt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const _=Pd(e,m,n);if(!o.contains(_))throw new X(U.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);oE(d,_)||d.push(_)}u=new Mt(d),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new iN(new Rt(l),u,c)}class ec extends Zu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ec}}class wp extends Zu{_toFieldTransform(e){return new X2(e.path,new Wo)}isEqual(e){return e instanceof wp}}function lN(t,e,n,r){const s=t.Cc(1,e,n);Ep("Data must be an object, but it was:",s,r);const i=[],o=Rt.empty();Br(r,(u,c)=>{const d=Tp(e,u,n);c=it(c);const m=s.yc(d);if(c instanceof ec)i.push(d);else{const _=pa(c,m);_!=null&&(i.push(d),o.set(d,_))}});const l=new Mt(i);return new nE(o,l,s.fieldTransforms)}function uN(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Pd(e,r,n)],u=[s];if(i.length%2!=0)throw new X(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)l.push(Pd(e,i[_])),u.push(i[_+1]);const c=[],d=Rt.empty();for(let _=l.length-1;_>=0;--_)if(!oE(c,l[_])){const R=l[_];let P=u[_];P=it(P);const k=o.yc(R);if(P instanceof ec)c.push(R);else{const N=pa(P,k);N!=null&&(c.push(R),d.set(R,N))}}const m=new Mt(c);return new nE(d,m,o.fieldTransforms)}function cN(t,e,n,r=!1){return pa(n,t.Cc(r?4:3,e))}function pa(t,e){if(iE(t=it(t)))return Ep("Unsupported field value:",e,t),sE(t,e);if(t instanceof Zu)return function(r,s){if(!rE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=pa(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ee.fromDate(r);return{timestampValue:au(s.serializer,i)}}if(r instanceof Ee){const i=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(s.serializer,i)}}if(r instanceof Tn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ht)return{bytesValue:E1(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xn)return function(o,l){return{mapValue:{fields:{[Qw]:{stringValue:Yw},[ru]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return ep(l.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ju(r)}`)}(t,e)}function sE(t,e){const n={};return $w(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(t,(r,s)=>{const i=pa(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof Tn||t instanceof Ht||t instanceof $e||t instanceof Zu||t instanceof xn)}function Ep(t,e,n){if(!iE(n)||!Bw(n)){const r=ju(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Pd(t,e,n){if((e=it(e))instanceof Ju)return e._internalPath;if(typeof e=="string")return Tp(t,e);throw hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const hN=new RegExp("[~\\*/\\[\\]]");function Tp(t,e,n){if(e.search(hN)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ju(...e.split("."))._internalPath}catch{throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new X(U.INVALID_ARGUMENT,l+t+u)}function oE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dN extends aE{data(){return super.data()}}function xp(t,e){return typeof e=="string"?Tp(t,e):e instanceof Ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class pN extends Ip{}function mN(t,e,...n){let r=[];e instanceof Ip&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Sp).length,l=i.filter(u=>u instanceof tc).length;if(o>1||o>0&&l>0)throw new X(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tc extends pN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tc(e,n,r)}_apply(e){const n=this._parse(e);return lE(e._query,n),new Si(e.firestore,e.converter,vd(e._query,n))}_parse(e){const n=_p(e.firestore);return function(i,o,l,u,c,d,m){let _;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){cv(m,d);const P=[];for(const k of m)P.push(uv(u,i,k));_={arrayValue:{values:P}}}else _=uv(u,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||cv(m,d),_=cN(l,o,m,d==="in"||d==="not-in");return Ge.create(c,d,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gN(t,e,n){const r=e,s=xp("where",t);return tc._create(s,r,n)}class Sp extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)lE(o,u),o=vd(o,u)}(e._query,n),new Si(e.firestore,e.converter,vd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function uv(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new X(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s1(e)&&n.indexOf("/")!==-1)throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!ne.isDocumentKey(r))throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ay(t,new ne(r))}if(n instanceof $e)return Ay(t,n._key);throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ju(n)}.`)}function cv(t,e){if(!Array.isArray(t)||t.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lE(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yN{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Br(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ru].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Be(o.doubleValue));return new xn(n)}convertGeoPoint(e){return new Tn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($o(e));default:return null}}convertTimestamp(e){const n=br(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);Te(C1(r),9688,{name:e});const s=new Ho(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class so{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class os extends aE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new El(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=os._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}os._jsonSchemaVersion="firestore/documentSnapshot/1.0",os._jsonSchema={type:Ke("string",os._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class El extends os{data(e={}){return super.data(e)}}class ei{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new so(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new El(this._firestore,this._userDataWriter,r.key,r,new so(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new El(s._firestore,s._userDataWriter,l.doc.key,l.doc,new so(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new El(s._firestore,s._userDataWriter,l.doc.key,l.doc,new so(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:_N(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ei._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _N(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){t=Wn(t,$e);const e=Wn(t.firestore,fa);return Jk(yp(e),t._key).then(n=>TN(e,t,n))}ei._jsonSchemaVersion="firestore/querySnapshot/1.0",ei._jsonSchema={type:Ke("string",ei._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class uE extends yN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function wN(t){t=Wn(t,Si);const e=Wn(t.firestore,fa),n=yp(e),r=new uE(e);return fN(t._query),Zk(n,t._query).then(s=>new ei(e,r,t,s))}function EN(t,e,n){t=Wn(t,$e);const r=Wn(t.firestore,fa),s=vN(t.converter,e);return hE(r,[aN(_p(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,wn.none())])}function cE(t,e,n,...r){t=Wn(t,$e);const s=Wn(t.firestore,fa),i=_p(s);let o;return o=typeof(e=it(e))=="string"||e instanceof Ju?uN(i,"updateDoc",t._key,e,n,r):lN(i,"updateDoc",t._key,e),hE(s,[o.toMutation(t._key,wn.exists(!0))])}function hE(t,e){return function(r,s){const i=new jn;return r.asyncQueue.enqueueAndForget(async()=>Fk(await Xk(r),s,i)),i.promise}(yp(t),e)}function TN(t,e,n){const r=n.docs.get(e._key),s=new uE(t);return new os(t,s,e._key,r,new so(n.hasPendingWrites,n.fromCache),e.converter)}function fu(){return new wp("serverTimestamp")}(function(e,n=!0){(function(s){Ei=s})(ws),fs(new kr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new fa(new o2(r.getProvider("auth-internal")),new u2(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yn(fy,py,e),yn(fy,py,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="firebasestorage.googleapis.com",xN="storageBucket",IN=2*60*1e3,SN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends Cn{constructor(e,n,r=0){super(ih(e),`Firebase Storage: ${n} (${ih(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ih(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var An;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(An||(An={}));function ih(t){return"storage/"+t}function AN(){const t="An unknown error occurred, please check the error payload for server response.";return new Rn(An.UNKNOWN,t)}function CN(){return new Rn(An.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RN(){return new Rn(An.CANCELED,"User canceled the upload/download.")}function PN(t){return new Rn(An.INVALID_URL,"Invalid URL '"+t+"'.")}function kN(t){return new Rn(An.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hv(t){return new Rn(An.INVALID_ARGUMENT,t)}function fE(){return new Rn(An.APP_DELETED,"The Firebase app was deleted.")}function NN(t){return new Rn(An.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=en.makeFromUrl(e,n)}catch{return new en(e,"")}if(r.path==="")return r;throw kN(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",R=new RegExp(`^https?://${m}/${d}/b/${s}/o${_}`,"i"),P={bucket:1,path:3},k=n===dE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",A=new RegExp(`^https?://${k}/${s}/${N}`,"i"),C=[{regex:l,indices:u,postModify:i},{regex:R,indices:P,postModify:c},{regex:A,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<C.length;O++){const D=C[O],V=D.regex.exec(e);if(V){const T=V[D.indices.bucket];let y=V[D.indices.path];y||(y=""),r=new en(T,y),D.postModify(r);break}}if(r==null)throw PN(e);return r}}class bN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let c=!1;function d(...N){c||(c=!0,e.apply(null,N))}function m(N){s=setTimeout(()=>{s=null,t(R,u())},N)}function _(){i&&clearTimeout(i)}function R(N,...A){if(c){_();return}if(N){_(),d.call(null,N,...A);return}if(u()||o){_(),d.call(null,N,...A);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,m(C)}let P=!1;function k(N){P||(P=!0,_(),!c&&(s!==null?(N||(l=2),clearTimeout(s),m(0)):N||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function ON(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){return t!==void 0}function dv(t,e,n,r){if(r<e)throw hv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hv(`Invalid value for '${t}'. Expected ${n} or less.`)}function MN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var pu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(pu||(pu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r,s,i,o,l,u,c,d,m,_=!0,R=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=m,this.retry=_,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,k)=>{this.resolve_=P,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ja(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===pu.NO_ERROR,u=i.getStatus();if(!l||LN(u,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===pu.ABORT;r(!1,new Ja(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Ja(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());VN(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=AN();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?fE():RN();o(u)}else{const u=CN();o(u)}};this.canceled_?n(!1,new Ja(!1,null,!0)):this.backoffId_=DN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ON(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ja{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function FN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $N(t,e,n,r,s,i,o=!0,l=!1){const u=MN(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return BN(d,e),UN(d,n),FN(d,i),zN(d,r),new jN(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this._service=e,n instanceof en?this._location=n:this._location=en.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mu(e,n)}get root(){const e=new en(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qN(this._location.path)}get storage(){return this._service}get parent(){const e=HN(this._location.path);if(e===null)return null;const n=new en(this._location.bucket,e);return new mu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw NN(e)}}function fv(t,e){const n=e==null?void 0:e[xN];return n==null?null:en.makeFromBucketSpec(n,t)}function WN(t,e,n,r={}){t.host=`${e}:${n}`;const s=_s(e);s&&(Nf(`https://${t.host}/b`),bf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Y0(i,t.app.options.projectId))}class GN{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=dE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=IN,this._maxUploadRetryTime=SN,this._requests=new Set,s!=null?this._bucket=en.makeFromBucketSpec(s,this._host):this._bucket=fv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=en.makeFromBucketSpec(this._url,e):this._bucket=fv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new bN(fE());{const o=$N(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const pv="@firebase/storage",mv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="storage";function KN(t=Vf(),e){t=it(t);const r=Ou(t,pE).getImmediate({identifier:e}),s=G0("storage");return s&&QN(r,...s),r}function QN(t,e,n,r={}){WN(t,e,n,r)}function YN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new GN(n,r,s,e,ws)}function XN(){fs(new kr(pE,YN,"PUBLIC").setMultipleInstances(!0)),yn(pv,mv,""),yn(pv,mv,"esm2020")}XN();const JN={apiKey:"AIzaSyDYHmMD0BQHxxPR4Anzx4ZmZpFTgcs6RBQ",authDomain:"innovitech-tools.firebaseapp.com",databaseURL:"https://innovitech-tools-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"innovitech-tools",storageBucket:"innovitech-tools.firebasestorage.app",messagingSenderId:"229701728021",appId:"1:229701728021:web:614906807f7ee0dcf1db1c"},Ap=Z0(JN),oh=e2(Ap),ma=nN(Ap);KN(Ap);const ZN=new bn,mE=G.createContext(void 0);function eb({children:t}){const[e,n]=G.useState(null),[r,s]=G.useState(!0);G.useEffect(()=>zC(oh,u=>{n(u),s(!1)}),[]);const i=async()=>{try{await uR(oh,ZN)}catch(l){throw console.error("Error signing in with Google:",l),l}},o=async()=>{try{await $C(oh)}catch(l){throw console.error("Error signing out:",l),l}};return f.jsx(mE.Provider,{value:{user:e,loading:r,signInWithGoogle:i,signOut:o},children:t})}function nc(){const t=G.useContext(mE);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function tb(){const{user:t,signInWithGoogle:e,loading:n}=nc(),r=ta();G.useEffect(()=>{t&&r("/dashboard")},[t,r]);const s=async()=>{try{await e(),r("/dashboard")}catch(i){console.error("Error signing in:",i),alert("Failed to sign in. Please try again.")}};return n?f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:f.jsxs("div",{className:"text-white text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),f.jsx("p",{children:"Loading..."})]})}):f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center px-4",children:f.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"text-6xl mb-4",children:""}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"QR Menu Studio"}),f.jsx("p",{className:"text-gray-600",children:"Create beautiful digital menus for your restaurant"})]}),f.jsx("div",{className:"space-y-4",children:f.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[f.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),f.jsx("span",{className:"text-gray-700 font-medium",children:"Continue with Google"})]})}),f.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[f.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Features:"}),f.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-green-500 mt-0.5",children:""}),f.jsx("span",{children:"Choose from 5 beautiful templates"})]}),f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-green-500 mt-0.5",children:""}),f.jsx("span",{children:"Generate QR codes for your menus"})]}),f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-green-500 mt-0.5",children:""}),f.jsx("span",{children:"Edit and update anytime"})]}),f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-green-500 mt-0.5",children:""}),f.jsx("span",{children:"Mobile-friendly viewing experience"})]})]})]})]})})}function nb(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function rb(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}async function sb(t,e){const n=nb(),r=rb(),s={id:n,editKey:r,userId:e,restaurantName:t.restaurantName||"My Restaurant",logoUrl:t.logoUrl,themeColor:t.themeColor||"#0082FF",currency:t.currency||"MVR",template:t.template||"elegant-minimal",sections:t.sections||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await EN(Xu(ma,"menus",n),{...s,createdAt:fu(),updatedAt:fu()}),s}async function ib(t,e,n){const r=Xu(ma,"menus",t),s=await du(r);if(!s.exists())throw new Error("Menu not found");if(s.data().userId!==n)throw new Error("Unauthorized: You do not own this menu");const o={...e,updatedAt:fu()};await cE(r,o);const u=(await du(r)).data();if(!u)throw new Error("Menu not found after update");return{...u,createdAt:u.createdAt instanceof Ee?u.createdAt.toDate().toISOString():u.createdAt,updatedAt:u.updatedAt instanceof Ee?u.updatedAt.toDate().toISOString():u.updatedAt}}async function gE(t){const e=Xu(ma,"menus",t),n=await du(e);if(!n.exists())return null;const r=n.data();return{...r,createdAt:r.createdAt instanceof Ee?r.createdAt.toDate().toISOString():r.createdAt,updatedAt:r.updatedAt instanceof Ee?r.updatedAt.toDate().toISOString():r.updatedAt}}async function ob(t){const e=tN(ma,"menus"),n=mN(e,gN("userId","==",t));return(await wN(n)).docs.map(s=>{const i=s.data();return{...i,createdAt:i.createdAt instanceof Ee?i.createdAt.toDate().toISOString():i.createdAt,updatedAt:i.updatedAt instanceof Ee?i.updatedAt.toDate().toISOString():i.updatedAt}})}async function ab(t,e){const n=Xu(ma,"menus",t),r=await du(n);if(!r.exists())throw new Error("Menu not found");if(r.data().userId!==e)throw new Error("Unauthorized: You do not own this menu");await cE(n,{deleted:!0,deletedAt:fu()})}const yE="qr_last_edited_menu";function lb(t){localStorage.setItem(yE,JSON.stringify(t))}function ub(){localStorage.removeItem(yE)}function cb(){const{user:t,signOut:e}=nc(),n=ta(),[r,s]=G.useState([]),[i,o]=G.useState(!0);G.useEffect(()=>{if(!t){n("/");return}l()},[t,n]);const l=async()=>{if(t)try{o(!0);const d=await ob(t.uid);s(d.filter(m=>!m.deleted))}catch(d){console.error("Error loading menus:",d)}finally{o(!1)}},u=async d=>{if(t&&confirm("Are you sure you want to delete this menu?"))try{await ab(d,t.uid),s(r.filter(m=>m.id!==d))}catch(m){console.error("Error deleting menu:",m),alert("Failed to delete menu")}},c=async()=>{try{await e(),n("/")}catch(d){console.error("Error signing out:",d)}};return i?f.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),f.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading your menus..."})]})}):f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[f.jsx("div",{className:"bg-white dark:bg-gray-800 shadow",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"QR Menu Studio"}),t&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("img",{src:t.photoURL||"",alt:t.displayName||"",className:"w-8 h-8 rounded-full"}),f.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.displayName})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(qa,{to:"/creator",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"+ Create New Menu"}),f.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Sign Out"})]})]})})}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-6xl mb-4",children:""}),f.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No menus yet"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first menu to get started"}),f.jsx(qa,{to:"/creator",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Menu"})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(d=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[d.logoUrl&&f.jsx("div",{className:"h-32 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",style:{backgroundColor:d.themeColor},children:f.jsx("img",{src:d.logoUrl,alt:d.restaurantName,className:"h-20 w-20 rounded-full object-cover border-4 border-white"})}),!d.logoUrl&&f.jsx("div",{className:"h-32 flex items-center justify-center",style:{backgroundColor:d.themeColor},children:f.jsx("span",{className:"text-4xl text-white font-bold",children:d.restaurantName.charAt(0).toUpperCase()})}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:d.restaurantName}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["Template: ",f.jsx("span",{className:"capitalize",children:d.template.replace("-"," ")})]}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[d.sections.length," section",d.sections.length!==1?"s":"","  "," ",d.sections.reduce((m,_)=>m+_.items.length,0)," items"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(qa,{to:`/m/${d.id}`,target:"_blank",className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-center text-sm",children:"View"}),f.jsx(qa,{to:`/edit/${d.id}`,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-center text-sm",children:"Edit"}),f.jsx("button",{onClick:()=>u(d.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Delete"})]})]})]},d.id))})})]})}var vE={exports:{}};(function(t,e){var n=function(){var r=function(D,V){var T=236,y=17,v=D,I=i[V],E=null,g=0,w=null,L=[],$={},ie=function(F,z){g=v*4+17,E=function(j){for(var H=new Array(j),q=0;q<j;q+=1){H[q]=new Array(j);for(var Y=0;Y<j;Y+=1)H[q][Y]=null}return H}(g),he(0,0),he(g-7,0),he(0,g-7),te(),Z(),we(F,z),v>=7&&ye(F),w==null&&(w=Pn(v,I,L)),ot(w,z)},he=function(F,z){for(var j=-1;j<=7;j+=1)if(!(F+j<=-1||g<=F+j))for(var H=-1;H<=7;H+=1)z+H<=-1||g<=z+H||(0<=j&&j<=6&&(H==0||H==6)||0<=H&&H<=6&&(j==0||j==6)||2<=j&&j<=4&&2<=H&&H<=4?E[F+j][z+H]=!0:E[F+j][z+H]=!1)},W=function(){for(var F=0,z=0,j=0;j<8;j+=1){ie(!0,j);var H=l.getLostPoint($);(j==0||F>H)&&(F=H,z=j)}return z},Z=function(){for(var F=8;F<g-8;F+=1)E[F][6]==null&&(E[F][6]=F%2==0);for(var z=8;z<g-8;z+=1)E[6][z]==null&&(E[6][z]=z%2==0)},te=function(){for(var F=l.getPatternPosition(v),z=0;z<F.length;z+=1)for(var j=0;j<F.length;j+=1){var H=F[z],q=F[j];if(E[H][q]==null)for(var Y=-2;Y<=2;Y+=1)for(var se=-2;se<=2;se+=1)Y==-2||Y==2||se==-2||se==2||Y==0&&se==0?E[H+Y][q+se]=!0:E[H+Y][q+se]=!1}},ye=function(F){for(var z=l.getBCHTypeNumber(v),j=0;j<18;j+=1){var H=!F&&(z>>j&1)==1;E[Math.floor(j/3)][j%3+g-8-3]=H}for(var j=0;j<18;j+=1){var H=!F&&(z>>j&1)==1;E[j%3+g-8-3][Math.floor(j/3)]=H}},we=function(F,z){for(var j=I<<3|z,H=l.getBCHTypeInfo(j),q=0;q<15;q+=1){var Y=!F&&(H>>q&1)==1;q<6?E[q][8]=Y:q<8?E[q+1][8]=Y:E[g-15+q][8]=Y}for(var q=0;q<15;q+=1){var Y=!F&&(H>>q&1)==1;q<8?E[8][g-q-1]=Y:q<9?E[8][15-q-1+1]=Y:E[8][15-q-1]=Y}E[g-8][8]=!F},ot=function(F,z){for(var j=-1,H=g-1,q=7,Y=0,se=l.getMaskFunction(z),re=g-1;re>0;re-=2)for(re==6&&(re-=1);;){for(var xe=0;xe<2;xe+=1)if(E[H][re-xe]==null){var Oe=!1;Y<F.length&&(Oe=(F[Y]>>>q&1)==1);var ae=se(H,re-xe);ae&&(Oe=!Oe),E[H][re-xe]=Oe,q-=1,q==-1&&(Y+=1,q=7)}if(H+=j,H<0||g<=H){H-=j,j=-j;break}}},Qe=function(F,z){for(var j=0,H=0,q=0,Y=new Array(z.length),se=new Array(z.length),re=0;re<z.length;re+=1){var xe=z[re].dataCount,Oe=z[re].totalCount-xe;H=Math.max(H,xe),q=Math.max(q,Oe),Y[re]=new Array(xe);for(var ae=0;ae<Y[re].length;ae+=1)Y[re][ae]=255&F.getBuffer()[ae+j];j+=xe;var Ie=l.getErrorCorrectPolynomial(Oe),Ae=c(Y[re],Ie.getLength()-1),$r=Ae.mod(Ie);se[re]=new Array(Ie.getLength()-1);for(var ae=0;ae<se[re].length;ae+=1){var ga=ae+$r.getLength()-se[re].length;se[re][ae]=ga>=0?$r.getAt(ga):0}}for(var Ai=0,ae=0;ae<z.length;ae+=1)Ai+=z[ae].totalCount;for(var Ci=new Array(Ai),ln=0,ae=0;ae<H;ae+=1)for(var re=0;re<z.length;re+=1)ae<Y[re].length&&(Ci[ln]=Y[re][ae],ln+=1);for(var ae=0;ae<q;ae+=1)for(var re=0;re<z.length;re+=1)ae<se[re].length&&(Ci[ln]=se[re][ae],ln+=1);return Ci},Pn=function(F,z,j){for(var H=d.getRSBlocks(F,z),q=m(),Y=0;Y<j.length;Y+=1){var se=j[Y];q.put(se.getMode(),4),q.put(se.getLength(),l.getLengthInBits(se.getMode(),F)),se.write(q)}for(var re=0,Y=0;Y<H.length;Y+=1)re+=H[Y].dataCount;if(q.getLengthInBits()>re*8)throw"code length overflow. ("+q.getLengthInBits()+">"+re*8+")";for(q.getLengthInBits()+4<=re*8&&q.put(0,4);q.getLengthInBits()%8!=0;)q.putBit(!1);for(;!(q.getLengthInBits()>=re*8||(q.put(T,8),q.getLengthInBits()>=re*8));)q.put(y,8);return Qe(q,H)};$.addData=function(F,z){z=z||"Byte";var j=null;switch(z){case"Numeric":j=_(F);break;case"Alphanumeric":j=R(F);break;case"Byte":j=P(F);break;case"Kanji":j=k(F);break;default:throw"mode:"+z}L.push(j),w=null},$.isDark=function(F,z){if(F<0||g<=F||z<0||g<=z)throw F+","+z;return E[F][z]},$.getModuleCount=function(){return g},$.make=function(){if(v<1){for(var F=1;F<40;F++){for(var z=d.getRSBlocks(F,I),j=m(),H=0;H<L.length;H++){var q=L[H];j.put(q.getMode(),4),j.put(q.getLength(),l.getLengthInBits(q.getMode(),F)),q.write(j)}for(var Y=0,H=0;H<z.length;H++)Y+=z[H].dataCount;if(j.getLengthInBits()<=Y*8)break}v=F}ie(!1,W())},$.createTableTag=function(F,z){F=F||2,z=typeof z>"u"?F*4:z;var j="";j+='<table style="',j+=" border-width: 0px; border-style: none;",j+=" border-collapse: collapse;",j+=" padding: 0px; margin: "+z+"px;",j+='">',j+="<tbody>";for(var H=0;H<$.getModuleCount();H+=1){j+="<tr>";for(var q=0;q<$.getModuleCount();q+=1)j+='<td style="',j+=" border-width: 0px; border-style: none;",j+=" border-collapse: collapse;",j+=" padding: 0px; margin: 0px;",j+=" width: "+F+"px;",j+=" height: "+F+"px;",j+=" background-color: ",j+=$.isDark(H,q)?"#000000":"#ffffff",j+=";",j+='"/>';j+="</tr>"}return j+="</tbody>",j+="</table>",j},$.createSvgTag=function(F,z,j,H){var q={};typeof arguments[0]=="object"&&(q=arguments[0],F=q.cellSize,z=q.margin,j=q.alt,H=q.title),F=F||2,z=typeof z>"u"?F*4:z,j=typeof j=="string"?{text:j}:j||{},j.text=j.text||null,j.id=j.text?j.id||"qrcode-description":null,H=typeof H=="string"?{text:H}:H||{},H.text=H.text||null,H.id=H.text?H.id||"qrcode-title":null;var Y=$.getModuleCount()*F+z*2,se,re,xe,Oe,ae="",Ie;for(Ie="l"+F+",0 0,"+F+" -"+F+",0 0,-"+F+"z ",ae+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ae+=q.scalable?"":' width="'+Y+'px" height="'+Y+'px"',ae+=' viewBox="0 0 '+Y+" "+Y+'" ',ae+=' preserveAspectRatio="xMinYMin meet"',ae+=H.text||j.text?' role="img" aria-labelledby="'+et([H.id,j.id].join(" ").trim())+'"':"",ae+=">",ae+=H.text?'<title id="'+et(H.id)+'">'+et(H.text)+"</title>":"",ae+=j.text?'<description id="'+et(j.id)+'">'+et(j.text)+"</description>":"",ae+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ae+='<path d="',xe=0;xe<$.getModuleCount();xe+=1)for(Oe=xe*F+z,se=0;se<$.getModuleCount();se+=1)$.isDark(xe,se)&&(re=se*F+z,ae+="M"+re+","+Oe+Ie);return ae+='" stroke="transparent" fill="black"/>',ae+="</svg>",ae},$.createDataURL=function(F,z){F=F||2,z=typeof z>"u"?F*4:z;var j=$.getModuleCount()*F+z*2,H=z,q=j-z;return O(j,j,function(Y,se){if(H<=Y&&Y<q&&H<=se&&se<q){var re=Math.floor((Y-H)/F),xe=Math.floor((se-H)/F);return $.isDark(xe,re)?0:1}else return 1})},$.createImgTag=function(F,z,j){F=F||2,z=typeof z>"u"?F*4:z;var H=$.getModuleCount()*F+z*2,q="";return q+="<img",q+=' src="',q+=$.createDataURL(F,z),q+='"',q+=' width="',q+=H,q+='"',q+=' height="',q+=H,q+='"',j&&(q+=' alt="',q+=et(j),q+='"'),q+="/>",q};var et=function(F){for(var z="",j=0;j<F.length;j+=1){var H=F.charAt(j);switch(H){case"<":z+="&lt;";break;case">":z+="&gt;";break;case"&":z+="&amp;";break;case'"':z+="&quot;";break;default:z+=H;break}}return z},an=function(F){var z=1;F=typeof F>"u"?z*2:F;var j=$.getModuleCount()*z+F*2,H=F,q=j-F,Y,se,re,xe,Oe,ae={"":""," ":""," ":"","  ":" "},Ie={"":""," ":""," ":" ","  ":" "},Ae="";for(Y=0;Y<j;Y+=2){for(re=Math.floor((Y-H)/z),xe=Math.floor((Y+1-H)/z),se=0;se<j;se+=1)Oe="",H<=se&&se<q&&H<=Y&&Y<q&&$.isDark(re,Math.floor((se-H)/z))&&(Oe=" "),H<=se&&se<q&&H<=Y+1&&Y+1<q&&$.isDark(xe,Math.floor((se-H)/z))?Oe+=" ":Oe+="",Ae+=F<1&&Y+1>=q?Ie[Oe]:ae[Oe];Ae+=`
`}return j%2&&F>0?Ae.substring(0,Ae.length-j-1)+Array(j+1).join(""):Ae.substring(0,Ae.length-1)};return $.createASCII=function(F,z){if(F=F||1,F<2)return an(z);F-=1,z=typeof z>"u"?F*2:z;var j=$.getModuleCount()*F+z*2,H=z,q=j-z,Y,se,re,xe,Oe=Array(F+1).join(""),ae=Array(F+1).join("  "),Ie="",Ae="";for(Y=0;Y<j;Y+=1){for(re=Math.floor((Y-H)/F),Ae="",se=0;se<j;se+=1)xe=1,H<=se&&se<q&&H<=Y&&Y<q&&$.isDark(re,Math.floor((se-H)/F))&&(xe=0),Ae+=xe?Oe:ae;for(re=0;re<F;re+=1)Ie+=Ae+`
`}return Ie.substring(0,Ie.length-1)},$.renderTo2dContext=function(F,z){z=z||2;for(var j=$.getModuleCount(),H=0;H<j;H++)for(var q=0;q<j;q++)F.fillStyle=$.isDark(H,q)?"black":"white",F.fillRect(H*z,q*z,z,z)},$};r.stringToBytesFuncs={default:function(D){for(var V=[],T=0;T<D.length;T+=1){var y=D.charCodeAt(T);V.push(y&255)}return V}},r.stringToBytes=r.stringToBytesFuncs.default,r.createStringToBytes=function(D,V){var T=function(){for(var v=S(D),I=function(){var Z=v.read();if(Z==-1)throw"eof";return Z},E=0,g={};;){var w=v.read();if(w==-1)break;var L=I(),$=I(),ie=I(),he=String.fromCharCode(w<<8|L),W=$<<8|ie;g[he]=W,E+=1}if(E!=V)throw E+" != "+V;return g}(),y=63;return function(v){for(var I=[],E=0;E<v.length;E+=1){var g=v.charCodeAt(E);if(g<128)I.push(g);else{var w=T[v.charAt(E)];typeof w=="number"?(w&255)==w?I.push(w):(I.push(w>>>8),I.push(w&255)):I.push(y)}}return I}};var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l=function(){var D=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],V=1335,T=7973,y=21522,v={},I=function(E){for(var g=0;E!=0;)g+=1,E>>>=1;return g};return v.getBCHTypeInfo=function(E){for(var g=E<<10;I(g)-I(V)>=0;)g^=V<<I(g)-I(V);return(E<<10|g)^y},v.getBCHTypeNumber=function(E){for(var g=E<<12;I(g)-I(T)>=0;)g^=T<<I(g)-I(T);return E<<12|g},v.getPatternPosition=function(E){return D[E-1]},v.getMaskFunction=function(E){switch(E){case o.PATTERN000:return function(g,w){return(g+w)%2==0};case o.PATTERN001:return function(g,w){return g%2==0};case o.PATTERN010:return function(g,w){return w%3==0};case o.PATTERN011:return function(g,w){return(g+w)%3==0};case o.PATTERN100:return function(g,w){return(Math.floor(g/2)+Math.floor(w/3))%2==0};case o.PATTERN101:return function(g,w){return g*w%2+g*w%3==0};case o.PATTERN110:return function(g,w){return(g*w%2+g*w%3)%2==0};case o.PATTERN111:return function(g,w){return(g*w%3+(g+w)%2)%2==0};default:throw"bad maskPattern:"+E}},v.getErrorCorrectPolynomial=function(E){for(var g=c([1],0),w=0;w<E;w+=1)g=g.multiply(c([1,u.gexp(w)],0));return g},v.getLengthInBits=function(E,g){if(1<=g&&g<10)switch(E){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw"mode:"+E}else if(g<27)switch(E){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw"mode:"+E}else if(g<41)switch(E){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw"mode:"+E}else throw"type:"+g},v.getLostPoint=function(E){for(var g=E.getModuleCount(),w=0,L=0;L<g;L+=1)for(var $=0;$<g;$+=1){for(var ie=0,he=E.isDark(L,$),W=-1;W<=1;W+=1)if(!(L+W<0||g<=L+W))for(var Z=-1;Z<=1;Z+=1)$+Z<0||g<=$+Z||W==0&&Z==0||he==E.isDark(L+W,$+Z)&&(ie+=1);ie>5&&(w+=3+ie-5)}for(var L=0;L<g-1;L+=1)for(var $=0;$<g-1;$+=1){var te=0;E.isDark(L,$)&&(te+=1),E.isDark(L+1,$)&&(te+=1),E.isDark(L,$+1)&&(te+=1),E.isDark(L+1,$+1)&&(te+=1),(te==0||te==4)&&(w+=3)}for(var L=0;L<g;L+=1)for(var $=0;$<g-6;$+=1)E.isDark(L,$)&&!E.isDark(L,$+1)&&E.isDark(L,$+2)&&E.isDark(L,$+3)&&E.isDark(L,$+4)&&!E.isDark(L,$+5)&&E.isDark(L,$+6)&&(w+=40);for(var $=0;$<g;$+=1)for(var L=0;L<g-6;L+=1)E.isDark(L,$)&&!E.isDark(L+1,$)&&E.isDark(L+2,$)&&E.isDark(L+3,$)&&E.isDark(L+4,$)&&!E.isDark(L+5,$)&&E.isDark(L+6,$)&&(w+=40);for(var ye=0,$=0;$<g;$+=1)for(var L=0;L<g;L+=1)E.isDark(L,$)&&(ye+=1);var we=Math.abs(100*ye/g/g-50)/5;return w+=we*10,w},v}(),u=function(){for(var D=new Array(256),V=new Array(256),T=0;T<8;T+=1)D[T]=1<<T;for(var T=8;T<256;T+=1)D[T]=D[T-4]^D[T-5]^D[T-6]^D[T-8];for(var T=0;T<255;T+=1)V[D[T]]=T;var y={};return y.glog=function(v){if(v<1)throw"glog("+v+")";return V[v]},y.gexp=function(v){for(;v<0;)v+=255;for(;v>=256;)v-=255;return D[v]},y}();function c(D,V){if(typeof D.length>"u")throw D.length+"/"+V;var T=function(){for(var v=0;v<D.length&&D[v]==0;)v+=1;for(var I=new Array(D.length-v+V),E=0;E<D.length-v;E+=1)I[E]=D[E+v];return I}(),y={};return y.getAt=function(v){return T[v]},y.getLength=function(){return T.length},y.multiply=function(v){for(var I=new Array(y.getLength()+v.getLength()-1),E=0;E<y.getLength();E+=1)for(var g=0;g<v.getLength();g+=1)I[E+g]^=u.gexp(u.glog(y.getAt(E))+u.glog(v.getAt(g)));return c(I,0)},y.mod=function(v){if(y.getLength()-v.getLength()<0)return y;for(var I=u.glog(y.getAt(0))-u.glog(v.getAt(0)),E=new Array(y.getLength()),g=0;g<y.getLength();g+=1)E[g]=y.getAt(g);for(var g=0;g<v.getLength();g+=1)E[g]^=u.gexp(u.glog(v.getAt(g))+I);return c(E,0).mod(v)},y}var d=function(){var D=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],V=function(v,I){var E={};return E.totalCount=v,E.dataCount=I,E},T={},y=function(v,I){switch(I){case i.L:return D[(v-1)*4+0];case i.M:return D[(v-1)*4+1];case i.Q:return D[(v-1)*4+2];case i.H:return D[(v-1)*4+3];default:return}};return T.getRSBlocks=function(v,I){var E=y(v,I);if(typeof E>"u")throw"bad rs block @ typeNumber:"+v+"/errorCorrectionLevel:"+I;for(var g=E.length/3,w=[],L=0;L<g;L+=1)for(var $=E[L*3+0],ie=E[L*3+1],he=E[L*3+2],W=0;W<$;W+=1)w.push(V(ie,he));return w},T}(),m=function(){var D=[],V=0,T={};return T.getBuffer=function(){return D},T.getAt=function(y){var v=Math.floor(y/8);return(D[v]>>>7-y%8&1)==1},T.put=function(y,v){for(var I=0;I<v;I+=1)T.putBit((y>>>v-I-1&1)==1)},T.getLengthInBits=function(){return V},T.putBit=function(y){var v=Math.floor(V/8);D.length<=v&&D.push(0),y&&(D[v]|=128>>>V%8),V+=1},T},_=function(D){var V=s.MODE_NUMBER,T=D,y={};y.getMode=function(){return V},y.getLength=function(E){return T.length},y.write=function(E){for(var g=T,w=0;w+2<g.length;)E.put(v(g.substring(w,w+3)),10),w+=3;w<g.length&&(g.length-w==1?E.put(v(g.substring(w,w+1)),4):g.length-w==2&&E.put(v(g.substring(w,w+2)),7))};var v=function(E){for(var g=0,w=0;w<E.length;w+=1)g=g*10+I(E.charAt(w));return g},I=function(E){if("0"<=E&&E<="9")return E.charCodeAt(0)-48;throw"illegal char :"+E};return y},R=function(D){var V=s.MODE_ALPHA_NUM,T=D,y={};y.getMode=function(){return V},y.getLength=function(I){return T.length},y.write=function(I){for(var E=T,g=0;g+1<E.length;)I.put(v(E.charAt(g))*45+v(E.charAt(g+1)),11),g+=2;g<E.length&&I.put(v(E.charAt(g)),6)};var v=function(I){if("0"<=I&&I<="9")return I.charCodeAt(0)-48;if("A"<=I&&I<="Z")return I.charCodeAt(0)-65+10;switch(I){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+I}};return y},P=function(D){var V=s.MODE_8BIT_BYTE,T=r.stringToBytes(D),y={};return y.getMode=function(){return V},y.getLength=function(v){return T.length},y.write=function(v){for(var I=0;I<T.length;I+=1)v.put(T[I],8)},y},k=function(D){var V=s.MODE_KANJI,T=r.stringToBytesFuncs.SJIS;if(!T)throw"sjis not supported.";(function(I,E){var g=T(I);if(g.length!=2||(g[0]<<8|g[1])!=E)throw"sjis not supported."})("",38726);var y=T(D),v={};return v.getMode=function(){return V},v.getLength=function(I){return~~(y.length/2)},v.write=function(I){for(var E=y,g=0;g+1<E.length;){var w=(255&E[g])<<8|255&E[g+1];if(33088<=w&&w<=40956)w-=33088;else if(57408<=w&&w<=60351)w-=49472;else throw"illegal char at "+(g+1)+"/"+w;w=(w>>>8&255)*192+(w&255),I.put(w,13),g+=2}if(g<E.length)throw"illegal char at "+(g+1)},v},N=function(){var D=[],V={};return V.writeByte=function(T){D.push(T&255)},V.writeShort=function(T){V.writeByte(T),V.writeByte(T>>>8)},V.writeBytes=function(T,y,v){y=y||0,v=v||T.length;for(var I=0;I<v;I+=1)V.writeByte(T[I+y])},V.writeString=function(T){for(var y=0;y<T.length;y+=1)V.writeByte(T.charCodeAt(y))},V.toByteArray=function(){return D},V.toString=function(){var T="";T+="[";for(var y=0;y<D.length;y+=1)y>0&&(T+=","),T+=D[y];return T+="]",T},V},A=function(){var D=0,V=0,T=0,y="",v={},I=function(g){y+=String.fromCharCode(E(g&63))},E=function(g){if(!(g<0)){if(g<26)return 65+g;if(g<52)return 97+(g-26);if(g<62)return 48+(g-52);if(g==62)return 43;if(g==63)return 47}throw"n:"+g};return v.writeByte=function(g){for(D=D<<8|g&255,V+=8,T+=1;V>=6;)I(D>>>V-6),V-=6},v.flush=function(){if(V>0&&(I(D<<6-V),D=0,V=0),T%3!=0)for(var g=3-T%3,w=0;w<g;w+=1)y+="="},v.toString=function(){return y},v},S=function(D){var V=D,T=0,y=0,v=0,I={};I.read=function(){for(;v<8;){if(T>=V.length){if(v==0)return-1;throw"unexpected end of file./"+v}var g=V.charAt(T);if(T+=1,g=="=")return v=0,-1;if(g.match(/^\s$/))continue;y=y<<6|E(g.charCodeAt(0)),v+=6}var w=y>>>v-8&255;return v-=8,w};var E=function(g){if(65<=g&&g<=90)return g-65;if(97<=g&&g<=122)return g-97+26;if(48<=g&&g<=57)return g-48+52;if(g==43)return 62;if(g==47)return 63;throw"c:"+g};return I},C=function(D,V){var T=D,y=V,v=new Array(D*V),I={};I.setPixel=function(L,$,ie){v[$*T+L]=ie},I.write=function(L){L.writeString("GIF87a"),L.writeShort(T),L.writeShort(y),L.writeByte(128),L.writeByte(0),L.writeByte(0),L.writeByte(0),L.writeByte(0),L.writeByte(0),L.writeByte(255),L.writeByte(255),L.writeByte(255),L.writeString(","),L.writeShort(0),L.writeShort(0),L.writeShort(T),L.writeShort(y),L.writeByte(0);var $=2,ie=g($);L.writeByte($);for(var he=0;ie.length-he>255;)L.writeByte(255),L.writeBytes(ie,he,255),he+=255;L.writeByte(ie.length-he),L.writeBytes(ie,he,ie.length-he),L.writeByte(0),L.writeString(";")};var E=function(L){var $=L,ie=0,he=0,W={};return W.write=function(Z,te){if(Z>>>te)throw"length over";for(;ie+te>=8;)$.writeByte(255&(Z<<ie|he)),te-=8-ie,Z>>>=8-ie,he=0,ie=0;he=Z<<ie|he,ie=ie+te},W.flush=function(){ie>0&&$.writeByte(he)},W},g=function(L){for(var $=1<<L,ie=(1<<L)+1,he=L+1,W=w(),Z=0;Z<$;Z+=1)W.add(String.fromCharCode(Z));W.add(String.fromCharCode($)),W.add(String.fromCharCode(ie));var te=N(),ye=E(te);ye.write($,he);var we=0,ot=String.fromCharCode(v[we]);for(we+=1;we<v.length;){var Qe=String.fromCharCode(v[we]);we+=1,W.contains(ot+Qe)?ot=ot+Qe:(ye.write(W.indexOf(ot),he),W.size()<4095&&(W.size()==1<<he&&(he+=1),W.add(ot+Qe)),ot=Qe)}return ye.write(W.indexOf(ot),he),ye.write(ie,he),ye.flush(),te.toByteArray()},w=function(){var L={},$=0,ie={};return ie.add=function(he){if(ie.contains(he))throw"dup key:"+he;L[he]=$,$+=1},ie.size=function(){return $},ie.indexOf=function(he){return L[he]},ie.contains=function(he){return typeof L[he]<"u"},ie};return I},O=function(D,V,T){for(var y=C(D,V),v=0;v<V;v+=1)for(var I=0;I<D;I+=1)y.setPixel(I,v,T(I,v));var E=N();y.write(E);for(var g=A(),w=E.toByteArray(),L=0;L<w.length;L+=1)g.writeByte(w[L]);return g.flush(),"data:image/gif;base64,"+g};return r}();(function(){n.stringToBytesFuncs["UTF-8"]=function(r){function s(i){for(var o=[],l=0;l<i.length;l++){var u=i.charCodeAt(l);u<128?o.push(u):u<2048?o.push(192|u>>6,128|u&63):u<55296||u>=57344?o.push(224|u>>12,128|u>>6&63,128|u&63):(l++,u=65536+((u&1023)<<10|i.charCodeAt(l)&1023),o.push(240|u>>18,128|u>>12&63,128|u>>6&63,128|u&63))}return o}return s(r)}})(),function(r){t.exports=r()}(function(){return n})})(vE);var hb=vE.exports;const gv=wv(hb),db=({url:t,themeColor:e="#0082FF",logoUrl:n,size:r=300})=>{const s=G.useRef(null);G.useEffect(()=>{if(!s.current)return;const l=gv(0,"H");l.addData(t),l.make();const u=s.current,c=u.getContext("2d");if(!c)return;const d=l.getModuleCount(),m=r/d;u.width=r,u.height=r,c.fillStyle="#ffffff",c.fillRect(0,0,r,r);const _=n?r*.2:0,R=(r-_)/2,P=(r-_)/2,k=_/2,N=r/2,A=r/2;c.fillStyle=e;for(let S=0;S<d;S++)for(let C=0;C<d;C++)if(l.isDark(S,C)){const O=C*m,D=S*m,V=O+m/2,T=D+m/2;if(n&&Math.sqrt(Math.pow(V-N,2)+Math.pow(T-A,2))<k+10)continue;const y=m*.4;c.beginPath(),c.roundRect(O,D,m,m,y),c.fill()}if(n){const S=new Image;S.crossOrigin="anonymous",S.onload=()=>{const C=_+20;c.fillStyle="#ffffff",c.beginPath(),c.arc(N,A,C/2,0,2*Math.PI),c.fill(),c.shadowColor="rgba(0, 0, 0, 0.1)",c.shadowBlur=4,c.shadowOffsetX=0,c.shadowOffsetY=2,c.save(),c.beginPath(),c.arc(N,A,_/2,0,2*Math.PI),c.clip(),c.drawImage(S,R,P,_,_),c.restore(),c.shadowColor="transparent",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0,c.strokeStyle="#e5e7eb",c.lineWidth=2,c.beginPath(),c.arc(N,A,_/2,0,2*Math.PI),c.stroke()},S.onerror=()=>{console.warn("Failed to load logo image for QR code")},S.src=n}},[t,e,n,r]);const i=()=>{if(!s.current)return;const l=document.createElement("a");l.download="qr-menu.png",l.href=s.current.toDataURL(),l.click()},o=()=>{const l=gv(0,"H");l.addData(t),l.make();const u=l.getModuleCount(),c=10,d=u*c;let m=`<svg xmlns="http://www.w3.org/2000/svg" width="${d}" height="${d}" viewBox="0 0 ${d} ${d}">`;m+=`<rect width="${d}" height="${d}" fill="white"/>`;for(let P=0;P<u;P++)for(let k=0;k<u;k++)if(l.isDark(P,k)){const N=k*c,A=P*c;m+=`<rect x="${N}" y="${A}" width="${c}" height="${c}" fill="${e}" rx="4"/>`}m+="</svg>";const _=new Blob([m],{type:"image/svg+xml"}),R=document.createElement("a");R.download="qr-menu.svg",R.href=URL.createObjectURL(_),R.click()};return f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("canvas",{ref:s,className:"rounded-lg shadow-lg"}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:i,className:"px-4 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:" Download PNG"}),f.jsx("button",{onClick:o,className:"px-4 py-2 bg-primary-green text-white rounded-lg hover:bg-green-600 transition-colors",children:" Download SVG"})]})]})},fb="/qr-menu/assets/elegant-minimal-DY0fAEgD.svg",pb="/qr-menu/assets/modern-grid-BnF3hJU3.svg",mb="/qr-menu/assets/classic-list-BE4A_Hpu.svg",gb="/qr-menu/assets/photo-showcase-BkpzxUUl.svg",yb="/qr-menu/assets/compact-cards-Bg7Mgc83.svg",vb="/qr-menu/assets/image-showcase-bOE5zfoF.svg",Za=[{id:"elegant-minimal",name:"Digital Menu Pages",description:"Display your existing menu as images - perfect for physical menu photos",preview:fb,features:["Upload menu photos","A4 page support","No manual entry needed"]},{id:"modern-grid",name:"Modern Grid",description:"Card-based layout with images in a responsive grid",preview:pb,features:["Photo emphasis","Grid layout","Modern & colorful"]},{id:"classic-list",name:"Classic List",description:"Traditional menu format with clear sections",preview:mb,features:["Traditional style","Easy to read","Warm colors"]},{id:"photo-showcase",name:"Photo Showcase",description:"Large images to highlight your best dishes",preview:gb,features:["Full-width photos","Dark theme","Instagram-ready"]},{id:"compact-cards",name:"Compact Cards",description:"Space-efficient cards perfect for mobile",preview:yb,features:["Mobile optimized","Compact design","Quick browsing"]},{id:"image-showcase",name:"Image Showcase",description:"Visual gallery layout perfect for showcasing food photos",preview:vb,features:["Photo gallery","Visual focus","Instagram-style"]}];function _b({selectedTemplate:t,onSelect:e}){var s,i,o;const[n,r]=G.useState(null);return f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-3",children:"Choose Your Template"}),f.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto px-4",children:"Select a design that best represents your restaurant's style. Each template is fully responsive and optimized for mobile viewing."})]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:Za.map(l=>f.jsxs("button",{onClick:()=>e(l.id),className:`group relative overflow-hidden rounded-xl sm:rounded-2xl border-2 sm:border-3 transition-all duration-300 hover:shadow-xl sm:hover:scale-[1.02] ${t===l.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-lg shadow-blue-500/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-blue-300 dark:hover:border-blue-600"}`,children:[f.jsxs("div",{className:"aspect-[4/3] bg-gray-50 dark:bg-gray-900 relative overflow-hidden",children:[f.jsx("img",{src:l.preview,alt:`${l.name} template preview`,className:"w-full h-full object-contain p-2 sm:p-4 transition-transform duration-300 group-hover:scale-110"}),f.jsx("div",{className:"absolute inset-0 bg-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:f.jsxs("button",{onClick:u=>{u.stopPropagation(),r(l.id)},className:"text-blue-600 dark:text-blue-400 font-semibold text-xs sm:text-sm px-3 sm:px-4 py-1.5 sm:py-2 bg-white/95 dark:bg-gray-800/95 rounded-full hover:bg-white dark:hover:bg-gray-800 transition-colors border border-blue-200 dark:border-blue-700",children:[f.jsx("span",{className:"hidden sm:inline",children:" Preview Large"}),f.jsx("span",{className:"sm:hidden",children:" Preview"})]})}),t===l.id&&f.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:f.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),f.jsxs("div",{className:"p-4 sm:p-6 text-left",children:[f.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:l.name}),f.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-3 sm:mb-4 leading-relaxed",children:l.description}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Features:"}),f.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:l.features.map((u,c)=>f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 sm:py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full",children:[f.jsx("span",{className:"text-green-500 text-xs",children:""}),f.jsx("span",{className:"truncate max-w-[120px] sm:max-w-none",children:u})]},c))})]})]})]},l.id))}),n&&f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",onClick:()=>r(null),children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-auto",onClick:l=>l.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[f.jsxs("h3",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:[(s=Za.find(l=>l.id===n))==null?void 0:s.name," Preview"]}),f.jsx("button",{onClick:()=>r(null),className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:f.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg sm:rounded-xl p-4 sm:p-8",children:f.jsx("img",{src:((i=Za.find(l=>l.id===n))==null?void 0:i.preview)||"",alt:`${(o=Za.find(l=>l.id===n))==null?void 0:o.name} large preview`,className:"w-full max-w-2xl mx-auto rounded-lg shadow-lg"})}),f.jsxs("div",{className:"mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-center",children:[f.jsx("button",{onClick:()=>{n&&(e(n),r(null))},className:"w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition-colors text-sm sm:text-base",children:"Select This Template"}),f.jsx("button",{onClick:()=>r(null),className:"w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold rounded-lg transition-colors text-sm sm:text-base",children:"Close Preview"})]})]})})]})}function yv({value:t="",onChange:e,label:n,placeholder:r="https://example.com/image.jpg"}){const[s,i]=G.useState(!1),o=[{name:"Imgur",url:"https://imgur.com",description:"Free image hosting - drag & drop, no account needed",icon:""},{name:"PostImages",url:"https://postimages.org",description:"Free permanent hosting - simple upload",icon:""},{name:"ImgBB",url:"https://imgbb.com",description:"Free image hosting with API - up to 32MB",icon:""},{name:"Cloudinary",url:"https://cloudinary.com",description:"Professional CDN with image optimization",icon:""},{name:"Google Drive",url:"https://drive.google.com",description:'Share image  "Anyone with link can view"  Copy link',icon:""}];return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300",children:n}),f.jsx("button",{type:"button",onClick:()=>i(!s),className:"text-xs text-blue-400 hover:text-blue-300 underline",children:"Where to host images?"})]}),f.jsx("input",{type:"url",value:t,onChange:l=>e(l.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:r}),t&&f.jsxs("div",{className:"mt-3",children:[f.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Preview:"}),f.jsxs("div",{className:"w-32 h-24 bg-gray-700 rounded-lg overflow-hidden border border-gray-600 relative",children:[f.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover",style:{objectFit:"cover",objectPosition:"center"},onError:l=>{const u=l.target;u.style.display="none";const c=u.nextElementSibling;c&&c.classList.remove("hidden")},onLoad:l=>{const u=l.target;u.style.display="block";const c=u.nextElementSibling;c&&c.classList.add("hidden")}}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 text-xs hidden bg-gray-700",children:" Invalid URL"})]})]}),s&&f.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-4 space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h4",{className:"text-sm font-semibold text-gray-200",children:" Image Hosting Options"}),f.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-300",children:""})]}),f.jsx("div",{className:"space-y-2",children:o.map(l=>f.jsxs("div",{className:"flex items-start gap-3 p-2 bg-gray-700/50 rounded",children:[f.jsx("span",{className:"text-lg",children:l.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-blue-400 hover:text-blue-300 hover:underline",children:l.name})}),f.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:l.description})]})]},l.name))}),f.jsx("div",{className:"pt-3 border-t border-gray-600",children:f.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[f.jsx("p",{className:"font-medium text-gray-300",children:" Tips for best results:"}),f.jsxs("ul",{className:"space-y-0.5 ml-2",children:[f.jsx("li",{children:" Use 16:9 or 4:3 aspect ratio images"}),f.jsx("li",{children:" Compress images to under 1MB for faster loading"}),f.jsx("li",{children:" Ensure image URL ends with .jpg, .png, or .webp"}),f.jsx("li",{children:" Test the URL in a browser before using"})]})]})})]})]})}const wb=[{name:"Blue",color:"#0082FF"},{name:"Green",color:"#00D688"},{name:"Purple",color:"#9333EA"},{name:"Red",color:"#EF4444"},{name:"Orange",color:"#F59E0B"}],vv=()=>{const t=ta(),{menuId:e}=j0(),{user:n}=nc(),[r,s]=G.useState(0),[i,o]=G.useState(null),[l,u]=G.useState(!1),[c,d]=G.useState(""),[m,_]=G.useState(""),[R,P]=G.useState("#0082FF"),[k,N]=G.useState("MVR"),[A,S]=G.useState("elegant-minimal"),[C,O]=G.useState([]);G.useEffect(()=>{e&&(u(!0),gE(e).then(g=>{g&&(d(g.restaurantName),_(g.logoUrl||""),P(g.themeColor),N(g.currency),S(g.template),O(g.sections),s(2)),u(!1)}))},[e]),Od.useEffect(()=>{r>1&&!i&&lb({restaurantName:c,logoUrl:m,themeColor:R,currency:k,template:A,sections:C})},[c,m,R,k,A,C,r,i]);const D=()=>{O([...C,{id:`section-${Date.now()}`,name:"New Section",items:[]}])},V=(g,w)=>{O(C.map(L=>L.id===g?{...L,name:w}:L))},T=g=>{O(C.filter(w=>w.id!==g))},y=g=>{O(C.map(w=>w.id===g?{...w,items:[...w.items,{id:`item-${Date.now()}`,name:"New Item",description:"",price:0,tags:[]}]}:w))},v=(g,w,L)=>{O(C.map($=>$.id===g?{...$,items:$.items.map(ie=>ie.id===w?{...ie,...L}:ie)}:$))},I=(g,w)=>{O(C.map(L=>L.id===g?{...L,items:L.items.filter($=>$.id!==w)}:L))},E=async()=>{if(n){u(!0);try{let g;e?g=await ib(e,{restaurantName:c,logoUrl:m,themeColor:R,currency:k,template:A,sections:C},n.uid):g=await sb({restaurantName:c,logoUrl:m,themeColor:R,currency:k,template:A,sections:C},n.uid),o(g),ub()}catch(g){console.error("Error publishing menu:",g),alert("Failed to publish menu. Please try again.")}finally{u(!1)}}};if(i){const g=`${window.location.origin}/qr-menu/m/${i.id}`,w=`${window.location.origin}/qr-menu/edit/${i.id}?key=${i.editKey}`;return f.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-4xl font-bold mb-4",children:" Your Menu is Live!"}),f.jsx("p",{className:"text-gray-400",children:"Share this QR code with your customers"})]}),f.jsx("div",{className:"bg-gray-800 rounded-lg p-8 mb-6",children:f.jsxs("div",{className:"flex flex-col items-center gap-6",children:[f.jsx(db,{url:g,themeColor:R,logoUrl:m}),f.jsxs("div",{className:"w-full space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm text-gray-400",children:"Public Menu Link"}),f.jsx("input",{type:"text",value:g,readOnly:!0,className:"w-full px-4 py-2 bg-gray-700 rounded-lg mt-1"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm text-gray-400",children:"Edit Link (Keep this private!)"}),f.jsx("input",{type:"text",value:w,readOnly:!0,className:"w-full px-4 py-2 bg-gray-700 rounded-lg mt-1"})]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>window.open(`/qr-menu/m/${i.id}`,"_blank"),className:"px-6 py-3 bg-primary-blue rounded-lg hover:bg-blue-600",children:"View Menu"}),f.jsx("button",{onClick:()=>t("/dashboard"),className:"px-6 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Back to Dashboard"})]})]})})]})})}return f.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[f.jsx("div",{className:"border-b border-gray-800 p-6",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"QR Menu Studio"}),f.jsx("div",{className:"flex items-center gap-2 mt-4",children:["Template","Info","Menu"].map((g,w)=>f.jsxs("div",{className:"flex items-center",children:[f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${w===r?"bg-primary-blue":w<r?"bg-primary-green":"bg-gray-700"}`,children:w+1}),f.jsx("span",{className:"text-xs mt-1 text-gray-400",children:g})]}),w<2&&f.jsx("div",{className:"w-12 h-0.5 bg-gray-700 mx-2 mt-[-16px]"})]},w))})]})}),f.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[r===0&&f.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[f.jsx(_b,{selectedTemplate:A,onSelect:g=>S(g)}),A==="elegant-minimal"&&f.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"text-4xl",children:""}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Digital Menu Pages - Quick Setup Guide"}),f.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Perfect for displaying your existing physical menu! Simply upload photos of your menu pages."}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:" How it works:"}),f.jsxs("ol",{className:"text-sm text-gray-600 space-y-1 list-decimal list-inside",children:[f.jsx("li",{children:"Take clear photos of each menu page (A4 size recommended)"}),f.jsx("li",{children:"Upload to Imgur, Google Drive, or any image host"}),f.jsx("li",{children:"Add each page as a menu item with the image URL"}),f.jsx("li",{children:'Name each item like "Page 1 - Appetizers", "Page 2 - Main Courses"'})]})]}),f.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:" Tips:"}),f.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[f.jsx("li",{children:" Use landscape orientation for better mobile viewing"}),f.jsx("li",{children:" Ensure text is clearly readable in photos"}),f.jsx("li",{children:" Keep file sizes under 2MB for fast loading"}),f.jsx("li",{children:" No need to manually enter items - your menu image has everything!"})]})]})]})]})]})}),f.jsx("button",{onClick:()=>s(1),className:"w-full py-3 bg-primary-blue rounded-lg hover:bg-blue-600",children:"Continue to Restaurant Info"})]}),r===1&&f.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[f.jsx("h2",{className:"text-3xl font-bold",children:"Restaurant Information"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-2",children:"Restaurant Name *"}),f.jsx("input",{type:"text",value:c,onChange:g=>d(g.target.value),className:"w-full px-4 py-3 bg-gray-800 rounded-lg",placeholder:"My Restaurant"})]}),f.jsx("div",{children:f.jsx(yv,{value:m,onChange:_,label:"Restaurant Logo URL (Optional)",placeholder:"https://example.com/logo.png"})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-2",children:"Theme Color"}),f.jsx("div",{className:"flex gap-3 mb-3",children:wb.map(g=>f.jsx("button",{onClick:()=>P(g.color),className:"w-12 h-12 rounded-lg border-2 transition-all",style:{backgroundColor:g.color,borderColor:R===g.color?"white":"transparent"},title:g.name},g.color))}),f.jsx("input",{type:"color",value:R,onChange:g=>P(g.target.value),className:"w-full h-12 rounded-lg"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-2",children:"Currency"}),f.jsxs("select",{value:k,onChange:g=>N(g.target.value),className:"w-full px-4 py-3 bg-gray-800 rounded-lg",children:[f.jsx("option",{value:"MVR",children:"MVR (Maldivian Rufiyaa)"}),f.jsx("option",{value:"USD",children:"USD ($)"}),f.jsx("option",{value:"EUR",children:"EUR ()"}),f.jsx("option",{value:"GBP",children:"GBP ()"}),f.jsx("option",{value:"INR",children:"INR ()"})]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>s(0),className:"px-6 py-3 bg-gray-800 rounded-lg hover:bg-gray-700",children:"Back"}),f.jsx("button",{onClick:()=>s(2),disabled:!c,className:"flex-1 py-3 bg-primary-blue rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Menu Editor"})]})]}),r===2&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h2",{className:"text-3xl font-bold",children:"Build Your Menu"}),f.jsx("button",{onClick:D,className:"px-4 py-2 bg-primary-green rounded-lg hover:bg-green-600",children:"+ Add Section"})]}),C.length===0&&f.jsx("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:f.jsx("p",{className:"text-gray-400 mb-4",children:'No sections yet. Click "Add Section" to start building your menu.'})}),C.map(g=>f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[f.jsxs("div",{className:"flex gap-4 mb-4",children:[f.jsx("input",{type:"text",value:g.name,onChange:w=>V(g.id,w.target.value),className:"flex-1 px-4 py-2 bg-gray-700 rounded-lg"}),f.jsx("button",{onClick:()=>y(g.id),className:"px-4 py-2 bg-primary-blue rounded-lg hover:bg-blue-600",children:"+ Add Item"}),f.jsx("button",{onClick:()=>T(g.id),className:"px-4 py-2 bg-red-500 rounded-lg hover:bg-red-600",children:"Delete"})]}),f.jsx("div",{className:"space-y-3",children:g.items.map(w=>f.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 space-y-4",children:[f.jsxs("div",{className:"grid md:grid-cols-4 gap-3",children:[f.jsx("input",{type:"text",value:w.name,onChange:L=>v(g.id,w.id,{name:L.target.value}),className:"px-3 py-2 bg-gray-600 rounded",placeholder:"Item name"}),f.jsx("input",{type:"text",value:w.description||"",onChange:L=>v(g.id,w.id,{description:L.target.value}),className:"px-3 py-2 bg-gray-600 rounded",placeholder:"Description"}),f.jsx("input",{type:"number",value:w.price,onChange:L=>v(g.id,w.id,{price:Number(L.target.value)}),className:"px-3 py-2 bg-gray-600 rounded",placeholder:"Price"}),f.jsx("button",{onClick:()=>I(g.id,w.id),className:"px-3 py-2 bg-red-500 rounded hover:bg-red-600",children:"Delete"})]}),f.jsx(yv,{value:w.imageUrl||"",onChange:L=>v(g.id,w.id,{imageUrl:L}),label:"Item Image URL (Optional)",placeholder:"https://your-image-host.com/food-image.jpg"}),f.jsx("div",{className:"flex gap-2",children:["veg","non_veg","spicy","new"].map(L=>f.jsx("button",{onClick:()=>{const $=w.tags.includes(L)?w.tags.filter(ie=>ie!==L):[...w.tags,L];v(g.id,w.id,{tags:$})},className:`px-3 py-1 text-xs rounded ${w.tags.includes(L)?"bg-primary-green":"bg-gray-600"}`,children:L},L))})]},w.id))})]},g.id)),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>s(1),className:"px-6 py-3 bg-gray-800 rounded-lg hover:bg-gray-700",children:"Back"}),f.jsx("button",{onClick:E,disabled:l||C.length===0,className:"flex-1 py-3 bg-primary-green rounded-lg hover:bg-green-600 disabled:opacity-50",children:l?"Publishing...":e?"Update Menu":"Publish Menu"})]})]})]})]})};function _v({menu:t}){const e=t.sections.flatMap(r=>r.items).filter(r=>r.imageUrl).map(r=>({imageUrl:r.imageUrl,name:r.name,description:r.description})),n=e.length>0;return f.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[f.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10 border-b border-gray-200",children:f.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[t.logoUrl&&f.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden border-2 border-gray-200",children:f.jsx("img",{src:t.logoUrl,alt:t.restaurantName,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-serif font-bold text-gray-900",children:t.restaurantName}),f.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-0.5",children:"Digital Menu"})]})]}),n&&f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Pages"}),f.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900",children:e.length})]})]})})}),f.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-8 md:py-12",children:n?f.jsx("div",{className:"space-y-6 sm:space-y-8",children:e.map((r,s)=>f.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[r.name&&f.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 bg-gray-50 border-b border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:r.name}),f.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["Page ",s+1," of ",e.length]})]}),r.description&&f.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:r.description})]}),f.jsx("div",{className:"relative bg-gray-100",children:f.jsx("img",{src:r.imageUrl,alt:r.name||`Menu Page ${s+1}`,className:"w-full h-auto",style:{maxHeight:"1200px",objectFit:"contain",objectPosition:"center"},loading:s===0?"eager":"lazy"})})]},s))}):f.jsx("div",{className:"max-w-2xl mx-auto text-center py-12 sm:py-16",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-dashed border-gray-300 p-6 sm:p-8 md:p-12",children:[f.jsx("div",{className:"text-5xl sm:text-6xl mb-4",children:""}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4",children:"Digital Menu Pages"}),f.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8 leading-relaxed",children:"This template displays your existing menu as images. Perfect for restaurants that already have professionally designed menus!"}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6 text-left space-y-3 sm:space-y-4",children:[f.jsxs("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base flex items-center gap-2",children:[f.jsx("span",{children:""})," How to use this template:"]}),f.jsxs("ol",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm text-gray-700 list-decimal list-inside",children:[f.jsx("li",{children:"Take clear photos of your physical menu pages (or use PDF images)"}),f.jsx("li",{children:"Upload images to a hosting service (Imgur, Google Drive, etc.)"}),f.jsx("li",{children:"Add each menu page as a separate item in any section"}),f.jsx("li",{children:'Paste the image URL in the "Item Image URL" field'}),f.jsx("li",{children:'Use the item name to label each page (e.g., "Main Courses", "Page 1")'})]}),f.jsxs("div",{className:"pt-3 sm:pt-4 border-t border-blue-200",children:[f.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 mb-2",children:" Best Practices:"}),f.jsxs("ul",{className:"space-y-1 text-xs sm:text-sm text-gray-600",children:[f.jsx("li",{children:" Use high-resolution images (A4 size recommended: 2480x3508px)"}),f.jsx("li",{children:" Ensure good lighting and clear text visibility"}),f.jsx("li",{children:" Compress images to under 2MB for faster loading"}),f.jsx("li",{children:" Number your pages in the item names for easy navigation"})]})]})]})]})})}),n&&f.jsx("div",{className:"text-center py-6 sm:py-8 border-t border-gray-200 bg-gray-50",children:f.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Powered by QR Menu Studio  ",e.length," ",e.length===1?"Page":"Pages"]})})]})}const Eb={veg:"bg-green-100 text-green-800",non_veg:"bg-red-100 text-red-800",spicy:"bg-orange-100 text-orange-800",new:"bg-blue-100 text-blue-800",popular:"bg-yellow-100 text-yellow-800",recommended:"bg-purple-100 text-purple-800"};function Tb({menu:t}){return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("div",{className:"py-16 px-6 text-white",style:{backgroundColor:t.themeColor},children:f.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[t.logoUrl&&f.jsx("div",{className:"w-32 h-32 mx-auto mb-6 rounded-full shadow-2xl border-4 border-white bg-white flex items-center justify-center overflow-hidden",children:f.jsx("img",{src:t.logoUrl,alt:t.restaurantName,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}),f.jsx("h1",{className:"text-5xl font-bold mb-2",children:t.restaurantName})]})}),f.jsx("div",{className:"max-w-7xl mx-auto px-6 py-12",children:t.sections.map(e=>f.jsxs("div",{className:"mb-16",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8 text-gray-900",children:e.name}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.items.map(n=>f.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[n.imageUrl&&f.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-48 object-cover"}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n.name}),f.jsxs("span",{className:"text-lg font-bold text-gray-900 whitespace-nowrap ml-2",children:[t.currency," ",n.price.toFixed(2)]})]}),n.description&&f.jsx("p",{className:"text-sm text-gray-600 mb-3",children:n.description}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(r=>f.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${Eb[r]}`,children:r.replace("_"," ")},r))})]})]},n.id))})]},e.id))})]})}function xb({menu:t}){return f.jsxs("div",{className:"min-h-screen bg-amber-50",children:[f.jsx("div",{className:"bg-amber-900 text-amber-50 py-12 px-6 border-b-4 border-amber-700",children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[t.logoUrl&&f.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-amber-300 shadow-lg bg-white flex items-center justify-center overflow-hidden mx-auto mb-4",children:f.jsx("img",{src:t.logoUrl,alt:t.restaurantName,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}),f.jsx("h1",{className:"text-4xl font-serif font-bold mb-2",children:t.restaurantName}),f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx("div",{className:"w-12 h-0.5 bg-amber-400"}),f.jsx("div",{className:"w-2 h-2 bg-amber-400 rotate-45"}),f.jsx("div",{className:"w-12 h-0.5 bg-amber-400"})]})]})}),f.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:t.sections.map((e,n)=>f.jsxs("div",{className:n>0?"mt-12":"",children:[f.jsx("div",{className:"text-center mb-8",children:f.jsx("h2",{className:"text-3xl font-serif font-bold text-amber-900 inline-block border-b-2 border-amber-700 pb-2",children:e.name})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border-2 border-amber-200 p-6",children:e.items.map((r,s)=>f.jsx("div",{className:`${s>0?"border-t border-amber-200 pt-4 mt-4":""}`,children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.name}),f.jsx("div",{className:"flex gap-1",children:r.tags.map(i=>f.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-amber-100 text-amber-800 font-medium",children:i==="veg"?"":i==="non_veg"?"":i==="spicy"?"":""},i))})]}),r.description&&f.jsx("p",{className:"text-sm text-gray-600",children:r.description})]}),f.jsx("div",{className:"ml-4",children:f.jsxs("span",{className:"text-lg font-bold text-amber-900",children:[t.currency," ",r.price.toFixed(2)]})})]})},r.id))})]},e.id))})]})}function Ib({menu:t}){return f.jsxs("div",{className:"min-h-screen bg-black text-white",children:[f.jsxs("div",{className:"relative h-96 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black z-10"}),t.logoUrl?f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx("img",{src:t.logoUrl,alt:t.restaurantName,className:"w-full h-full object-cover opacity-30",style:{objectFit:"cover",objectPosition:"center"}})}):f.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-900 to-gray-800"}),f.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-6xl font-bold mb-4",children:t.restaurantName}),f.jsx("div",{className:"w-32 h-1 bg-white mx-auto"})]})})]}),f.jsx("div",{className:"max-w-7xl mx-auto px-6 py-16",children:t.sections.map(e=>f.jsxs("div",{className:"mb-20",children:[f.jsx("h2",{className:"text-4xl font-bold mb-12 text-center uppercase tracking-widest",children:e.name}),f.jsx("div",{className:"space-y-8",children:e.items.map(n=>f.jsx("div",{className:"group relative overflow-hidden rounded-2xl",children:n.imageUrl?f.jsxs("div",{className:"relative h-96",children:[f.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent"}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:f.jsxs("div",{className:"flex justify-between items-end",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-3xl font-bold mb-2",children:n.name}),n.description&&f.jsx("p",{className:"text-gray-300 max-w-2xl",children:n.description}),f.jsx("div",{className:"flex gap-2 mt-3",children:n.tags.map(r=>f.jsx("span",{className:"px-3 py-1 text-sm rounded-full bg-white/20 backdrop-blur-sm",children:r.replace("_"," ")},r))})]}),f.jsxs("div",{className:"text-3xl font-bold",children:[t.currency," ",n.price.toFixed(2)]})]})})]}):f.jsx("div",{className:"bg-gray-900 p-8 rounded-2xl",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-2xl font-bold mb-2",children:n.name}),n.description&&f.jsx("p",{className:"text-gray-400",children:n.description}),f.jsx("div",{className:"flex gap-2 mt-3",children:n.tags.map(r=>f.jsx("span",{className:"px-3 py-1 text-sm rounded-full bg-white/10",children:r.replace("_"," ")},r))})]}),f.jsxs("div",{className:"text-2xl font-bold ml-4",children:[t.currency," ",n.price.toFixed(2)]})]})})},n.id))})]},e.id))})]})}function Sb({menu:t}){return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white",children:[f.jsx("div",{className:"sticky top-0 z-50 backdrop-blur-xl bg-gray-900/80 border-b border-gray-700",children:f.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center gap-4",children:[t.logoUrl&&f.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden",children:f.jsx("img",{src:t.logoUrl,alt:t.restaurantName,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}),f.jsx("h1",{className:"text-2xl font-bold",children:t.restaurantName})]})}),f.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:t.sections.map(e=>f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 px-2 text-gray-100",children:e.name}),f.jsx("div",{className:"space-y-3",children:e.items.map(n=>f.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-colors",children:f.jsxs("div",{className:"flex gap-3",children:[n.imageUrl&&f.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex justify-between items-start gap-2 mb-1",children:[f.jsx("h3",{className:"font-semibold text-white truncate",children:n.name}),f.jsxs("span",{className:"font-bold text-green-400 whitespace-nowrap text-sm",children:[t.currency," ",n.price.toFixed(2)]})]}),n.description&&f.jsx("p",{className:"text-sm text-gray-400 line-clamp-2 mb-2",children:n.description}),n.tags.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1",children:n.tags.map(r=>f.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-700 text-gray-300",children:r==="veg"?"":r==="non_veg"?"":r==="spicy"?"":""},r))})]})]})},n.id))})]},e.id))})]})}function Ab({menu:t}){return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800",children:[f.jsx("div",{className:"bg-black/50 backdrop-blur-sm py-8 px-6 sticky top-0 z-10 border-b border-gray-700",children:f.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[t.logoUrl&&f.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 border-2 border-white/20 flex items-center justify-center overflow-hidden backdrop-blur-sm",children:f.jsx("img",{src:t.logoUrl,alt:t.restaurantName,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-white",children:t.restaurantName}),f.jsx("p",{className:"text-gray-300 text-sm",children:"Visual Menu Experience"})]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Menu"}),f.jsx("div",{className:"text-white font-semibold",children:"Gallery"})]})]})}),f.jsx("div",{className:"max-w-6xl mx-auto px-6 py-8",children:t.sections.map((e,n)=>f.jsxs("div",{className:n>0?"mt-16":"",children:[f.jsxs("div",{className:"text-center mb-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:e.name}),f.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto rounded-full"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.items.map(r=>f.jsxs("div",{className:"group bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 overflow-hidden hover:bg-white/10 transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:[f.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-700 to-gray-800 relative overflow-hidden",children:[r.imageUrl?f.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",style:{objectFit:"cover",objectPosition:"center"}}):f.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-600 to-gray-700",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-4xl mb-2",children:""}),f.jsx("div",{className:"text-gray-300 text-sm",children:"No Image"})]})}),f.jsx("div",{className:"absolute top-4 right-4",children:f.jsx("div",{className:"bg-black/70 backdrop-blur-sm px-3 py-1 rounded-full",children:f.jsxs("span",{className:"text-white font-bold text-sm",children:[t.currency," ",r.price.toFixed(2)]})})}),r.tags.length>0&&f.jsx("div",{className:"absolute bottom-4 left-4",children:f.jsx("div",{className:"flex gap-1",children:r.tags.slice(0,3).map(s=>f.jsx("span",{className:"w-6 h-6 rounded-full bg-white/90 flex items-center justify-center text-xs",children:s==="veg"?"":s==="non_veg"?"":s==="spicy"?"":s==="new"?"":s==="popular"?"":""},s))})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-300 transition-colors",children:r.name}),r.description&&f.jsx("p",{className:"text-gray-300 text-sm leading-relaxed line-clamp-2",children:r.description}),r.highlight&&f.jsx("div",{className:"mt-3",children:f.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-xs font-semibold rounded-full",children:" Featured"})})]})]},r.id))})]},e.id))}),f.jsx("div",{className:"text-center py-8 border-t border-gray-700 mt-16",children:f.jsx("p",{className:"text-gray-400 text-sm",children:"Powered by QR Menu Studio"})})]})}function Cb({menu:t}){switch(t.template){case"elegant-minimal":return f.jsx(_v,{menu:t});case"modern-grid":return f.jsx(Tb,{menu:t});case"classic-list":return f.jsx(xb,{menu:t});case"photo-showcase":return f.jsx(Ib,{menu:t});case"compact-cards":return f.jsx(Sb,{menu:t});case"image-showcase":return f.jsx(Ab,{menu:t});default:return f.jsx(_v,{menu:t})}}function Rb(){const{menuId:t}=j0(),[e,n]=G.useState(null),[r,s]=G.useState(!0);return G.useEffect(()=>{t&&gE(t).then(i=>{n(i),s(!1)})},[t]),r?f.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:f.jsx("div",{className:"text-gray-900 dark:text-white",children:"Loading menu..."})}):e?f.jsx(Cb,{menu:e}):f.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-6",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:" Menu Not Found"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"This menu doesn't exist or has been removed."}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please contact the restaurant for the correct menu link."})]})})}function ah({children:t}){const{user:e,loading:n}=nc();return n?f.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:f.jsx("div",{className:"text-white",children:"Loading..."})}):e?f.jsx(f.Fragment,{children:t}):f.jsx(aS,{to:"/",replace:!0})}function Pb(){return f.jsx(eb,{children:f.jsx(gS,{basename:"/qr-menu",children:f.jsxs(uS,{children:[f.jsx(Cs,{path:"/",element:f.jsx(tb,{})}),f.jsx(Cs,{path:"/dashboard",element:f.jsx(ah,{children:f.jsx(cb,{})})}),f.jsx(Cs,{path:"/creator",element:f.jsx(ah,{children:f.jsx(vv,{})})}),f.jsx(Cs,{path:"/edit/:menuId",element:f.jsx(ah,{children:f.jsx(vv,{})})}),f.jsx(Cs,{path:"/m/:menuId",element:f.jsx(Rb,{})})]})})})}lh.createRoot(document.getElementById("root")).render(f.jsx(Od.StrictMode,{children:f.jsx(Pb,{})}));
